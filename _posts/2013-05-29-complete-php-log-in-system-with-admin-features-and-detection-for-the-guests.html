---
layout: post
permalink: node/64198
---
Complete PHP log in system with Admin features and detection for the guests.\nHi all. Severally I have searched for a pure login system in the net but rarely found it. The biggest problem I faced is after login when I click the back button on fire fox or internet explorer I got back to the admin page again. Here I am demonstrating the best path in which you can make your secured login system in PHP. Somehow knowledge in PHP is essential.</p><p>Designing the database\nI have created an DB called “login_ashutosh”. I have given the privileges as username – ashutosh and password – ashutosh666.</p><p>Then created the following table </p><p>CREATE TABLE IF NOT EXISTS `admin` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `f_name` varchar(100) DEFAULT NULL,\n  `l_name` varchar(100) DEFAULT NULL,\n  `email` varchar(100) DEFAULT NULL,\n  `username` varchar(100) DEFAULT NULL,\n  `password` varchar(100) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;</p><p>Dumped the data in my own table.</p><p>INSERT INTO `admin` (`id`, `f_name`, `l_name`, `email`, `username`, `password`) VALUES\n(1, 'ashutosh', 'moharana', 'ashutosh.moharana@gmail.com', 'ashutosh', 'ashutosh6');</p><p>You also can insert the data as to your requirement either in the table or can change the privileges also. But be careful about all the script that changes as to your changes. I have tried to highlight the changes that you may do.</p><p>Then we can start up for the scripts in PHP. I am using easy PHP with adobe dream weaver cs3. First in www folder inside C:\Program Files\EasyPHP5.3.0\www make a folder called login_ashutosh. I have made in index page and also made one header and footer for the index page. Called as header_index and footer_index. </p><p>Index.php</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="css/login.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<div align="center">\n  <table width="800" border="0" cellpadding="0" cellspacing="0">\n    <!--DWLayoutTable-->\n    <tr>\n      <td width="800" height="40" valign="top">\n      <?php\n	  include_once 'header_index.php';\n	  ?>\n      &nbsp;</td>\n    </tr>\n    <tr>\n      <td height="520" valign="top"><table width="100%" border="0" cellpadding="0" cellspacing="0">\n        <!--DWLayoutTable-->\n        <tr>\n          <td width="800" height="480" valign="top"><p><a href="user/admin/admin_login.php">ADMIN LOGIN</a></p>\n            </td>\n          </tr>\n        <tr>\n          <td height="40" valign="top">\n          <?php\n		  include_once 'footer_index.php';\n		  ?>\n          &nbsp;</td>\n        </tr>\n      </table></td>\n    </tr>\n    <tr>\n      <td height="40" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>\n    </tr>\n  </table>\n</div>\n</body>\n</html></p><p>Save the index directly in the same folder. And then make the header file.</p><p>Header.php</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="css/login.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<table width="800" border="0" cellpadding="0" cellspacing="0">\n  <!--DWLayoutTable-->\n  <tr>\n    <td width="600" height="90" valign="top">\n          <?php\n	session_start(); //this must be at the top of every page\n	if (isset($_SESSION['valid_user']))\n	{\n	echo "WEL COME " ."<b>". $_SESSION["valid_user"]."</b>"."</br>";\n	echo "<a href=\"user/config/all_logout.php\">Click here to logout!</a>";\n	}\n	else\n	{\n	print "WEL COME GUEST";\n	}\n	  ?>\n    &nbsp;</td>\n    <td width="200" valign="top">DEMO SITE DEVELOPED BY ashutosh.moharana@gmail.com</td>\n  </tr>\n  \n  \n  <tr>\n    <td height="30" colspan="2" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>\n  </tr>\n</table>\n</body>\n</html></p><p>Save this file also in the same folder and make the footer one.\nFooter.php</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="css/login.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<table width="800" border="0" cellpadding="0" cellspacing="0">\n  <!--DWLayoutTable-->\n  <tr>\n    <td width="800" height="20" valign="top" class="footer_gapper">HOME I ABOUT US I CONTACT </td>\n  </tr>\n  <tr>\n    <td height="20" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>\n  </tr>\n</table>\n</body>\n</html></p><p>Then I have made another folder called “user”. I made another two folders as “config” and “admin” inside the same. Where config will contain all my common tasks the admin folder will contain all my admin documents.</p><p>First let’s go for the config folder. Make the connection file as stated below and save it as connect.php.</p><p>Connect.php</p><p><?php\n    $user_name = "ashutosh";\n    $password = "ashutosh666";\n    $database = "login_ashutosh";\n    $server = "localhost";\n$db_handle = mysql_connect($server, $user_name, $password);\n$db_found = mysql_select_db($database, $db_handle);</p><p>/* SCRIPT WRITTEN BY Ashutosh, Bluz Academy, India.\n?></p><p>Then also create another file called all_logout.php inside the same folder.</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="file:///F /www/smsl_bank/css/banking main.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<div align="center">\n  <table width="800" border="0" cellpadding="0" cellspacing="0">\n    <!--DWLayoutTable-->\n    <tr>\n      <td height="130" colspan="2" valign="top"><!--DWLayoutEmptyCell-->&nbsp;            </td>\n    </tr>\n    <tr>\n      <td height="20" colspan="2" valign="top">\n<?php\nsession_start();\nsession_unset();\nsession_destroy();\n// Logged out, return home.\nHeader("Location: ../../index.php");\n?>\n      &nbsp;</td>\n    </tr>\n    <tr>\n      <td width="20" height="350" valign="top" class="bodytext"><!--DWLayoutEmptyCell-->&nbsp;</td>\n      <td width="780" valign="top" class="bodytext"><p>Tnank you for accessing !!!</p>\n      <p>Click Here To go to the main page</p>        \n      <p>Click here to login again as a branch</p></td>\n    </tr>\n  </table>\n</div>\n</body>\n</html></p><p>Then go to the admin folder. Create a file called admin_login.php which will allow the admin to login. It is a simple form in PHP with HTML codes.</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="../../css/login.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<div align="center">\n  <table width="800" border="0" cellpadding="0" cellspacing="0">\n    <!--DWLayoutTable-->\n    <tr>\n      <td width="800" height="40" valign="top">\n      <?php\n	  include_once 'header_admin.php';\n	  ?>\n      &nbsp;</td>\n    </tr>\n    <tr>\n      <td height="520" valign="top"><table width="100%" border="0" cellpadding="0" cellspacing="0">\n        <!--DWLayoutTable-->\n        <tr>\n          <td width="800" height="480" valign="top">\n           <form action="admin_login_process.php" method="post"/>\n          <p class="yellowtext">&nbsp;</p>\n          User Name</span><br />\n          <input type="text" name="username"/>\n          <br />\n          Pass Word\n          <br />\n          <input type="password" name="password"/>\n          <br />\n          <br />\n          <input name="login" type="submit" class="redtext" value="login"/>\n          </form>\n          &nbsp;</td>\n          </tr>\n        <tr>\n          <td height="40" valign="top">\n          <?php\n		  include_once 'footer_admin.php';\n		  ?>\n          &nbsp;</td>\n        </tr>\n      </table></td>\n    </tr>\n    <tr>\n      <td height="40" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>\n    </tr>\n  </table>\n</div>\n</body>\n</html></p><p>Then create the admin_login_process.php and save it in the same folder.</p><p><?php\ninclude "../config/connect.php";\nif (!$_POST["username"]    !$_POST["password"])\n{\ndie("PROVIDE ADMIN FEATURES !!!");\n}\n// Create query\n$q = "SELECT * FROM `admin` "\n  ."WHERE `username`='".$_POST["username"]."' "\n  ."AND `password`='".$_POST["password"]."' "\n  ."LIMIT 1";\n// Run query\n$r = mysql_query($q);\nif ( $obj = @mysql_fetch_object($r) )\n  {\n// Login good, create session variables\nsession_start();\n$_SESSION["valid_user"] = $obj->username;</p><p>// Redirect to member page\nHeader("Location: admin.php");\n}\nelse\n{\n// Login not successful\ndie("SORRY UNAUTHORISED ACCESS !!!");\n}\n?></p><p>After the process in login the PHP will test the account details and will direct to admin.php. Let’s create it.\nAdmin.php</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="../../css/login.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<div align="center">\n  <table width="800" border="0" cellpadding="0" cellspacing="0">\n    <!--DWLayoutTable-->\n    <tr>\n      <td width="800" height="40" valign="top">\n      <?php\n	  include_once 'header_admin_loggedin.php';\n	  ?>\n      &nbsp;</td>\n    </tr>\n    <tr>\n      <td height="520" valign="top"><table width="100%" border="0" cellpadding="0" cellspacing="0">\n        <!--DWLayoutTable-->\n        <tr>\n          <td width="800" height="480" valign="top"><p>&nbsp;</p>\n            <p>ADMIN PAGE</p></td>\n          </tr>\n        <tr>\n          <td height="40" valign="top">\n          <?php\n		  include_once 'footer_admin.php';\n		  ?>\n          &nbsp;</td>\n        </tr>\n      </table></td>\n    </tr>\n    <tr>\n      <td height="40" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>\n    </tr>\n  </table>\n</div>\n</body>\n</html></p><p>Then make the footer for the admin page.</p><p>footer_admin.php</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="../../css/login.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<table width="800" border="0" cellpadding="0" cellspacing="0">\n  <!--DWLayoutTable-->\n  <tr>\n    <td width="800" height="20" valign="top" class="footer_gapper">HOME I ABOUT US I CONTACT </td>\n  </tr>\n  <tr>\n    <td height="20" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>\n  </tr>\n</table>\n</body>\n</html></p><p>Here some tricky step. I will use two headers for the best result. These two headers will deactivate your back button in the firefox/ internet explorer or any type of browser. The first will be the header_admin.php. It will be only showed in the log in page header. Please attach this header to the login page only.</p><p>header_admin.php</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="../../css/login.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<table width="800" border="0" cellpadding="0" cellspacing="0">\n  <!--DWLayoutTable-->\n  <tr>\n    <td width="600" height="90" valign="top">\n              <?php\n	session_start(); //this must be at the top of every page\n	if (isset($_SESSION['valid_user']))\n	{\n	echo "WEL COME " ."<b>". $_SESSION["valid_user"]."</b>"."</br>";\n	echo "<a href=\"../config/all_logout.php\">Click here to logout!</a>";\n	}\n	else\n	{\n	print "WEL COME GUEST";\n	}\n	  ?>\n    &nbsp;\n    \n    </td>\n    <td width="200" valign="top">DEMO SITE DEVELOPED BY ashutosh.moharana@gmail.com</td>\n  </tr>\n  <tr>\n    <td height="30" colspan="2" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>\n  </tr>\n</table>\n</body>\n</html></p><p>Then another file is for header but it will be attached to other admin pages as the single page I have created as admin.php. You also can create more pages with this header. The pages that only can be viewed by the admin will show this header.</p><p>header_admin_loggedin.php</p><p><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>Untitled Document</title>\n<link href="../../css/login.css" rel="stylesheet" type="text/css" />\n</head></p><p><body>\n<table width="800" border="0" cellpadding="0" cellspacing="0">\n  <!--DWLayoutTable-->\n  <tr>\n    <td width="600" height="90" valign="top">\n    <?php\nsession_start();\nif (!$_SESSION["valid_user"])\n{\n// User not logged in, redirect to login page\nHeader("Location: admin_login.php");\n}\n// Member only content\n// ...\n// ...\n// ...\n// Display Member information\necho "WEL COME USER: " ."<b>". $_SESSION["valid_user"]."</b>";\necho "<br/>";\necho "<a href=\"../config/all_logout.php\">Click here to logout!</a>";\n?>\n    &nbsp;</td>\n  <td width="200" valign="top">DEMO SITE DEVELOPED BY ashutosh.moharana@gmail.com</td>\n  </tr>\n  <tr>\n    <td height="30" colspan="2" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>\n  </tr>\n</table>\n</body>\n</html></p><p>The css I have used will be saved in the CSS folder within the login_ashutosh folder.</p><p>Login.css\n@charset "utf-8";\nbody,td,th {\n	font-family: Verdana, Arial, Helvetica, sans-serif;\n	font-size: 10px;\n}\n.footer_gapper {\n	font-family: Arial, Helvetica, sans-serif;\n	background-image: url(../image/images/gapper.png);\n	background-position: left center;\n	font-size: 10px;\n	text-align: right;\n	vertical-align: middle;\n}</p><p>The folder arrangements are like the following.</p><p>Login_ashutosh (index.php, header.php, footer.php)\n•	Css (login.css)\n•	User\no	Config (connect.php, all_logout.php)\no	Admin (admin.php, admin_login.php, admin_login_process.php, footer_admin.php, header_admin.php, header_admin_loggedin)</p><p>Please change the paths as to your requirement and get the perfect secured login. For any doubts please feel free to ask.