---
layout: post
permalink: node/3536
ratings: 0
avgrate: 
category: Code
user: adriank
real_name: "Adrian Kearns"
user_biog: ""
user_since: 20 Mar 2000
avatar: ""
article_count: 1
excerpt: "The Super Widget is a crawler that will can return useful info including &lt;Meta&gt; tags where present or read and output a selectable amount of bytes from the files it can open.</p><p>It was home buil"
---
<p>The Super Widget is a crawler that will can return useful info including &lt;Meta&gt; tags where present or read and output a selectable amount of bytes from the files it can open.</p></p><p><p>It was home built using PHP Version 4.0.2, on a win95 box running Apache 1.3.11 (Win32 Binary).</p></p><p><p>It should be fairy easy for you to add your own tweeks even if your a php beginner (like me).</p></p><p><p>Plans are also afoot to build an ASP / VB script version.</p></p><p><p>Here's the code. save it as 'super_widget.php'.</p></p><code></p><small></p><pre></p>==================================</p>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0Transitional//EN&quot;</p>&quot;http://www.w3.org/TR/REC-html40/loose.dtd&quot;&gt;</p><p>&lt;html&gt;&lt;head&gt;</p><p>&lt;title&gt;Super Widget&lt;/title&gt;</p><p>&lt;META name=&quot;description&quot; content=&quot;Super Widget - Version: Php 1.0&quot;&gt;</p>&lt;META name=&quot;Author&quot; content=&quot;abk@webscape.co.nz&quot;&gt;</p><p>&lt;!--</p>This little widget is free for non commercial use.</p>Please don't try and sell it to make money or it will automatically crash your server.</p>Enjoy :)</p>--&gt;</p><p>&lt;style type=&quot;text/css&quot;&gt;&lt;!-- </p><p>body { font-size: 100%; margin: 3em; } </p><p>h4 { font-family: verdana,helvetica,arial,sans-serif; }</p><p>p,ul,ol,li,form,input { font-size: 90%; font-family: verdana,helvetica,arial,sans-serif; }</p><p>td { background-color: #ddeeff; }</p><p>ul,ol,li { color: #ff9933; }</p>span { color: #999999; }</p><p>.asp { color: #0000ff; }</p>.css { color: #ff66cc; }</p>.htm { color: #cc00ff; }</p>.tml { color: #cc0099; }</p>.stm { color: #cc0033; }</p>.txt { color: #ff0000; }</p>.php { color: #0099ff; }</p><p>.meta { color: #000000; background-color: #ffeeee; }</p>.byte { color: #000000; background-color: #eeeeff; }</p><p>:link { color: #3366dd; text-decoration: none; } </p>v:link { color: #3366dd; text-decoration: none; }</p>a:link { color: #3366dd; text-decoration: none; }</p>a:visited { color: #3366dd; text-decoration: none; }</p>a:active { color: #3366dd; text-decoration: none; }</p>a:hover { color: #3366dd; }</p><p>--&gt;&lt;/style&gt;</p><p>&lt;/head&gt;</p><p></p>&lt;body&gt;</p><p></p>&lt;h4 align=&quot;center&quot;&gt;&lt;b&gt;S U P E R &nbsp; W I D G E T&lt;/b&gt;&lt;/h4&gt;</p><p>&lt;?</p><p>if ($todo == &quot;&quot;)</p>{ </p><p>	?&gt;</p><p>	&lt;form action=&quot;super_widget.php&quot; method=&quot;post&quot;&gt;</p><p>	&lt;input type=&quot;hidden&quot; name=&quot;todo&quot; value=&quot;doit&quot;&gt;</p><p>	&lt;table width=&quot;90%&quot; border=&quot;0&quot; align=&quot;center&quot; cellspacing=&quot;0&quot; cellpadding=&quot;3&quot;&gt;</p><p>	&lt;tr&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;&lt;p&gt;&lt;b&gt;Search Root: &lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;root_arg&quot; value=&quot;&quot; size=&quot;20&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</p><p>	&lt;tr&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;&lt;p&gt;&lt;b&gt;Extra Info: &lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;select name=&quot;process&quot;&gt;</p><p>	&lt;option value=&quot;None&quot;&gt;None&lt;/option&gt;</p>	&lt;option value=&quot;Meta Tags&quot;&gt;Meta tags&lt;/option&gt;</p>	&lt;option value=&quot;Output Bytes&quot;&gt;Output Bytes&lt;/option&gt;</p><p>	&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;</p><p>	&lt;tr&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;&lt;p&gt;&lt;b&gt;Number of bytes to output: &lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;select name=&quot;my_length&quot;&gt;</p><p>	&lt;option value=&quot;10&quot;&gt;10&lt;/option&gt;</p>	&lt;option value=&quot;50&quot;&gt;50&lt;/option&gt;</p>	&lt;option value=&quot;100&quot;&gt;100&lt;/option&gt;</p>	&lt;option value=&quot;200&quot;&gt;200&lt;/option&gt;</p>	&lt;option value=&quot;500&quot;&gt;500&lt;/option&gt;</p>	&lt;option value=&quot;1000&quot;&gt;1000&lt;/option&gt;</p>	&lt;option value=&quot;3000&quot;&gt;3000&lt;/option&gt;</p><p>	&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;</p><p>	&lt;tr&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;&nbsp;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;	&lt;input type=&quot;submit&quot; value=&quot;Go!&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</p><p>	&lt;/table&gt;&lt;/form&gt;</p><p>	&lt;?</p><p>}</p>else</p>{</p><p>	//================================================</p><p>	//echo &quot;&lt;ol&gt;&quot;;</p><p>	function file_widget ($file_name)</p>	{</p>		global $root_arg, $process, $my_length;</p>		$extn = substr($file_name, -3, 3);</p><p>		if (($extn == &quot;asp&quot;) or ($extn == &quot;css&quot;) or ($extn == &quot;htm&quot;) or ($extn == &quot;tml&quot;) or ($extn == &quot;stm&quot;) or ($extn == &quot;txt&quot;) or ($extn == &quot;php&quot;))</p>		{</p>		echo &quot;&lt;li&gt;&lt;span class='&quot; . $extn . &quot;'&gt;&quot; . $file_name . &quot;&lt;/span&gt;</p>&quot;;</p><p>			if ($process == &quot;None&quot;)</p>			{</p>				echo &quot;&lt;/li&gt;&quot;;</p>			}</p>			elseif ($process == &quot;Meta Tags&quot;)</p>			{</p>				$meta_info = get_meta_tags($file_name);</p>				foreach($meta_info as $k =&gt; $v)</p>				{</p>					echo &quot;&lt;br&gt;&lt;span class='meta'&gt;[ &quot; . $k . &quot; ][ &quot; . $v . &quot; ]&lt;/span&gt;&lt;/li&gt;&quot;;</p>				}</p>				//$meta_info = &quot;&quot;;</p>			}</p>			elseif ($process == &quot;Output Bytes&quot;)</p>			{</p>				$fd = fopen( $file_name, &quot;r&quot; );</p><p>				// Outputs the whole file</p>				//$contents = fread ($fd, filesize ($file_name));</p><p>				// length in bytes to read.</p>				$contents = fread ($fd, ($my_length));</p><p>				$contents = strtr($contents, &quot;&lt;&quot;, &quot;[&quot;);</p>				$contents = strtr($contents, &quot;&gt;&quot;, &quot;]&quot;);</p>				echo &quot;&lt;br&gt;&lt;span class='byte'&gt;&quot; . $contents . &quot;&lt;/span&gt;&lt;/li&gt;</p>&quot;;</p>				fclose( $fd );</p>			}</p>		}</p>		else</p>		{</p>			echo &quot;&lt;li&gt;&lt;span&gt;&quot; . $file_name . &quot;&lt;/span&gt;&lt;/li&gt;</p>&quot;;</p>		}</p>	}</p><p>	//================================================</p><p>	function general_widget ($dir_arg)</p>	{</p>		global $root_arg, $process, $my_length, $extn;</p>		if (is_file($dir_arg) == TRUE)</p>		{</p>			//i am a file</p>		}</p>		else</p>		{</p>		        $handle=opendir($dir_arg);</p>			//echo $root_arg . &quot;\&lt;br&gt;&quot;;</p>		        echo &quot;&lt;ol&gt;</p>&quot;;</p><p>		        while ($file = readdir($handle)) </p>		        {</p>        		        if ($file == &quot;.&quot;)</p>                		{</p>                        		//echo &quot;&lt;a href='$file'&gt;&lt;b&gt;Root&lt;/b&gt;&lt;/a&gt;&lt;br&gt;</p>&quot;;</p>		                }</p>		                elseif ($file == &quot;..&quot;)</p>	        	        {</p>	                	        //echo &quot;&lt;a href='$file'&gt;&lt;b&gt;Up One Level&lt;/b&gt;&lt;/a&gt;&lt;br&gt;</p>&quot;;</p>		                }</p>		                else</p>	        	        { </p>					if (is_file($file) == TRUE)</p>					{</p>						echo file_widget ($file);</p>					} </p>					else </p>					{</p>						$woo = $dir_arg . chr(47) . $file;</p>						echo file_widget ($woo);</p>						echo general_widget ($woo);</p>					}</p>		                }</p>	        	}</p>		        echo &quot;&lt;/ol&gt;</p>&quot;;</p>		        closedir($handle); </p>		}</p>	}</p><p>	//================================================</p><p>	?&gt;</p><p>	&lt;form action=&quot;super_widget.php&quot; method=&quot;post&quot;&gt;</p><p>	&lt;input type=&quot;hidden&quot; name=&quot;todo&quot; value=&quot;doit&quot;&gt;</p><p>	&lt;table width=&quot;90%&quot; border=&quot;0&quot; align=&quot;center&quot; cellspacing=&quot;0&quot; cellpadding=&quot;3&quot;&gt;</p><p>	&lt;tr&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;&lt;p&gt;&lt;b&gt;Search Root: &lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;root_arg&quot; value=&quot;&lt;? echo $root_arg; ?&gt;&quot; size=&quot;20&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</p><p>	&lt;tr&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;&lt;p&gt;&lt;b&gt;Extra Info: &lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;select name=&quot;process&quot;&gt;</p><p>	&lt;option selected value=&quot;&lt;? echo $process; ?&gt;&quot;&gt;&lt;? echo $process; ?&gt;&lt;/option&gt;</p>	&lt;option value=&quot;None&quot;&gt;None&lt;/option&gt;</p>	&lt;option value=&quot;Meta Tags&quot;&gt;Meta Tags&lt;/option&gt;</p>	&lt;option value=&quot;Output Bytes&quot;&gt;Output Bytes&lt;/option&gt;</p><p>	&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;</p><p>	&lt;tr&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;&lt;p&gt;&lt;b&gt;Number of bytes to output: &lt;/b&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;select name=&quot;my_length&quot;&gt;</p><p>	&lt;option selected value=&quot;&lt;? echo $my_length; ?&gt;&quot;&gt;&lt;? echo $my_length; ?&gt;&lt;/option&gt;</p>	&lt;option value=&quot;10&quot;&gt;10&lt;/option&gt;</p>	&lt;option value=&quot;50&quot;&gt;50&lt;/option&gt;</p>	&lt;option value=&quot;100&quot;&gt;100&lt;/option&gt;</p>	&lt;option value=&quot;200&quot;&gt;200&lt;/option&gt;</p>	&lt;option value=&quot;500&quot;&gt;500&lt;/option&gt;</p>	&lt;option value=&quot;1000&quot;&gt;1000&lt;/option&gt;</p>	&lt;option value=&quot;3000&quot;&gt;3000&lt;/option&gt;</p><p>	&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;</p><p>	&lt;tr&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;&nbsp;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;	&lt;input type=&quot;submit&quot; value=&quot;Go!&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</p><p>	&lt;/table&gt;&lt;/form&gt;</p><p>	&lt;?</p><p>	//define the root dir for the general_widget() and execute</p><p>	general_widget ($root_arg);</p><p>	echo &quot;&lt;p align='center'&gt;&lt;b&gt;--- Complete ---&lt;/b&gt;&lt;/p&gt;&quot;;</p><p>	//================================================</p><p>}</p><p>?&gt;</p><p>&lt;!-- end content --&gt;</p></pre></p></small></p></code></p><p>Super Widget - Version: Php 1.0</p>