---
layout: post
permalink: node/689
ratings: 1
avgrate: 3.0000
user: MjR
real_name: "Mike Roberto"
user_since: 1999-09-07
avatar: ""
article_count: 1
excerpt: "Need to create a couple functions to, for example, add, delete, modify,</p>records on a table?  Ever get confused following the possible chain of</p>events through multiple pages when a problem pops up, o"
---
Need to create a couple functions to, for example, add, delete, modify,</p>records on a table?  Ever get confused following the possible chain of</p>events through multiple pages when a problem pops up, or during the inital</p>build? </P><P></p>An easy way to organize it all is to use a common variable which you can</p>pass to a single page, which will determine the action to perform.(I'm</p>using ColdFusion as reference language, this can be done with almost any</p>development language using the appropriate if statements, etc..) </P><P></p>For example.  We'll call the page list.cfm.  It contains two forms(add &</p>modify), and a section with output from a master query which selects</p>everything from the db.   </P><P></p>First you have the check for this master variable, then the query, then</p>the forms.  This order is used for a specific reason.  The query is placed</p>after the check for the variable to provide that the query returns current</p>data.  If an add, modify, or delete function existed and was performed</p>after the query was performed, the output of that query would not include</p>whatever information was added, what changes were made, or would include</p>data which was subsequently deleted.</P> <P></p>That's why the order is important.  As you can see below first a check to</p>see if any actions are to be performed, then the query, and then the forms</p>and the output. Here's the code... </P><P></p>&lt;code&gt; Your page simply checks for the variable...</P></p><P> &lt;cfif #isdefine(url.action)#&gt; </p>&lt;cfelseif #url.action# eq "update"&gt; <br>      ...do updating stuff here...<br></p>&lt;/cfif&gt; </P><P></p> &lt;cfelseif #url.action# eq "add"&gt;<br></p>...do adding stuff here...</p><br>&lt;/cfif&gt; </P><P>                  ...here we get the query data to modify...</P><P></p>&lt;cfelseif #url.action# eq "modify"&gt; &lt;cfquery name="modify"</p>datasource="#DS#"&gt;  <br> select * from table where id = #url.id#<br></p>&lt;/cfquery&gt; <br></p>&lt;/cfif&gt; </P><P></p>  Get the data to output...<br></p>&lt;cfquery name="get"</p>datasource="#DataSource#"&gt;<br></p>select * from table &lt;/cfquery&gt; </P><P></p>  Check if we are modifying, if so show the form..<br> &lt;cfif #isdefined(url.action)#&gt; <br></p>&lt;cfif #url.action# eq "modify"&gt;</P> <P></p>  Show the modify form with the data to change!</P><P> &lt;form action="list.cfm?action=update"&gt;  <br> &lt;input type="text" name="x"</p>value="#modify.x#"&gt;   etc... <br>  &lt;/cfif&gt; &lt;/cfif&gt; </P><P></p>  Always show the add function so you can always   add data...<br> &lt;form</p>action="list.cfm?action=add"&gt;<br> &lt;input type="text" name="x"&gt;</p>etc.... </P><P></p> Output the data...(with a link to fill the modify form)<br> &lt;cfoutput&gt;<br></p>&lt;a</p>href="list.cfm?action=modify&id=#query.id#"&gt;Modify Me!!&lt;/a&gt;</p>#query.OtherData# etc...<br> &lt;/cfoutput&gt; </P><P></p>&lt;/code&gt; </P><P></p>If you noticed in the example, This automagically gives you a list of all</p>the rows in the table, and a link to fill the form to modidy and update</p>them.  You submit the form and the data is updated, and an accurate list</p>is outputted, ready to be modified and updated again! </P><P></p>If you didn't get this on your first look through, just take a piece of</p>paper, and walk through it, writing down variable values, and what would</p>show up for the course of action you would take through the application.</p>For example.  On a first pass through the page, No matter what, the if</p>"action" has no value, none of the IF statements do anything.  All you get</p>is a query, an "add" form, and the master query output. Then pretend you</p>click a link. Now "action" has a value, so you can go through and see what</p>would happen then.  In this case it would perform a query to get that rows</p>data, then fill a form to modify, then get the master query data then</p>output it again.  If you modify the data and submit it, the "action"</p>variable has the update value, so the db is updated with the new info, and</p>the master query gets that info and outputs it.  Now you're ready to go</p>again!  Fun & Easy!!(I hope! =P) </P><P></p>Wit this technique you can have a single page control all the actions</p>associated with a section of an application, or table, etc.. </P><P></p>This can become very helpful when you're dealing with, for example, a</p>content management application.  A single page which can add, delete,</p>modify records from a table will make your life much easier when you or</p>the user actually start managing the content.  And especially if you have</p>to debug it, its all there for you on one page, ready to go! </P></p><p></p>