---
layout: post
permalink: node/689
---
Need to create a couple functions to, for example, add, delete, modify,\nrecords on a table?  Ever get confused following the possible chain of\nevents through multiple pages when a problem pops up, or during the inital\nbuild? </P><P>\nAn easy way to organize it all is to use a common variable which you can\npass to a single page, which will determine the action to perform.(I'm\nusing ColdFusion as reference language, this can be done with almost any\ndevelopment language using the appropriate if statements, etc..) </P><P>\nFor example.  We'll call the page list.cfm.  It contains two forms(add &\nmodify), and a section with output from a master query which selects\neverything from the db.   </P><P>\nFirst you have the check for this master variable, then the query, then\nthe forms.  This order is used for a specific reason.  The query is placed\nafter the check for the variable to provide that the query returns current\ndata.  If an add, modify, or delete function existed and was performed\nafter the query was performed, the output of that query would not include\nwhatever information was added, what changes were made, or would include\ndata which was subsequently deleted.</P> <P>\nThat's why the order is important.  As you can see below first a check to\nsee if any actions are to be performed, then the query, and then the forms\nand the output. Here's the code... </P><P>\n&lt;code&gt; Your page simply checks for the variable...</P>\n<P> &lt;cfif #isdefine(url.action)#&gt; \n&lt;cfelseif #url.action# eq "update"&gt; <br>      ...do updating stuff here...<br>\n&lt;/cfif&gt; </P><P>\n &lt;cfelseif #url.action# eq "add"&gt;<br>\n...do adding stuff here...\n<br>&lt;/cfif&gt; </P><P>                  ...here we get the query data to modify...</P><P>\n&lt;cfelseif #url.action# eq "modify"&gt; &lt;cfquery name="modify"\ndatasource="#DS#"&gt;  <br> select * from table where id = #url.id#<br>\n&lt;/cfquery&gt; <br>\n&lt;/cfif&gt; </P><P>\n  Get the data to output...<br>\n&lt;cfquery name="get"\ndatasource="#DataSource#"&gt;<br>\nselect * from table &lt;/cfquery&gt; </P><P>\n  Check if we are modifying, if so show the form..<br> &lt;cfif #isdefined(url.action)#&gt; <br>\n&lt;cfif #url.action# eq "modify"&gt;</P> <P>\n  Show the modify form with the data to change!</P><P> &lt;form action="list.cfm?action=update"&gt;  <br> &lt;input type="text" name="x"\nvalue="#modify.x#"&gt;   etc... <br>  &lt;/cfif&gt; &lt;/cfif&gt; </P><P>\n  Always show the add function so you can always   add data...<br> &lt;form\naction="list.cfm?action=add"&gt;<br> &lt;input type="text" name="x"&gt;\netc.... </P><P>\n Output the data...(with a link to fill the modify form)<br> &lt;cfoutput&gt;<br>\n&lt;a\nhref="list.cfm?action=modify&id=#query.id#"&gt;Modify Me!!&lt;/a&gt;\n#query.OtherData# etc...<br> &lt;/cfoutput&gt; </P><P>\n&lt;/code&gt; </P><P>\nIf you noticed in the example, This automagically gives you a list of all\nthe rows in the table, and a link to fill the form to modidy and update\nthem.  You submit the form and the data is updated, and an accurate list\nis outputted, ready to be modified and updated again! </P><P>\nIf you didn't get this on your first look through, just take a piece of\npaper, and walk through it, writing down variable values, and what would\nshow up for the course of action you would take through the application.\nFor example.  On a first pass through the page, No matter what, the if\n"action" has no value, none of the IF statements do anything.  All you get\nis a query, an "add" form, and the master query output. Then pretend you\nclick a link. Now "action" has a value, so you can go through and see what\nwould happen then.  In this case it would perform a query to get that rows\ndata, then fill a form to modify, then get the master query data then\noutput it again.  If you modify the data and submit it, the "action"\nvariable has the update value, so the db is updated with the new info, and\nthe master query gets that info and outputs it.  Now you're ready to go\nagain!  Fun & Easy!!(I hope! =P) </P><P>\nWit this technique you can have a single page control all the actions\nassociated with a section of an application, or table, etc.. </P><P>\nThis can become very helpful when you're dealing with, for example, a\ncontent management application.  A single page which can add, delete,\nmodify records from a table will make your life much easier when you or\nthe user actually start managing the content.  And especially if you have\nto debug it, its all there for you on one page, ready to go! </P></p><p>\n