---
layout: post
permalink: node/1324
ratings: 3
avgrate: 3.0000
user: jlachapell
real_name: "Joe LaChapell"
user_since: 2000-03-13
avatar: ""
article_count: 1
excerpt: "Have you ever wondered how to populate a select box given the contents of a previous </p>select box? This article explains in detail how to get it done, so read on!"
---
<h3>Using ColdFusion, JavaScript and WDDX to Create a Dynamic Select Box.</h3></p><p></p>I will discuss the use of ColdFusion, JavaScript and a new (and increasingly useful)</p>technology WDDX (Web Distributed Data Exchange <a href="http://www.wddx.org/" target="_new" title="Web Distributed Data Exchange (opens in new window)">wddx.org</a>) </p>to create the dynamic select box.</p></p></p><p></p>I will use the following example to illustrate my point.  My first select box contains</p>two options: &quot;atlantic&quot; and &quot;central&quot; (these are two divisions within the Eastern </p>Conference of the NBA).  If the user selects &quot;atlantic&quot; he/she will see only the teams </p>that belong to the Atlantic division.  If the user selects "central" he/she will only </p>see the teams that belong to the Central division.</p></p></p><p></p>First of all, we need information in our database. In this example we are using </p>Oracle, but you can use any database you feel comfortable with. In this example</p>I have set up two tables: </p></p></p><code></p><pre></p><p>    Table: atlantic                       Table: central</p>    ID     NUMBER                         ID     NUMBER</p>    NAME   VARCHAR2(20)                   NAME   VARCHAR2(20)</p>    </p>        **(You will need to use this to reference the column names!)</p></pre></p></code></p><p>    </p>Now, we need to include the correct javascript functions. It is really not necessary to </p>understand how this works, but that you understand what is returned from these functions.</p>(The following scripts come with ColdFusion so you can view the functions if you so desire).</p></p></p><p></p><pre>&lt;script type=&quot;text/javascript&quot; language=&quot;javascript&quot; src=&quot;/CFIDE/scripts/wddx.js&quot;&gt;</p>&lt;/script&gt;</pre></p></p></p><p></p>I will use the following example to illustrate my point.  I have one select box that contains atlantic as one option and central as another option (these are two divisions within the Eastern Conference in the NBA).  If the user selects the atlantic choice, only the teams that are in the atlantic division will be choices in the second select box.  Ditto for the central option.  Now, on with the explanation?</p></p></p><p></p>Next, we want to query the database?keep track of the names of the queries.</p><code></p><pre></p> &lt;cfquery name=&quot;atlantic&quot; datasource=&quot;xxxx&quot;&gt;</p>        select *</p>        from atlantic</p> &lt;/cfquery&gt;</p><p> &lt;cfquery name=&quot;central&quot; datasource=&quot;xxxx&quot;&gt;</p>        select * </p>        from central</p> &lt;/cfquery&gt;</p></pre></p></code></p></p></p><p></p>Below is how we serialize from ColdFusion to Javascript.  Make certain that there </p>is not a space between the beginning and ending wddx tags!</p></p></p><p></p>Serialize the atlantic query:</p></p></p><p></p><pre>&lt;cfwddx action=&quot;cfml2js&quot; input=&quot;#atlantic#&quot; toplevelvariable=&quot;jsatlTLV&quot; output=&quot;jsatlantic&quot;&gt;</p>&lt;/cfwddx&gt;</pre></p></p></p><p></p>Serialize the central query:</p></p></p><p><pre>&lt;cfwddx action=&quot;cfml2js&quot; input=&quot;#central#&quot; toplevelvariable=&quot;jscentTLV&quot; output=&quot;jscentral&quot;&gt;</p>&lt;/cfwddx&gt;</pre></p></p><p></p>NOTE: Make certain there are no spaces between the beginning and end wddx tags.</p></p></p><p></p>Now we are going to process the info from the two serializations above.  I put output</p>tags here so that it would print out the results of the serialization so that you could</p>view the source and see what is actually happening.</p></p></p><p></p>In the function populate() you can see what is happening.  It is checking to see what</p>was selected in the first select box (named Eastern).</p></p></p><p></p>You can reference these options by using the selectedIndex property.  If the first option </p>is selected the selectedIndex would = 0 (it is always n-1).</p></p></p><p><pre></p>&lt;script language= &quot;javascript&quot;&gt; &lt;cfoutput&gt;#jsatlantic# #jscentral# &lt;/cfoutput&gt;</p>    function populate()</p>    {</p>        document.DynamicForm.DynamicSelect.length=0;    //need this to set number of options to zero</p>        if (document.DynamicForm.Eastern.selectedIndex == 1)</p>        {</p>           for (var i=  0;i &lt;  &quot;jsatlTLV.id.length&quot; ;i++) &lt;--no quotes here     </p>           {</p>               NewOpt =  new Option;    //same as the HTML option &gt; tag </p>               NewOpt.value = jsatlTLV.id[i];   //same as option value=[id]&gt;</p>               NewOpt.text = jsatlTLV.name[i]; //now we have optionvalue=[id]&gt;[name]</p>               document.DynamicForm.DynamicSelect.options[i] =  NewOpt; //put the new option in the select box</p>            }</p>            document.DynamicForm.DynamicSelect.options[0].selected = true;    //make the first option selected</p>        }</p><p>      if (document.DynamicForm.Eastern.selectedIndex == 2)</p>      {</p>         for (var i=  0;i&lt;  &quot;jscentTLV.id.length&quot;;i++)   &gt;--no quotes here     </p>         {</p>              NewOpt = new Option;        //same as the HTML option; tag</p>              NewOpt.value = jscentTLV.id[i];    //same as option value=[id]</p>              NewOpt.text = jscentTLV.name[i]; //now we have optionvalue=[id]&gt;[name]</p>              document.DynamicForm.DynamicSelect.options[i] =  NewOpt; //put the new option in the select box</p>         }</p>         document.DynamicForm.DynamicSelect.options[0].selected = true; //make the first option selected</p>      }</p>   }</p>&lt;/script&gt;</p></pre>