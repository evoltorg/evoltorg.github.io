---
layout: post
permalink: node/14740
ratings: 3
avgrate: 3.0000
categories: [Code]
user: burhankhalid
real_name: "Burhan Khalid"
user_biog: "I\'m a college student finishing up my Bachelor of Science degree at <a href=\"http://www.swosu.edu\" rel=\"nofollow\">Southwestern Oklahoma State University</a>. I generally try to help out at evolt, answering questions on the list, and occasionally writing an article or two. I am the current president of the computer club, the only computer science tutor, and the webmaster for our site. In addition to traveling around the world (I speak 5 languages), in my free time I like to fly (both sims and real aircraft), read, and play around on the internet.

<p>That was 8 years ago - now I\'m a IT consultant, e-commerce and Linux SME in Kuwait. I currently work for a large engineering consultancy firm where I am responsible for IT strategy for the company and consulting with client on their large-scale IT projects.</p>"
user_since: 08 Aug 2001
avatar: 
article_count: 3
excerpt: "Thought I\'d share a few tips on accessing databases with PHP. I found this through trial and error while getting my site\'s database to work. Hope this is useful to someone."
---
<p></p>One of the best things about PHP is its built in functions for database access. In this post, I will provide some examples on how to access a MySQL database using PHP. My free PHP host allows MySQL databases, so this came in very handy while trying my hand at PHP (I was a seasoned ASP programmer...ah...those good old days). I won't comment general code syntax, but will highlight database specific portions. For PHP help, try one of the many PHP sites on the 'net. The big mamma is of course <a href="http://www.php.net" title="PHP Home Page">http://www.php.net.</a> Before I let you in on the code, let me explain what this code does. It was designed for a gateway for a link library. The table in my database is called links, and I query it for a short description and links to the site. This way, I can create a link repository and categorize the sites. The table has the following fields : siteID, siteDescription, siteTitle, siteLink, siteLogo, all VARCHAR32 types. Now, without further delay on to the code!</p></p></p><p></p><pre></p>/* --- [ PHP Database Connection Code         ]---</p>   --- [ Copyright (C) Mohammad Burhan Khalid ]---</p>   --- [ Data Dictionary ] ---</p>   </p>   $_host = path your your MySQL server</p>   $_user = your user name (duh)</p>   $_pwd = your password (duh)</p>   $_db = the database name you want to connect to</p>   $handle = returns a "handle" to your database.</p>           we will use this to check the status of the</p>           connection</p><p>   $strDestination = the "siteID" for the site that we want to lookup. I passed it as a parameter to the gateway page. </p>           Something like test.php?destination=ms</p><p>*/</p>   </p><p>$_host="database.mysite.com";</p>$_user="admin";</p>$_pwd="";</p>$_db="siteDB";</p>$handle = mysql_connect($_host,$_user,$_pwd);</p><p>if ($handle) { $errorCode=""; }</p>else { $errorCode="Can't Open Database ".$_db." ]";}</p><p>mysql_select_db($_db);</p>$strDestination=$HTTP_GET_VARS["destination"];</p>$strQuery = "SELECT * FROM links where siteID LIKE '".$strDestination."'";</p>$intQID = mysql_db_query($_db, $strQuery);</p>$QueryResult = mysql_fetch_assoc($intQID);</p>   $siteTitle = $QueryResult["siteTitle"];</p>   $siteDescription = $QueryResult["siteDescription"];</p>   $siteLogo = $QueryResult["siteLogo"];</p>   $siteLink = $QueryResult["siteLink"];</p>mysql_close($handle);</p></pre></p></p></p><p></p>Now on to the explanation!<br></p><code>mysql_select_db($_db);</code><br></p>This line selects the database that you want to work with in MySQL. Takes a parameter of type string (but since all parameters in PHP are variant till runtime, all you need is a set of quotes around your variable. Ours was $_db).</p></p></p><p></p><code>$intQID = mysql_db_query($_db, $strQuery);</code><br></p>This little snippet does all the magic. It excutes the query and returns a handle (type int) to your query.</p></p></p><p></p><code>$QueryResult = mysql_fetch_assoc($intQID);</code><br></p>I used this function to return the results of the query as an associative array. Used the "handle" returned by the <code> mysql_fetch_assoc()</code> function.</p></p></p><p></p><code>$siteTitle = $QueryResult["siteTitle"];</code><br></p>This is a way to get the results from the table name. You can use numeric identifiers also, ie <code>$QueryResult[0];</code>. Nothing too fancy here, just getting elements from an array.</p></p></p><p></p><code>mysql_close($handle);</code><br></p>After we are done, its always nice to close our connection. We use the same "handle" that was returned when we opened the connection.</p></p></p><p></p>This is a <em>very</em> simplified way to connect to a MySQL database. Leave me your comments, and I might write a more advanced (say, looping through the fields, search for records, paginate, etc.) tutorials.</p></p></p><p></p>Leave me feedback, or email me with your comments.</p></p>