---
layout: post
permalink: node/60163
ratings: 11
avgrate: 3.1818
category: Site Development
user: codepo8
real_name: "Chris Heilmann"
user_since: 29 Jul 2002
avatar: "/images/pictures/picture-35456.jpg"
article_count: 17
excerpt: "An example of how to redesign interdependent select boxes to make them accessible without losing too much usability benefit or interactivity."
---
<p></p>In the constant struggle to make web sites accessible to everyone, we sometimes</p>have to reconsider some of the techniques we use in web development.</p></p></p><p><p></p>One of the main obstacles is to &#34;de-script&#34; forms. For years we </p>have been spicing up forms with Javascript, and, if we didn't consider the </p>consequences, didn't know better, or weren't allowed to elaborate due to tight </p>deadlines, we made forms dependent on Javascript.</p></p></p><p><h2>The classic interdependent select box</h2></p><p><p></p>The classic example is interdependent select boxes. These are two or more select </p>boxes, that allow the user to choose an option of one, and the content of the </p>second gets automatically updated depending on the choice. A very neat way to filter </p>search options or available options. Airlines use them a lot, as most flights</p>from one airport go to a defined number of other airports.</p></p></p><p><p></p>The technique behind is to manipulate the options array of the </p>select boxes, something that can only be done &#34;on the fly&#34; with </p>Javascript.</p></p></p><p><h2>Script, begone!</h2></p><p><p></p>To offer a similar functionality, but make it independent of scripting, we </p>have several options. One would be to shift all the logic to the backend, and</p>reload the page every time you select an option of the first box. This'll be </p>the safest way to do it, but it means another step for the user.</p></p></p><p><p></p>A nice way to work around is to rethink the concept of the interdependent </p>select box, and make it work with normal form functionality:</p></p></p><p><p></p>Instead of using two select boxes and changing their options via Javascript</p>we replace the first one with a row of radio buttons. Each radio button has a</p>select box connected to it.</p></p></p><p><p></p>This is not really a 100% replacement, as the benefit of a select box &#8212; the </p>same screen space for loads of options &#8212; is not given anymore, but it's a feasable </p>option.</p></p></p><p><p></p>Via Javascript, we hide all the select boxes and only show the one </p>connected to the radio button, once the radio button is selected.</p></p></p><p><p></p>Users without Javascript, or with an older browser that is not able to understand the </p><acronym title="Document Objects Model">DOM</acronym>, will see all the select </p>boxes.</p></p></p><p><h2><acronym title="Hypertext Markup Language">HTML</acronym></h2></p><p><pre></p>&#60;form id=&#34;mainform&#34;&#62;</p>&#60;p&#62;&#60;input type=&#34;radio&#34; onfocus=&#34;hide(0)&#34; name=&#34;choice&#34; value=&#34;one&#34; id=&#34;choice1&#34; /&#62;</p>&#60;label for=&#34;choice1&#34;&#62;Choice1&#60;/label&#62;</p>&#60;span&#62;</p>&#60;label for=&#34;select1&#34;&#62;Options 1&#60;/label&#62;&#160;</p>&#60;select name=&#34;select1&#34; id=&#34;select1&#34;&#62;</p>	&#60;option value=&#34;s1_1&#34;&#62;s1_1&#60;/option&#62;</p>	[...]</p>&#60;/select&#62;</p>&#60;/span&#62;&#60;/p&#62;</p>&#60;p&#62;&#60;input type=&#34;radio&#34; onfocus=&#34;hide(1)&#34; name=&#34;choice&#34; value=&#34;two&#34; id=&#34;choice2&#34; /&#62;</p>&#60;label for=&#34;choice2&#34;&#62;Choice2&#60;/label&#62;</p>&#60;span&#62;</p>&#160;&#60;label for=&#34;select2&#34;&#62;Options 2&#60;/label&#62;&#160;</p>&#60;select name=&#34;select2&#34; id=&#34;select2&#34;&#62;</p>	&#60;option value=&#34;s2_1&#34;&#62;s2_1&#60;/option&#62;</p>	[...]</p>&#60;/select&#62;</p>&#60;/span&#62;&#60;/p&#62;</p>&#60;input type=&#34;submit&#34; value=&#34;Send&#34; /&#62;</p>&#60;/form&#62;</p></pre></p><p><p></p>As the Javascript uses DOM to find the <code>SPAN</code> to hide and the <code>P</code> to highlight,</p>all we need to do to add another select is to add it after the last one:</p></p></p><p><pre></p>&#60;p&#62;&#60;input type=&#34;radio&#34; onfocus=&#34;hide(2)&#34; name=&#34;choice&#34; value=&#34;three&#34; id=&#34;choice3&#34; /&#62;</p>&#60;label for=&#34;choice3&#34;&#62;Choice3&#60;/label&#62;</p>&#60;span&#62;</p>&#160;&#60;label for=&#34;select3&#34;&#62;Options 3&#60;/label&#62;&#160;</p>&#60;select name=&#34;select3&#34; id=&#34;select3&#34;&#62;</p>	&#60;option value=&#34;s3_1&#34;&#62;s3_1&#60;/option&#62;</p>	[...]</p>&#60;/select&#62;</p>&#60;/span&#62;&#60;/p&#62;</p></pre></p><p><p></p>Notice we need to increment the counter for <strong><code>hide()</code></strong>.</p></p></p><p><p></p>To hide all select boxes, we call the <code>hide()</code> function with an <code>id</code></p>of <code>&#34;none&#34;</code>.</p></p></p><p><code></p>&#60;body onload=&#34;hide('none')&#34;&#62;</p></code></p><p><h2>Javascript</h2></p><p><pre></p>function hide(id){</p>	if (document.getElementById && document.createTextNode){</p>		spans=document.getElementById('mainform').getElementsByTagName('span');</p>		m=document.getElementById('mainform');</p>		for (i=0;i&#60;spans.length;i++){</p>			m.getElementsByTagName('span')[i].style.display='none';</p>			m.getElementsByTagName('p')[i].style.background='#eee';</p>			m.getElementsByTagName('p')[i].style.borderColor='#ccc';</p>		}</p>		if(id!='none'){			</p>			m.getElementsByTagName('span')[id].style.display='inline';</p>			m.getElementsByTagName('p')[id].style.background='#ffc';</p>			m.getElementsByTagName('p')[id].style.borderColor='#000';</p>		}</p>	}</p>}</p></pre></p><p><p></p>The background and border colour change is just there to add some eye candy.</p></p></p><p><p></p>If there is more than one instance on the page, we need to turn 'mainform'</p>into a second variable added to <code>hide()</code>.</p></p></p><p><h2>Any other way?</h2></p><p><p></p>Another solution would be to turn all the option of the first select into </p>headlines with radio buttons for the dependent select boxes and hide and </p>show the radio groups with DOM. How to show and hide them was explained in the</p><a href="http://www.evolt.org/article/Collapsible_page_elements_with_DOM/17/45831/index.html">Collapsible page elements with DOM</a> article.</p></p><p>To see the code here in action, go to the <a href="http://www.onlinetools.org/articles/accessibleinter/">Demo page</a>.</p></p>