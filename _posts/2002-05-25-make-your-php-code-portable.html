---
layout: post
permalink: node/28117
ratings: 7
avgrate: 4.4286
category: Code
user: Martin Tsachev
real_name: "Martin Tsachev"
user_biog: "<p>Martin Tsachev started using computers
in 1992, programming Basic and has since
then developed a great passion for them.
</p>

<p>Nowadays he runs
<a href=\"http://www.mtdev.com\" rel=\"nofollow\" target=\"_blank\"
title=\"mtdev covers PHP, Python, JavaScript, and Linux shell scripts\">
mtdev</a> - a web site with highlight on PHP.
</p>"
user_since: 27 Jun 2001
avatar: /images/pictures/picture-12535.jpg
article_count: 6
excerpt: "There\'s a lot of PHP code available for free on the net but also not all of it</p>can run on your system as it is. This article shows you how  to distribute a setup required by your program to run."
---
<p>There's a lot of PHP code available for free on the net but also not all of it</p>can run on your system as it is. This article shows you how  to distribute a setup required by your program to run.</p></p></p><p><h2>Why should I care</h2></p><p><p>People are different and they use different PHP configurations so if you want </p>to run a script on your system you have two choices:</p></p></p><p><ul></p>	<li>set your global configuration to something that allows the code to run</li></p>	<li>set a configuration specific to the program</li></p></ul></p><p><p>If you go for the first one you're in trouble if you try to run two programs which</p>require completely different setups. So the only choice seems to be the second one.</p></p></p><p><h2>Well then how do I do this</h2></p><p><p>There are four different ways to set a PHP configuration option:</p></p></p><p><ul></p>	<li>through php.ini</li></p>	<li>through httpd.conf</li></p>	<li>through a .htaccess file</li></p>	<li>or directly in PHP code</li></p></ul></p><p><p>The first and second ones are only available to the system administrator of a website </p>so you generally have to avoid them. Yes you may have access to those files but think </p>about the other people that may be using the code - do they have access to those files?</p>Usually not.</p></p></p><p><p>The third method &#8212; via a <code>.htaccess</code> file is available only on Apache (and maybe on the NCSA httpd, I'm not sure about that) but since Apache is the most</p>popular webserver that is usually not a problem. The other thing that you should know </p>about <code>.htaccess</code> files is that they <em>may</em> be disabled by the </p>webmaster. If this is the case your only chance is to use a globally included PHP file </p>which configures the system.</p></p></p><p><p>Setting the options with PHP code is the <em>most</em> portable way to configure</p>a system. The only problem is the accessible options are less than available to a </p><code>.htaccess</code> file.</p></p></p><p><h3>I'll go for a <code>.htaccess</code> file</h3></p><p><p>The syntax for setting an option is:</p></p></p><p><pre></p>php_value name value</p>php_flag name on or off</p></pre></p><p><p>Example:</p></p><p><pre></p>php_flag register_globals off</p>php_value arg_separator.output &amp;amp;</p></pre></p><p><p>The example turns off <code>register_globals</code> and sets the value of</p><code>arg_separator.output</code> to &amp;amp; which is preferred rather than the default</p>&amp;.</p></p></p><p><p><strong>Note</strong>: you can also set boolean options with the <code>php_value</code></p>directive, the string will be converted to boolean before assignment.</p></p></p><p><h3>I'll go for PHP code</h3></p><p><p>There's only one function for setting an option and it is <code>ini_set()</code> </p>it is also aliased as <code>ini_alter()</code>.</p>There is also a function that restores the original value and it is <code>ini_restore()</code>.</p></p></p><p><p>How to use these:</p></p><p><pre></p>ini_set('display_errors', false);</p>ini_set('arg_separator.input', ';');</p>...</p>ini_restore('display_errors');</p></pre></p><p><p><strong>Note</strong>: in the first call to <code>ini_set()</code> you can also use</p>any type of variable it will be converted to boolean before setting the option.</p></p></p><p><h2>Very nice but I don't know my configuration</h2></p><p><p>I've got something for you too. This is a script that will detect common settings </p>that may prevent your code from executing properly on a different system.</p></p></p><p></p><pre></p>&lt;?php</p><p>	define('boolean', 1);</p>	define('string', 2);</p>	define('integer', 3);</p><p>	$php_ini_all = Array(</p>		Array(string, 'arg_separator.input'),</p>		Array(string, 'arg_separator.output'),</p>		Array(boolean, 'display_errors'),</p>		Array(boolean, 'display_startup_errors'),</p>		Array(boolean, 'magic_quotes_runtime'),</p>		Array(integer, 'error_reporting'),</p>		Array(string, 'variables_order'),</p>		Array(string, 'gpc_order')</p>	);</p>		</p>	$php_ini_perdir = Array(</p>		Array(boolean, 'asp_tags'),</p>		Array(boolean, 'magic_quotes_gpc'),</p>		Array(string, 'output_buffering'),</p>		Array(boolean, 'register_globals'),</p>		Array(boolean, 'short_open_tag')</p>	);</p>?&gt;</p><p>&lt;?php</p>	function display_php_conf() {</p>		foreach ( $GLOBALS['php_ini_all'] as $option ) {</p>			$value = ini_get($option[1]);</p>			echo "ini_set('$option[1]', '$value');</p>";</p>		}</p>	}</p><p>	function display_htaccess_conf() {</p>		global $php_ini_all, $php_ini_perdir;</p><p>		foreach ( array_merge($php_ini_all, $php_ini_perdir) as $option ) {</p>			$value = ini_get($option[1]);</p>			</p>			if ( $option[0] == boolean ) {</p>				$value = $value ? 'on' : 'off';</p>				$directive = 'php_flag';</p>			} else {</p>				$directive = 'php_value';</p>			}</p><p>			echo "$directive $option[1] $value</p>";</p>		}</p>	}</p>?&gt;</p></pre></p><p><p>First we define these common options in two arrays for the different access levels, </p>the first one for options available to both PHP code and <code>.htaccess</code> files, </p>and the second only for <code>.htaccess</code> files. You <em>may</em> need to modify</p>that in case you use non-default settings for other options too.</p></p></p><p><p>The two function <code>display_php_conf()</code> and </p><code>display_htaccess_conf()</code> print the PHP code </p>and <code>.htaccess</code> directives for your config respectively.</p></p></p><p><h2>Show me the config</h2></p><p><pre></p>&lt;?php</p><p>	header('Content-type: text/plain');</p><p>	echo "PHP settings:</p>";</p>	display_php_conf();</p><p>	echo "</p>.htaccess settings:</p>";</p>	display_htaccess_conf();</p>?&gt;</p></pre></p><p><p>This will just call the functions defined above so you can easily copy &amp; paste </p>it to a file or pipe it if you are using the CGI version of PHP.</p></p></p><p><h2>Example output from the script</h2></p><p><pre></p>PHP settings:</p>ini_set('arg_separator.input', ';&amp;');</p>ini_set('arg_separator.output', ';');</p>ini_set('display_errors', '1');</p>ini_set('display_startup_errors', '1');</p>ini_set('magic_quotes_runtime', '');</p>ini_set('error_reporting', '2047');</p>ini_set('variables_order', 'GPCS');</p>ini_set('gpc_order', 'GPC');</p><p>.htaccess settings:</p>php_value arg_separator.input ;&amp;</p>php_value arg_separator.output ;</p>php_flag display_errors on</p>php_flag display_startup_errors on</p>php_flag magic_quotes_runtime off</p>php_value error_reporting 2047</p>php_value variables_order GPCS</p>php_value gpc_order GPC</p>php_flag asp_tags off</p>php_flag magic_quotes_gpc off</p>php_value output_buffering 4096</p>php_flag register_globals off</p>php_flag short_open_tag off</p></pre></p><p><h2>Some general considerations</h2></p><p><p>The above code didn't mention <code>track_vars</code> even a single time </p>because as of PHP 4.0.3 it is always on. The example output was run on PHP 4.2.1</p>and <code>ini_get()</code> returns FALSE for <code>track_vars</code> as if it does</p>not even exist. If you have an earlier version of PHP it is recommended to set it to true</p>and disable <code>register_globals</code> for security and performance issues.</p></p></p><p><p>If you want to find even more information you can always count on the</p><a href="http://www.php.net/manual/" target="_blank" title="Opens in new window">PHP manual</a>.</p></p>