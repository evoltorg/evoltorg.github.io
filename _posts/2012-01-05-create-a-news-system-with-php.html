---
layout: post
permalink: node/63568
ratings: 0
avgrate: 
user: ATF
real_name: "Alvaro"
user_since: 2012-01-04
avatar: ""
article_count: 1
excerpt: "If you ever need a news system for your website, where you can add news items through an admin panel, this is how you do it.<br />"
---
If you ever need a news system for your website, where you can add news items through an admin panel, this is how you do it.<br /></p>You will just need 3 files for this: <br /></p>index.php (main page)<br /></p>create_news.php (admin panel where you add the news)<br /></p>news.php (where you see the news items)<br /></p><br /><br /></p><p></p>index.php:</p><br /></p><code></p><div style="height:312px;overflow-x:auto;"> //creates an overflow to keep the page short</p><?php</p>//conect to database</p>session_start();</p>$server        = 'localhost';</p>$username    = 'news';</p>// $password    = '';</p>$database    = 'news';</p><p>if(!mysql_connect($server, $username))</p>{</p>     exit('Error: Could not connect to the database');</p>}</p>if(!mysql_select_db($database))</p>{</p>     exit('Error: Could not select the database');</p>}</p>//get rows from database</p>$result = mysql_query("SELECT * FROM news ORDER BY newsId DESC");</p>    echo '<table width="500px"height="100px" border="1" cellspacing="1" cellpadding="1">'; //creates table</p>    while($row = mysql_fetch_array($result)) //organise the rows from database query</p>    //creates a row for each news item   </p>        {                      </p>            echo "<tr>";</p>            echo "<td><img src=" . $row['newsImg'] . "></td>";</p>            echo "<td><b><a href='../news.php?id=" . $row['newsId'] . "'>" . $row['newsTitle'] . "</a></b>&nbsp;<i>" . $row['newsDate'] . "</i><br><hr><p>" . $row['newsMain'] . "</p></td>";</p>            echo "</tr>";</p>        }</p>?></p></table></p></code></p><br /></p>This will display all the news items in a small div, where you will be able to scroll down to older items.<br /></p>Lines explained:<br /></p>3-15: Creates connection to database<br /></p>17: Gets the news items from the database<br /></p>19: Creates array $row[]<br /></p>22-25: Displays the news items individually.<br /></p><br /><br /></p><p></p>create_news.php</p><br /></p><code></p><?php</p>session_start();</p>$server        = 'localhost';</p>$username    = 'news';</p>// no password                    $password    = ' ';</p>$database    = 'news';</p><p>if(!mysql_connect($server, $username))</p>{</p>     exit('Error: Could not connect to the database');</p>}</p>if(!mysql_select_db($database))</p>{</p>     exit('Error: Could not select the database');</p>}</p>else</p>{</p>if($_SERVER['REQUEST_METHOD'] != 'POST')</p>{</p>?></p><table width="500" border="1" cellspacing="3" cellpadding="1"></p><form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"></p><tr></p>    <td>News Title:</td></p>    <td><input type="text" name="newsTitle"></td></p></tr></p><tr></p>    <td>News Image:</td></p>    <td><input type='text' name='newsImg'></td></p></tr></p><input type='hidden' name='newsDate' value='<?php echo date("d/m/Y")?>'></p><tr></p>    <td>Description Post:</td></p>    <td><textarea name="newsMain" rows="5" cols="40"></textarea></td></p></tr></p><tr></p>    <td>Main Post:</td></p>    <td><textarea name="newsLong" rows="8" cols="40"></textarea></td></p></tr></p><tr></p>    <td><input type="reset" value="Reset"></td></p>    <td><input type="submit"  value="Add News"></td></p></tr></p></form></p></table></p><?php</p>}</p>else</p>{</p>mysql_query("INSERT INTO news (newsTitle, newsMain, newsImg, newsDate, newsLong) VALUES ('$_POST[newsTitle]','$_POST[newsMain]','$_POST[newsImg]','$_POST[newsDate]','$_POST[newsLong]')");</p>header("Location: index.php");</p>}</p>}</p>?></p></code></p>This code is just a normal form, to add the news to the database. Nothing to explain realy. You can add as many fields as you want.<br /></p><br /><br /></p><p></p>news.php</p><p><br /></p><code></p><?php</p>if(isset($_GET['id'])){</p>$new_id = $_GET['id'];</p>}</p>else</p>{</p>header("Location: index.php");</p>}</p>session_start();</p>$server        = 'localhost';</p>$username    = 'news';</p>// $password    = '';</p>$database    = 'news';</p><p>if(!mysql_connect($server, $username))</p>{</p>     exit('Error: Could not connect to the database');</p>}</p>if(!mysql_select_db($database))</p>{</p>     exit('Error: Could not select the database');</p>}</p>$sql = "SELECT * FROM news WHERE newsId=" . $new_id;</p>$result = mysql_query($sql);</p>if(!$result)</p>{</p>    echo "There was an error, please try again!";</p>}</p>else</p>{</p>    if(mysql_num_rows($result) == 0)</p>    {</p>        echo "This news article does not exist.";</p>    }</p>    else</p>    {</p>        while($row = mysql_fetch_array($result))</p>        {</p>            echo "<h1>" . $row['newsTitle'] . "</h1><br>";</p>            echo "<h3>On " . $row['newsDate'] . "</h3>";</p>            echo "<table border=\"1\" cellspacing=\"1\" cellpadding=\"1\"><br><tr><td><img src=" . $row['newsImg'] . "></td></tr></table><br>";</p>            echo $row['newsLong'];</p>        }</p>    }</p>}</p>?></p></code></p>This page will display a news article selected from index.php<br /></p>To explain the code:<br /></p>1-7: Checks if user comes from index.php and has selected a news article.<br /></p>8-21: Connects to database.<br /></p>22-27: Gets the news item with the ID set.<br /></p>29-33: Checks if news article exists.<br /></p>36-41: Displays the news article.<br /></p><br /></p><br /></p><br /></p>That's it! You now have a simple news system.<br /></p>Thank you for reading, and don't be harsh commenting, its my first tutorial :)