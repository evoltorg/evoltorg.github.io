---
layout: post
permalink: node/768
ratings: 0
avgrate: 
rating: 3.89
categories: [Code]
user: AnthonyB
real_name: "Anthony Baratta"
user_biog: "Mutated into a life-size Dilbert doll, Anthony spends the days wedged into his replica of Cardinal Fang\'s Comfy Chair coding solutions to the most thorny of internet software problems."
user_since: 10 Jul 1999
avatar: /images/pictures/picture-140.jpg
article_count: 12
excerpt: "Here is a very simple cgi script to send the form </p>output to the target mail boxes:</p>One - cut and paste the code below into \"notepad\"</p>Two - edit the following lines:</p><p>&nbsp; /full/path/to/cgi-bin"
---
Here is a very simple cgi script to send the form </p>output to the target mail boxes:</p><P><b>One</b> - cut and paste the code below into "notepad"</p><P><b>Two</b> - edit the following lines:</p><P></p>&nbsp; <code>/full/path/to/cgi-bin/</code></p><p>Change to the "full path" to your cgi dir.</p><P></p>&nbsp; <code>$varSendFormDataTo = "user1\@Foo.com";</code></p><p></p>Change Foo.com to your domain and user1 to the target user.  </p>Make sure you have <CODE>\@</CODE> and not a 'bare' <CODE>@</CODE>.</p><p></p>&nbsp; <code>$varSentFrom = "WebServer\@Foo.com";</code></p><P></p>If you want to send to more than one user, add a comma and </p>the new name@foo.com.</p><P></p>&nbsp; <code>$varSubject = "Web Form Comments";</code></p><P></p>Change the Subject variable to what you want displayed on the email.</p><P></p>&nbsp; <code>$varJumpToWebPage = "http://www.foo.com/index.html";</code></p><P></p>This is the page you are redirected to - can be </p>any valid page anywhere on the internet.</p><P></p>Verify that sendmail is in your</p><code>/usr/sbin/</code></p>directory. The quickest way is to type</p>'whereis sendmail'</p><P></p><b>Three</b> - Save your file in your cgi directory. </p><p></p>&nbsp; <code>chmod 755 &lt;file name&gt;.</code></p><P></p><b>Four</b> - Get cgi-lib.pl from </p><A HREF="http://cgi-lib.stanford.edu/cgi-lib/"></p>http://cgi-lib.stanford.edu/cgi-lib/</A></p><p></p>Save in your cgi-bin directory.</p><P><b>Five</b> - Number your form elements. e.g. add </p>a #- to the front of each name (FullName </p>becomes 1-FullName, Email become 2-Email).</p>The program expect numbers and splits on </p>the first '-'. This  allows  you to number </p>the form elements in the order you want them </p>to appear  in the email.</p><P><b>Six</b> - Don't forget to set your action </p>to &quot;/cgi-bin/qd-form.cgi&quot; and remove any </p>form encoding types you have set.</p><P> Good Luck.</p><P></p><CODE></p><pre></p>#!/usr/bin/perl</p>#</p># Quick & Dirty Form Processing....</p>BEGIN {unshift @INC, '/full/path/to/cgi-bin/' };</p> require &quot;cgi-lib.pl&quot;;</p><p>##</p>## User Set Variables</p>$varSendFormDataTo = &quot;user1\@Foo.com&quot;;</p>$varSentFrom = &quot;WebServer\@Foo.com&quot;;</p>$varSubject = &quot;Web Form Comments&quot;;</p>$varJumpToWebPage = &quot;http://www.foo.com&quot;;</p><p>##</p>## System Set Variables</p>$varSendMail = &quot;/usr/sbin/sendmail -t -n&quot;;</p>$today = `date`;</p>$returnvalue=&ReadParse(\%input);</p><p>open (MAIL,  &quot;&#124; $varSendMail&quot;) &#124;&#124; die &quot;cannot open mail program&quot;;</p>    print MAIL &quot;To: $varSendFormDataTo </p>&quot;;</p>    print MAIL &quot;From: $varSentFrom </p>&quot;;</p>    print MAIL &quot;Subject: $varSubject</p><p>&quot;;</p>    print MAIL &quot;$today</p><p>&quot;;</p><p>    foreach $var(sort keys %input) {</p>        if (lc($var) eq &quot;submit&quot;) {next;}</p>        $varTrimmed = splut(/-/,$var,2);</p>        print MAIL &quot;$varTrimmed -- $input{$var}</p>&quot;;</p>    }</p><p>print MAIL &quot; </p><p>&quot;;</p>close(MAIL) &#124;&#124; die &quot;mail pipe exited $?&quot;;</p><p>print &quot;Location: $varJumpToWebPage</p><p>&quot;;</p>             </p>exit;</p><p></pre></p></CODE>