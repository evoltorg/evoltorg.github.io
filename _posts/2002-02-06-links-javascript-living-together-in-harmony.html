---
layout: post
permalink: Links_and_JavaScript_Living_Together_in_Harmony
ratings: 47
avgrate: 4.5532
user: Jeff Howden
real_name: "Jeff Howden"
user_since: 1998-12-14
avatar: "/images/pictures/picture-15.jpg"
article_count: 21
excerpt: "It seems there's not a week that goes by that someone isn't asking about how to properly execute some JavaScript from a link.  Unfortunately, they're not usually driven to bring their problem to others for help because they're trying to make their site as usable and accessible as possible."
---
<p>It seems there's not a week that goes by that someone isn't asking about how to properly execute some JavaScript from a link.  Unfortunately, they're not usually driven to bring their problem to others for help because they're trying to make their site as usable and accessible as possible.</p></p><p><h2>So what's the problem?</h2></p><p><p>The most likely problem that brings them away from their troubleshooting session, and to one of the many discussion lists I subscribe to, is the document &quot;jumping&quot; back to the top when a link is clicked.  Other times, it's the JavaScript not behaving properly or outright throwing an error.</p></p><p><h2>So what's the solution?</h2></p><p><p>Nearly always there are responses that tell the poster to add <code>return false</code> to the <code>onclick</code> event handler immediately after executing the JavaScript statement(s) or to put the JavaScript statement(s) in the <code>href</code> attribute prepended with the <code>JavaScript:</code> pseudo-protocol rather than use the <code>onclick</code> event handler at all.  It's too bad that none of these solutions really addresses the larger problem &#8212; how to make the link degrade well for non-JavaScript users.</p></p><p><h2>If we're trying to accommodate non-JavaScript users, why use JavaScript at all?</h2></p><p><p>There are many reasons to execute JavaScript from a link.  The most common uses involve navigating to other pages, opening a link in a popup window, or worse, submitting a form.  All of these reasons can be addressed while not leaving out non-JavaScript users.  Some of the less common reasons usually involve more complicated JavaScript-driven functionality.  However, while the functionality can't likely be reproduced for non-JavaScript users, especially in the case of DHTML, the link that's used to trigger this functionality can be used to either execute server-side functionality to mimic or duplicate it or inform non-JavaScript users what they would be getting if they were using a browser with JavaScript support.</p></p><p><h2>So what's <em>really</em> the solution?</h2></p><p><p>The solution is to think about the functionality the JavaScript will provide and how to accomplish the same task without it.  Get it working without first, then add JavaScript to enhance it for JavaScript enabled browsers.  Let's take a look at some of the common reasons.</p></p><p><h3>What's the most common reason and its solution?</h3></p><p><h4>Opening a link in a popup window</h4></p><p><p>Generally developers will open links in a popup one of two ways:</p></p><p><h5>Executing JavaScript from the <code>onclick</code> event handler and setting the <code>href</code> attribute value to &quot;#&quot;.</h5></p><pre>&lt;a</p> href=&quot;#&quot;</p> onclick=&quot;window.open('somedoc.html', 'newWindow')&quot;</p>&gt;click here&lt;/a&gt;</p></pre></p><p><h5>Executing JavaScript from the <code>href</code> attribute by way of the <code>JavaScript:</code> pseudo-protocol.</h5></p><pre>&lt;a</p> href=&quot;JavaScript:window.open('somedoc.html', 'newWindow')&quot;</p>&gt;click here&lt;/a&gt;</p></pre></p><p><dl></p>  <dt>Note</dt></p>  <dd>This second example is particularly bad because it causes the link to break for users that prefer to shift+click the link to open it in a new window, unless they're paying close attention to the address in the status bar and notice it's executing a JavaScript statement.</dd></p></dl></p><p><p>Before charging off thinking either of these ways is the solution, give the code above a try in your browser with JavaScript disabled.  You'll notice the first example will cause your browser to jump back to the top of the document if you had to scroll at all to see the link and the second example does absolutely nothing.  So, let's talk about how we're going to make this work for non-JavaScript users as well.</p></p><p><h5>Just how do you open a new window for non-JavaScript users?</h5></p><p><p>The beginnings of accessible popup windows is in the use of the <code>target</code> attribute of the <code>&lt;a&gt;</code> tag.  We finish it off for non-JavaScript users by placing the link where it belongs &#8212; in the <code>href</code> attribute.</p></p><p><pre>&lt;a</p> href=&quot;somedoc.html&quot;</p> target=&quot;newWindow&quot;</p>&gt;click here&lt;/a&gt;</p></pre></p><p><h5>But what about the fancy popup for JavaScript enabled users?</h5></p><p><p>To have the browser open a popup window, based on our own settings, we place the necessary JavaScript into the onclick event handler.  In addition to this bit of JavaScript, we make sure to add a <code>return false</code> statement as the last bit to keep the browser from executing the default behavior of a link with a target -- opening a normal browser window.  We eliminate the need to code the link to the document and the new window name twice by using the <code>this</code> keyword which makes a reference to the containing object, in this case the <code>&lt;a&gt;</code> tag.  Using the <code>this</code> keyword and <code>object.property</code> notation, we can access the <code>href</code> attribute value and the <code>target</code> attribute value.</p></p><p><pre>&lt;a</p> href=&quot;somedoc.html&quot;</p> target=&quot;newWindow&quot;</p> onclick="window.open(this.href, this.target); return false"</p>&gt;click here&lt;/a&gt;</p></pre></p><p><h6>Congratulations! You've made your first completely accessible popup window.</h6></p><p><h3>So what are some solutions to other common reasons for executing JavaScript in a link?</h3></p><p><p>If you're trying to submit a form from a link, stop, go directly to jail, do not collect $200.00.  Besides the numerous expected behaviors of forms that you're breaking (we're talking about usability here) by not using a submit button of some variety, you're needlessly neutering the form for non-JavaScript enabled users.  In the years I've been playing this web game, I've yet to run across a valid reason for breaking a form in this fashion.</p></p><p><p>If the reason you're looking to use a link is so you have a graphical submit button, stop, go read the html spec, do not collect $200.00 &#8212; hello, this functionality is already built-in via the <code>&lt;input&gt;</code> tag with a value of <code>image</code> for the <code>type</code> attribute.  If you're stuck implementing someone else's design and they insist upon rollovers on the submit buttons, there are <a href="http://members.evolt.org/jeff/code/dhtml_form_rollover/index.cfm" target="_blank" title="Rollover submit images (link opens in a new window)">better alternatives</a> that don't break the form for non-JavaScript users.</p></p><p><h3>What's an example of one of the less common reasons and a possible solution?</h3></p><p><p>Suppose you have an <a href="http://www.mtbachelor.com/calendar/" target="_blank" title="Mt. Bachelor's Events Calendar &#8212; an application I built (link opens in a new window)">application that lists a number of events</a>.  These events can be in any number of categories.  Using DHTML, you want to give users with capable browsers the ability to see what events belong to which categories, on the fly, without reloading the page.  What do you do about non-JavaScript browsers so they get the same end result, albeit with a reload of the page?</p></p><p><p>We start by building the application without the DHTML.  We pass the information about the category the user clicked on to the application so it knows what dates on the calendar and what events in the listings below to &quot;highlight&quot; &#8212; this is the simpler part.</p></p><p><p>We then write a JavaScript function to change the background and foreground colors of the dates in the calendar and the individual events in the listings and change the color of the link the user clicked on to indicate which one is &quot;selected&quot;.  We call this function from the category links using the <code>onclick</code> event handler.  Since this example uses JavaScript that not all Javascript-capable browsers understand, we make sure the function call is prefaced by the <code>return</code> statement.  We also make sure the function returns a boolean value of <code>true</code> if the browser does not support the method(s) we're using so it will follow the link just like non-JavaScript capable browsers or otherwise a boolean value of <code>false</code> so the DHTML can be executed without the browser following the link.</p></p><p><h4>The function</h4></p><p><pre>function selectEvents(category_id)</p>{</p>  if(!document.getElementById) return true;</p>  // DHTML bits go here</p>  return false;</p>}</p></pre></p><p><h4>Calling the function</h4></p><p><pre>&lt;a</p> href=&quot;/calendar/february/2002/6/1&quot;</p> onclick=&quot;return selectEvents(1)&quot;</p>&gt;Snowboarding&lt;/a&gt;</p></pre></p><p><h3>So what do I do if it's not possible to replicate the functionality server-side?</h3></p><p><p>If for some reason you can't replicate the functionality with some server-side shenanigans, then simply use the <code>href</code> attribute to link to a document that will explain what could be gained by using a JavaScript enabled browser.  To execute the JavaScript, use the <code>onclick</code> event handler, remembering to add the <code>return false</code> statement at the very end to prevent JavaScript enabled browsers from following the link.  You might also consider using the <code>onmouseover</code> and <code>onmouseout</code> event handlers to write to the status bar to mask the link to the document for non-JavaScript users to prevent confusion on the part of the JavaScript enabled user should they look at the status bar when mousing over the link.  If the functionality your JavaScript statements provide is not compatible with all JavaScript enabled browsers then you may consider prefacing the function call with the <code>return</code> statement as in the example immediately above.</p></p><p><h4>Executing JavaScript that is compatible with all JavaScript enabled browsers</h4></p><pre>&lt;a</p> href=&quot;js_required.html&quot;</p> onmouseover=&quot;window.status = 'click here'; return true;&quot;</p> onmouseout=&quot;window.status = '';&quot;</p> onclick=&quot;myFunction(); return false;&quot;</p>&gt;click here&lt;/a&gt;</p></pre></p><p><h4>Executing JavaScript that is <em>not</em> compatible with all JavaScript enabled browsers</h4></p><pre>&lt;a</p> href=&quot;js_required.html&quot;</p> onmouseover=&quot;window.status = 'click here'; return true;&quot;</p> onmouseout=&quot;window.status = '';&quot;</p> onclick=&quot;return myFunction()&quot;</p>&gt;click here&lt;/a&gt;</p></pre></p><p><h2>In conclusion</h2></p><p><p>I haven't covered all the possibilities or reasons for calling JavaScript within links.  However, I hope you've seen that there are ways to do so and have the page degrade as gracefully as possible.  If I haven't touched upon something you've struggled with, I hope I've given enough inspiration and guidance to encourage you to find the most usable and accessible solution possible. Links and JavaScript really <em>can</em> live together in harmony.</p></p><p><p><a href="/user/jeff/15/index.html">.jeff</a></p>