---
layout: post
permalink: node/23583
ratings: 6
avgrate: 4.3333
rating: 4.13
categories: [Site Development]
user: MartinB
real_name: "Martin Burns"
user_biog: "<p>Martin Burns has been doing this stuff since <a href=\"http://news.com.com/Netscape+bowed%2C+but+not+broken/2100-1032_3-5406682.html\" rel=\"nofollow\">Netscape 1.0</a> days. Starting with the communication ends that online media support, he moved back through design, HTML and server-side code. Then he got into running the whole show.
These days he's working for <a href=\"http://www-5.ibm.com/services/uk/services/bcs.html\" rel=\"nofollow\">these people</a> as a Project Manager, and still thinks (nearly 6 years on) it's a hell of a lot better than working for a dot-com. In his Copious Free Time&trade;, he helps out running a <a href=\"http://www.purpur.co.uk/shop/\" rel=\"nofollow\">Cloth Nappies</a> online store.
</p>

<p>Amongst his favourite things is <del><strike><a href=\"http://www.zope.org/\" rel=\"nofollow\" target=\"_foo\" title=\"Opens in a new window\">Zope</a></strike></del><ins><a href=\"http://drupal.org\" rel=\"nofollow\">Drupal</a></ins>, which he uses to run his <a href=\"http://www.easyweb.co.uk/\" rel=\"nofollow\" target=\"_foo\" title=\"Opens in a new window\">personal site</a>. He's starting to (re)gain a sneaking regard for ECMAscript since the arrival of unobtrusive scripting.</p> 

<p>He's been a member of evolt.org since the very early days, a board member, a president, a writer and even contributed a modest amount of template code for the current site. Above all, he likes evolt.org to do things because it knowingly chooses to do so, rather than randomly stumbling into them. He's also one of the boys and girls who beervolts in the UK, although the arrival of small children in his life have knocked the frequency for 6.</p>

<p><strong>Most likely to ask:</strong> <q>Why would a client pay you to do that?</q></p>
<p><strong>Least likely to ask:</strong> <q>Why isn't that navigation frame in Flash?</q></p>"
user_since: 26 Apr 1999
avatar: /images/pictures/picture-32.jpg
article_count: 143
excerpt: "An introduction to developing simple Object Oriented system with Zope and DTML, from requirements to coding, and ending up with a basic Blog. Not just a 'rip the code' article, but also an effective method of getting a system which does what you need it to do."
---
<p></p>	If you're a keen collector of evolt contributor bios, you'll notice that I'm</p>	gently working on moving <a href="http://www.easyweb.co.uk/">my own site</a></p>	over to <a href="http://www.zope.org/">Zope</a>. Now I'm a wee way through</p>	this, and in the process, thinking about how I might make </p>	managing the site easier with the <a href="http://www.evolt.org/article/refer_zope_blogging/20/5127/index.html"></p>	Content Management</a> capabilities Zope has to offer.</p></p></p><p></p>	One of the obvious candidates is the news on the home page. The fact that</p>	I've hardly touched it in months will give you the idea of how much of a</p>	pain it is.</p></p></p><p></p>	What that news update is is a <a href="http://www.easyweb.co.uk/resources/news.fhtml">single </p>	static text file</a> which is included into the main page at run time. I</p>	manage the include by telnetting (using SSH - I'm not <em>totally</em></p>	stupid) into the server and hand-editing using </p>	<a href="http://dir.yahoo.com/Computers_and_Internet/software/text_editors/vi/">vi</a>.</p></p></p><p></p>	This leaves much to be desired - not least that firewalls in various </p>	locations I'd like to edit it from prevent me from doing it - and ensures </p>	that it's generally too much hassle to actually do.</p></p></p><p></p>	So with this <a href="http://www.amazon.co.uk/exec/obidos/ASIN/0006545793/martin043">Brave </p>	New World</a> of Content Management, I thought I could improve it.</p></p></p><h2><q>Is this a Blog I see before me?</q></h2></p><p></p>	Let's face it, my news system is basically a <a href="http://www.webopedia.com/TERM/b/blog.html">Blog</a>, </p>	as common as muck. So the problem is pretty well defined - everyone </p>	knows what a <a href="http://www.zeldman.com/">Blog</a></p>	<a href="http://www.rudy.ca/">should</a> </p>	<a href="http://www.contenu.nu/nublog.html">look</a> </p>	<a href="http://www.powazek.com/zoom/log/">like</a> - a list of items </p>	with links to permanent URLs.</p></p></p><p></p>	The fun bit comes when you break that down into what a system should do, </p>	and then how to code it for Zope. The first bit is what I'm used to doing,</p>	the second is frustrating because Zope is not a well-documented system,</p>	particularly with regard to code samples. When you hear that it has a</p>	Cliff-like Learning Curve, you know what you're in for...</p></p></p><p></p>	But as Zope is an Object Oriented database which thinks it's a file-system,</p>	and has a bunch of simple (if <a href="http://www.zope.org/Documentation/Guides/DTML-HTML/DTML.6.html">badly documented</a>) </p>	APIs, it <em>should</em> be possible to work out and implement a simple set</p>	of system requirements for a blog using the small amount of <a href="<a href="http://www.webopedia.com/TERM/o/object_oriented_programming_OOP.html">OOP theory</a> I</p>	know.</p></p></p><p><h2>OOP Theory 101</h2></p><p><p></p>	(Apologies if this is either wrong or just plain over-simplified to the</p>	point of error - it's a mental model which works for me at this level of</p>	complexity)</p></p></p><p></p>	In an OOP system, you have two kinds of things:</p></p></p><p><ol></p>	<li></p>		<strong>Objects</strong> - things with properties which are exposed to</p>		other things.</p>	</li></p>	<li></p>		<strong>Methods</strong> - actions you can carry out on Objects without</p>		 worrying about exactly how they work.</p>	</li></p></ol></p><p><p></p>	And in good programming practise, you keep the two nicely separated so you</p>	can change the internals of each object and method without actually</p>	affecting anything else.</p></p></p><p></p>	So that sounded like my Blog could contain a number of News Item Objects</p>	with properties I'd display and order using Methods.</p></p></p><p><p></p>	This doesn't sound too hard, so let's think about the properties you might</p>	need for an object which happens to be a Blog news item.</p></p></p><p><h2>System Requirements</h2></p><p></p>	Note that this means the requirements the system you're working needs to fulfil, rather than the software you need to buy.</p></p></p><p></p>	At its simplest, then, each news item is an Object containing content and</p>	meta-content - information about the content. What we want to do is have</p>	each news object as self-contained as possible so that we can build pages</p>	and indices just by calling simple methods on that object - and that will be our</p>	entire system.</p></p></p><p></p>	So it makes sense for that meta-content to be as rich as is needed to</p>	support all the requirements we might reasonably have.</p></p></p><p></p>	To work out what meta-content we'll need, let's think about our</p>	requirements for a moment. I'm going to use a simplified version of a</p>	methodology called </p>	<a href="http://www.awl.com/cseng/titles/0-201-89542-0/techniques/useCase.htm">Use</p>	Cases</a>. Each Use Case is a description of <em>what</em> happens in a</p>	situation when the system is used (not <em>how</em> it happens - that's a</p>	lower level of design). You'll notice that requirements in the first Use</p>	Case have implications for later ones.</p></p></p><p><h3>Blog Use Cases</h3></p><ol></p><li></p>	<strong>User visits Home Page</strong></p>	<ol></p>		<li></p>			Home Page displays last five news items, ordered by date, most</p>			recent first.</p>		</li></p>		<li></p>			If there are no news items, the user is notified.</p>		</li></p>		<li></p>			Only news items which are past their launch date should be </p>			displayed.</p>		</li></p>		<li></p>			Only news items which have not expired should be displayed.</p>		</li></p>		<li></p>			Each item should have a link to a permanent URL to avoid </p>			<a href="http://www.useit.com/alertbox/980614.html">Linkrot</a>.</p>		</li></p>		<li></p>			Each item should display a headline, its launch date and its</p>			content.</p>		</li></p>		<li></p>			This short list of the most recent items should contain a link to a</p>			<em>full</em> list of news items.</p>		</li></p>		<li></p>			If the content has been updated since launch time, the user should</p>			see it flagged with the update date.</p>		</li></p>	</ol></p></li></p><li></p>	<strong>User visits permanent URL</strong></p>	<ol></p>		<li></p>			The URL is displayed on its own page</p>		</li></p>		<li></p>			The news item is displayed in the site's standard style (layout,</p>			stylesheet etc).</p>		</li></p>		<li></p>			The page contains the item's headline, launch-date and body</p>			content.</p>		</li></p>		<li></p>			The item is only available between its launch and expiry dates</p>			inclusive (ie they are the first and last dates it is available). At</p>			other times, an error message is displayed.</p>		</li></p>	</ol></p></li></p><li></p>	<strong>User visits full news listing page</strong><br></p>	As per Home Page, but with all available news items listed (not just the </p>	most recent five).</p></li></p></ol></p><h3>News Object Properties</h3></p><p><p></p>	So, going through the Use Cases, here's what we need in terms of a news object's</p>	properties:</p></p></p><p><ul></p>	<li></p>		<strong>Headline</strong> The standard <code>title</code> Zope </p>		property can do this nicely</p>	</li></p>	<li></p>		<strong>Content</strong> The main content of the news item</p>	</li></p>	<li></p>		<strong>URL</strong> The uniqueness can be derived from the standard </p>		Zope object <code>id</code> property - they need to be unique anyway. </p>		The content manager will have to manually choose these, but with a</p>		sensible naming schema (eg <code>yyyy_mm_dd</code>, this shouldn't be a</p>		problem.</p>	</li></p>	<li></p>		<strong>Launch Date</strong> - the first date the item is available. To</p>		give the content manager flexibility, this should be manually specified,</p>		and will have to be a date-format property.</p>	</li></p>	<li></p>		<strong>Expiry Date</strong> See Launch Date</p>	</li></p>	<li></p>		<strong>Updated Date</strong> This needn't be manually edited, and is</p>		probably better not anyway so that the system can automatically pick up</p>		re-edited items. This might be a problem if you want to sneakily re-edit</p>		something embarrassing, and another issue could be that changes in</p>		properties (eg launch date) are classed as an edit by Zope.</p>	</li></p></ul></p><p><h3>Blog Methods</h3></p><p><p></p>	As we're in an OOP</p>	environment, the other thing we need to do is specify what methods (aka</p>	functions) we can perform on the news item objects.</p></p></p><p></p>	Fortunately, looking at the Use Cases above, we've done that already - we</p>	essentially need one method for each Use Case.</p></p></p><p></p>	And it's even simpler than that, because Zope gives us one of them for free</p>	- the <code>Display Permanent URL</code> Use Case is close enough to the</p>	basic Zope <code>View</code> method as makes little difference. We'll need</p>	to do a <em>tiny</em> bit of conditionalisation around launch and expiry</p>	dates, but not enough to be worth writing a separate method specifically for</p>	it.</p></p></p><p><h2>System setup and coding</h2></p><p><p></p>	Right, now that's the hard work done, let's get our hands dirty. I've put</p>	together <a href="http://freezope2.nipltd.net/acorn/evolt/tutorials/"</p>	target="_blank" title="Opens in a new window">a demo</a> for you to have a</p>	look at while you're doing yours.</p></p></p><h3>Object setup</h3></p><p></p>	Create a folder below your site root called <code>news_items</code>. This is</p>	where we'll store all our news objects.</p></p></p><p></p>	Now create a basic DTML Document in that folder - this is the base object</p>	type we're going to use as it lets us easily add all object properties we'll</p>	need.</p></p></p><p></p>	Ignore the <code>Edit</code> screen for a moment, and pop over to the</p>	<code>Properties</code> tab. You're going to add three properties:</p></p></p><p><table border="1" cellpadding="5"></p>	<thead></p>		<th>Property</th></p>		<th>Type</th></p>		<th>Format for values</th></p>	</thead></p>	<tr></p>		<td> <code>launchDate</code> </td></p>		<td>date</td></p>		<td>yyyy/mm/dd (in other words - the ISO standard for short dates)</td></p>	</tr></p>	<tr></p>		<td> <code>expireDate</code> </td></p>		<td>date</td></p>		<td>yyyy/mm/dd</td></p>	</tr></p>	<tr></p>		<td> <code>newsContent</code> </td></p>		<td>text</td></p>		<td>Text - this will be a <code>&lt;textarea&gt;</code> form field.</td></p>	</tr></p></table></p><p></p>	With your new object, fill in some dummy data - the content will need to be</p>	normal HTML, but the rest is just a simple string for the title, or dates</p>	formatted as above.</p></p></p><p><p></p>	Now if you've browsed the </p>	<a href="http://www.zope.org/Members/michel/ZB/">Zope Book</a> you'll be</p>	asking yourself <q>Why keep the content in a property rather than in the</p>	basic <code>Edit</code> slot?</q></p></p></p><p></p>	The answer is that we're going to be producing a list of news objects,</p>	including their main content. If we'd stuck it in the <code>Edit</code></p>	slot, we'd either get the standard page headers and footers (via</p>	<code>standard_html_header</code> and <code>standard_html_footer</code>)</p>	nested in our list, or we'd have problems with missing headers and footers</p>	when we accessed the object's URL. There's another cunning thing we can do</p>	if it's here, but I'll leave that surprise until later...</p></p></p><p></p><h3>Method Setup</h3></p><p><h4>Enabling the View Permanent URL method</h4></p><p><p></p>	If you view the object now via its normal URL, you'll get a page without a</p>	lot on it. That's fine, because the <code>View</code> method only uses the</p>	basic Zope object properties like <code>Title</code>.</p></p></p><p></p>	What we're going to do now is add to that basic method to drop in our</p>	content. Here's the basic code for the <code>View</code> method, assuming</p>	that your <code>standard_html_header</code> takes care of</p>	<code>&lt;title&gt;</code> and sticking a sensible <code>&lt;h1&gt;</code></p>	title in:</p></p></p><pre></p>&lt;dtml-var standard_html_header&gt;</p>    &lt;p&gt;&lt;strong&gt;&lt;dtml-var launchDate fmt="%d %B %Y"&gt;&lt;/strong&gt;&lt;/p&gt;</p>    &lt;dtml-var newsContent&gt;</p>&lt;dtml-var standard_html_footer&gt;</p></pre></p><p><p></p>	Easy, eh? The one slight complexity is the date formatting, which uses </p>	<a href="http://www.zope.org/Members/AlexR/CustomDateFormats">these</p>	codes</a> in a similar way to SSI date formatting.</p></p></p><p></p>	Now view the object - you should see something closer to a correct rendition</p>	of the news item in your site's style (you may need to add stylesheet</p>	references to the above of course).</p></p></p><p></p>	The other thing that the <code>Visit Permanent URL</code> Use Case called</p>	for was a conditionalisation on launch and expiry dates. So we're going to</p>	add that tiny bit of conditionalisation I mentioned:</p></p></p><pre></p> &lt;dtml-var standard_html_header&gt;</p>   &lt;dtml-if "ZopeTime() - launchDate&gt;= 0 and expireDate - ZopeTime()&gt;= -1"&gt;</p>    &lt;p&gt;&lt;strong&gt;&lt;dtml-var launchDate fmt="%d %B %Y"&gt;&lt;/strong&gt;&lt;/p&gt;</p>    &lt;dtml-var newsContent fmt=structured-text&gt;</p>   &lt;dtml-else&gt;</p>    &lt;h3&gt;This news item is not available&lt;/h3&gt;</p>    &lt;p&gt;Please return to the &lt;a href="./"&gt;full list of news stories&lt;/a&gt;.&lt;/p&gt;</p>   &lt;/dtml-if&gt;</p>&lt;dtml-var standard_html_footer&gt;</p></pre></p><p><p></p>	<code>ZopeTime</code> is just a variable containing the current date and</p>	time. If you want to see what it contains, just try </p>	<code>&lt;dtml-var ZopeTime&gt;</code> (all the custom date formats work</p>	with this).</p></p></p><p><h4>Adding the View Full News Listing Method</h4></p><p><p></p>	This method is more complex, and maybe we want to access it in more than one</p>	place, so we're going to keep it separate from the page design and news</p>	content (this is A Good Thing).</p></p></p><p></p>	In your root folder, create a DTML Method called </p>	<code>news_full_list</code>. We're going to build this up like the last</p>	method, starting from the simple core, and adding conditionalisation as we</p>	go.</p></p></p><p></p>	What we need to do is iterate through the <code>news_items</code> folder</p>	object and retrieve its subobjects - the news item objects which are all</p>	DTML Documents. This is pretty simple stuff, it's the basic</p>	<code>dtml-in</code> tag. So, with similar outputs to the <code>View</code></p>	method:</p></p></p><pre></p> &lt;dtml-in expr="news_items.objectValues(['DTML Document'])" reverse sort=launchDate&gt;</p>    &lt;h2&gt;</p>      &lt;dtml-var title&gt; (&lt;dtml-var launchDate fmt="%d %B %Y"&gt;)</p>    &lt;/h2&gt;</p>    &lt;dtml-var newsContent&gt;</p>    &lt;small&gt;&lt;a href="/news_items/&lt;dtml-var id&gt;"&gt;Permanent link&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;</p> &lt;/dtml-in&gt;</p></pre></p><p><p></p>	Note the <code>reverse</code> and <code>sort</code> attributes in the</p>	<code>dtml-in</code> statement. Again, your stylesheet and heading-level</p>	mileage may vary.</p></p></p><p></p>	This will give you a full list of all the news objects in the news_items</p>	folder - if you view the method, you'll just get that output, with no HTML</p>	round it. So we need to drop it into a page somehow.</p></p></p><p></p>	Create a DTML document called <code>news_html</code>. By the miracle of</p>	acquisition, this can be anywhere, but to make life easy, drop it in your</p>	root folder.</p></p></p><p></p>	All you need in this document is a title and the following DTML in the main</p>	<code>View</code> method:</p></p>	</p><pre></p> &lt;dtml-var standard_html_header&gt;</p>   &lt;dtml-var news_full_list&gt;</p> &lt;dtml-var standard_html_footer&gt;</p></pre></p><p><p></p>	View that object, and you should get your one dummy object popping up. Add</p>	some more and you'll have a whole list.</p></p></p><p></p>	Right, back to the method, and fulfilling the date conditions.</p>	Unsurprisingly, it's the same condition as in the <code>View URL</code></p>	method:</p></p></p><pre></p> &lt;dtml-in expr="news_items.objectValues(['DTML Document'])" reverse sort=launchDate&gt;</p>   &lt;dtml-if "ZopeTime() - launchDate&gt;= 0 and expireDate - ZopeTime()&gt;= -1"&gt;</p>     &lt;h5&gt;</p>       &lt;dtml-var title&gt; (&lt;dtml-var launchDate fmt="%d %B %Y"&gt;)</p>     &lt;/h5&gt;</p>     &lt;dtml-var newsContent&gt;</p>     &lt;small&gt;&lt;a href="/news_items/&lt;dtml-var id&gt;"&gt;Permanent link&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;</p>   &lt;/dtml-if&gt;</p> &lt;/dtml-in&gt;</p></pre></p><p><p></p>	If you play about a bit with the launch and expiry properties for your</p>	objects, you'll have them popping in and out like nobody's business. </p>	<a href="http://www.sheetmusicplus.com/store/smp_detail.html?sku=WB.JEM00035C&cart=40319471891&searchtitle=Sheet%20Music">Around</p>	midnight</a> is a good time to do this so you can see the condition ticking</p>	over.</p></p></p><p></p>	The last bit of the puzzle is the automatic &quot;Updated&quot; note if an</p>	item is updated past its launch date. My note is highlighted with a</p>	superscript, styled to be white text on red (IMO, about one step down from</p>	'blink'), but once more, yours may vary:</p></p></p><pre></p> &lt;dtml-in expr="news_items.objectValues(['DTML Document'])" reverse sort=launchDate&gt;</p>   &lt;dtml-if "ZopeTime() - launchDate&gt;= 0 and expireDate - ZopeTime()&gt;= -1"&gt;</p>     &lt;h2&gt;</p>       &lt;dtml-var title&gt; (&lt;dtml-var launchDate fmt="%d %B %Y"&gt;)</p>       &lt;dtml-if "bobobase_modification_time() - launchDate &gt;= 1 and ZopeTime() - bobobase_modification_time()&lt;=5"&gt;</p>         &lt;sup class="new"&gt;&amp;nbsp;Updated&amp;nbsp;&lt;dtml-var bobobase_modification_time fmt="%d %B %Y"&gt;&amp;nbsp;&lt;/sup&gt;</p>       &lt;/dtml-if&gt;</p>     &lt;/h2&gt;</p>     &lt;dtml-var newsContent&gt;</p>     &lt;small&gt;&lt;a href="/news_items/&lt;dtml-var id&gt;"&gt;Permanent link&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;</p>  &lt;/dtml-if&gt;</p> &lt;/dtml-in&gt;</p></pre></p><p><p></p>	You've probably guessed what <code>bobobase_modification_time</code></p>	contains.</p></p></p><p></p>	We're nearly there - just one more method to go.</p></p></p><p><h4>The Home Page Listing Method</h4></p><p></p>	This is very, very similar to the full listing method, except that we only</p>	want the last four objects (by launch date). No problem - stick a</p>	<code>end=5</code> attribute in the <code>dtml-in</code> and we're</p>	there.</p></p></p><p></p>	But to give it the full instructions, add another DTML Method called</p>	<code>news</code>, with the following code:</p></p></p><pre></p> &lt;dtml-in expr="news_items.objectValues(['DTML Document'])" reverse sort=launchDate end=5&gt;</p>   &lt;dtml-if "ZopeTime() - launchDate&gt;= 0 and expireDate - ZopeTime()&gt;= -1"&gt;</p>     &lt;h5&gt;</p>       &lt;dtml-var title&gt; (&lt;dtml-var launchDate fmt="%d %B %Y"&gt;)</p>       &lt;dtml-if "bobobase_modification_time() - launchDate &gt;= 1 and ZopeTime() - bobobase_modification_time()&lt;=5"&gt;</p>         &lt;sup class="new"&gt;&amp;nbsp;Updated&amp;nbsp;&lt;dtml-var bobobase_modification_time fmt="%d %B %Y"&gt;&amp;nbsp;&lt;/sup&gt;</p>       &lt;/dtml-if&gt;</p>     &lt;/h5&gt;</p>     &lt;dtml-var newsContent&gt;</p>     &lt;small&gt;&lt;a href="/news_items/&lt;dtml-var id&gt;"&gt;Permanent link&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;</p>  &lt;/dtml-if&gt;</p> &lt;/dtml-in&gt;</p></pre></p><p><p></p>	I've also changed the heading tag to fit better into my home page hierarchy</p>	which has other content in it. Dropping it into your <code>index_html</code></p>	is a piece of cake:</p></p></p><pre></p> &lt;h4&gt;In the News&lt;/h4&gt;</p> &lt;dtml-var news&gt;</p> &lt;p&gt;&lt;a href="./news_html"&gt;All the news&lt;/a&gt;&lt;/p&gt;</p></pre></p><p><h2>Final Finesse - Text Entry and Formatting</h2></p><p></p>	I mentioned one final piece of finesse which having the content in a defined</p>	property allows us. That finesse is allowing formatted entry without knowing</p>	one bit of HTML, using </p>	<a href="http://www.zope.org/Documentation/Articles/STX">Structured</p>	Text</a></p></p></p><p></p>	Structured Text is great. It lets a content editor do pretty much most of</p>	the things most content editors want to do in the way of formatting, without</p>	having to know HTML. It adds <code>&lt;p&gt;</code> tags for double lines,</p>	<code>&lt;ul&gt;</code> and <code>&lt;li&gt;</code> tags with a simple</p>	indented paragraph starting with an asterisk or an <code>o</code> - all</p>	kinds of nice stuff. (If you want, you can intersperse HTML in there</p>	too).</p></p></p><p></p>	So for an easy to use Blog, it makes a lot of sense - you don't have to</p>	think about code, just content (in fact, this article was written using</p>	Structured Text, although I needed a couple of touchups for final</p>	presentation). But how to get the content rendered into HTML in the pages</p>	and full listings?</p></p></p><p></p>	Well it turns out that if you're reading the content in from an object</p>	property, it's really simple. All you have to do is add</p>	<code>fmt=structured-text</code> to the <code>dtml-var</code> statment like</p>	so:</p></p></p><pre></p>  &lt;dtml-var newsContent fmt=structured-text&gt;</p></pre></p><p><p></p>	So our full and final <code>news View Full News Listing</code> method looks</p>	like this:</p></p></p><p><pre></p> &lt;dtml-in expr="news_items.objectValues(['DTML Document'])" reverse end=5 sort=launchDate&gt;</p>   &lt;dtml-if "ZopeTime() - launchDate&gt;= 0 and expireDate - ZopeTime()&gt;= -1"&gt;</p>    &lt;h5&gt;</p>      &lt;dtml-var title&gt; (&lt;dtml-var launchDate fmt="%d %B %Y"&gt;)</p>       &lt;dtml-if "bobobase_modification_time() - launchDate &gt;= 1 and ZopeTime() - bobobase_modification_time()&lt;=5"&gt;</p>          &lt;sup class="new"&gt;&amp;nbsp;Updated&amp;nbsp;&lt;dtml-var bobobase_modification_time fmt="%d %B %Y"&gt;&amp;nbsp;&lt;/sup&gt;</p>        &lt;/dtml-if&gt; </p>      &lt;/h5&gt;</p>      &lt;dtml-var newsContent fmt=structured-text&gt;</p>       &lt;small&gt;&lt;a href="/news_items/&lt;dtml-var id&gt;"&gt;Permanent link&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;</p>   &lt;/dtml-if&gt;</p> &lt;/dtml-in&gt;</p></pre></p><p><p></p>	and our final View Permanent URL method is this:</p></p></p><pre></p> &lt;dtml-var standard_html_header&gt;</p>   &lt;dtml-if "ZopeTime() - launchDate&gt;= 0 and expireDate - ZopeTime()&gt;= -1"&gt;</p>    &lt;p&gt;&lt;strong&gt;&lt;dtml-var launchDate fmt="%d %B %Y"&gt;&lt;/strong&gt;&lt;/p&gt;</p>    &lt;dtml-var newsContent fmt=structured-text&gt;</p>   &lt;dtml-else&gt;</p>    &lt;h3&gt;This news item is not available&lt;/h3&gt;</p>    &lt;p&gt;Please return to the &lt;a href="./"&gt;full list of news stories&lt;/a&gt;.&lt;/p&gt;</p>   &lt;/dtml-if&gt;</p> &lt;dtml-var standard_html_footer&gt;</p></pre></p><p><p></p>	Now you've got a working Blog system, the only thing left to do is to write</p>	some original content. Ah, but that's when it get <em>really</em> hard...</p></p></p><p>&nbsp;</p></p><h2>More info</h2></p><p>If your system is more complex than this, and you have lots of people working on different elements, you could do worse than looking to the <a href="http://dev.zope.org/Fishbowl/Introduction.html" title="Opens in a new window" target="_blank">Zope Fishbowl Process</a> for some effective ways of working worth borrowing.</p></p>