---
layout: post
permalink: agent-v-agent
ratings: 0
avgrate: 
user: Douglas Clifton
real_name: "Douglas Clifton"
user_since: 27 Feb 2005
avatar: "/images/pictures/picture-65498.jpg"
article_count: 1
excerpt: "A brief article on the topic of user-agents. An introduction to the term, some examples of agents that perhaps developers haven't thought of as being agents, and a discussion of malicious agents."
---
    <blockquote cite="http://www.w3.org/TR/webarch/#intro"></p><p>A <strong>user agent</strong> acts on behalf of a user. Software agents include servers,</p>      proxies, spiders, browsers, and multimedia players.</p>       </blockquote></p>    <p></p><p>     <acronym title=" World Wide Web Consortium ">W3C</acronym>:</p>     Architecture of the World Wide Web, Volume One. From the</p>     <a href="http://www.w3.org/TR/webarch/#intro" title=" Architecture of the World Wide Web, Volume One ">Introduction</a></p>     (December, 2004).</p>    </p></p>    <h2>User Agents</h2></p>    <p></p>     The phrase <q>User agent</q> or user-agent or <acronym title=" User Agent ">UA</acronym> or browser</p>     or client or client application or client software program...all pretty much refer to the same</p>     thing.</p>    </p></p><p>    <p>Or maybe not.</p></p>    <p></p>     Many people quickly assume this <a href="http://www.netlingo.com/lookup.cfm?term=user+agent" title=" Netlingo definition of user-agent ">term</a> is the jargon equivalent of <q>browser</q></p>     (there is a much better definition of user-agent on <a href="http://en.wikipedia.org/wiki/User-agent" title=" Wikipedia definition of user-agent ">Wikipedia</a>).</p>     And while a browser may not represent you in the same way as a human agent, it does perform</p>     an action on your <strong>behalf</strong>.</p>    </p></p><p>    <p>Or maybe not.</p></p>    <p>In other words, sometimes a user-agent can be malicious.</p></p>    <h2>Agent in White</h2></p>    <p></p>     Most of the time you will initiate a request for a Web page, and in these cases a browser represents</p>     you in a very direct way &#8212; in order to fetch the resource for you and return it so you</p>     can view it. Or perhaps so you can listen to it.</p>    </p></p>    <p></p><p>     But what about a crawler/spider/robot? These are also user-agents, though you personally</p>     didn't ask them to do anything (at least not when they made the crawl). But</p>     they do make it possible to find things on the Web. Consider that the next time you search</p>     for (and find) something on Google. So maybe not so much on <strong>your</strong></p>     behalf, as on <strong>our</strong> behalf.</p>    </p></p>    <p></p>     In an even broader sense, a Web server is also a user-agent. Let's look at a</p>     typical client-server model event cycle: the browser (on your behalf) requests a page from</p>     a Web server, which (if it has what you asked for) then fetches the document (also on your</p>     behalf, but also on behalf of any advertisers or similar content that may be present on the</p>     page). It then returns the document to your browser (excuse me, user-agent). Or <strong>any other</strong></p><p>     user-agent that requests the same resource. Assuming there are no restrictions on who, or</p>     what, can request it.</p>    </p></p>    <h2>Agent in Black</h2></p>    <p></p>     So how can a user-agent be malicious? In any of the same ways that people can be, naturally,</p>     since user-agents don't write themselves. This isn't a movie folks.</p>     A spider can be malicious because it may not follow the rules or is only looking for one thing</p>     and doesn't care anything about adding to your Web experience. An email harvester</p>     is an example of this. All these little beasts do is search the Web looking for addresses to</p>     add to their owner's databases, so they can spam their victims until they probably</p>     want to scream every time they open their email program (also a user-agent). So, a harvester is</p>     also an agent, only the <q>user</q> in this equation is the spammer.</p>    </p></p><p>    <p></p>     A crawler can also ignore acceptable behavior when you, as a Web site owner, edit your <code>robots.txt</code></p>     file to say: <q>okay, you're allowed to look around here and there, but</p>     not here</q> and the agent ignores this and pokes around anywhere it damn well pleases,</p>     often trying to look directly at the things it's <strong>not</strong> supposed</p>     to look at. And this can lead to some pretty interesting ideas from folks trying to combat the guys</p>     in the black hats. Try this simple experiment sometime: Edit your <code>robots.txt</code> file</p>     and add a rule that disallows access to an arbitrary directory, it's not important whether</p>     it even exists. Now wait a few days and scan your log files looking for any agents that tried accessing</p>     that directory. Hmm...</p>    </p></p><p>    <pre></p>User-agent: *</p>Disallow: /agent_black/</p></pre></p>    <p></p>     You may also want to check out <a href="/app/drx/Internet/WWW/Servers#honeypot:project" title=" Project Honey Pot ">Project Honey Pot</a>, which is a grassroots organization trying to at least</p>     slow the flood of this stuff&#8212;a problem that I personally think accounts for a measurable</p>     drain on the entire network. And for what <abbr title="Return on Investment">RoI</abbr>? I would love to</p>     look at the numbers: Let's say, for every 100,000 people they piss-off, one, maybe</p>     <strong>one</strong> clicks through to one of these dumb ads? And for those few that do, what</p>     percentage actually buy something? I suspect that spammers have to make a <em>lot</em> of people very angry to get</p>     a scant handful of sales. Sigh.</p>    </p></p><p>    <p></p>     The list of bad guys goes on. What about these downloadable browser toolbars? They can certainly enhance</p>     your online experience. But just as many can be deceiving and are really interested in sniffing around</p>     on your personal computer looking for CC numbers or popping up ads in your face when you probably</p>     don't like ads popped up in your face. In this example, it's the Web server</p>     that's the bad guy. Or rather the people that configured it to deliver these adware,</p>     spyware or other programs to your door. One in particular is not among this list. The <a href="/app/drx/Internet/WWW/Servers#netcraft:toolbar" title=" Netcraft Toolbar ">Netcraft Toolbar</a></p>     has a number of useful features, and is also used by a community of alert members to help prevent fraud</p>     and <a href="http://en.wikipedia.org/wiki/Phishing" title=" Phishing ">phishing</a> attacks.</p>    </p></p>    <p></p><p>     And what about commercial browsers? Internet Explorer from Microsoft is a very popular user-agent,</p>     but does it wear a white hat? While it never set out to be a bad guy, I would certainly lump it in</p>     the category of not-so-nice user-agents. Why? Because the developers thumbed their noses at accepted</p>     standards, and even worse, left the thing wide open for exploitation by the guys wearing the</p>     <strong>really</strong> black hats.</p>    </p></p>    <h2>Wear a White Hat</h2></p>    <p></p>     The Web is an amazing resource. It was built with openness and a free exchange of ideas and software,</p>     and by a lot of very hard working people that you may never have heard of. Without Bill Joy, or Tim</p>     Berners-Lee, or Larry Wall or any number of other people who didn't get rich, or ever</p>     wanted to get rich, we wouldn't have the Web. Sadly, it's also awash with</p>     rats and thieves. Often, some of their techniques are so sophisticated I have to wonder why they</p>     don't expend some of that energy on legitimate enterprises. Even worse, many are mere</p>     children who exchange little scripts and don't even understand what they're</p>     doing and think it's cool trying bring down or deface someone's Web site.</p>    </p></p><p>    <p>Not cool at all.</p></p>    <p>In closing, I leave you with your very own three line Perl user-agent:</p></p>    <pre></p>#!/usr/bin/perl</p>use LWP::Simple;</p>getprint shift;</p></pre></p>    <p>And please, buy yourself a white hat.</p></p>    <p class="note"></p>     A humorous post on the history of this article is available on my <a href="http://loadaveragezero.com/app/s9y/index.php?/archives/29-Agents-in-the-Safehouse.html" title=" blogZero: Agents in the Safehouse ">blog</a>. You are welcome to</p>     submit questions and comments there.</p>    </p></p>