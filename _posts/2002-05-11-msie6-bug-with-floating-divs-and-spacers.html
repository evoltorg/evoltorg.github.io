---
layout: post
permalink: MSIE6_bug_with_floating_divs_and_spacers
ratings: 9
avgrate: 4.4444
category: Code
user: raphael
real_name: "RaphaÃ«l Mazoyer"
user_biog: "Digital Communications Manager at <a href=\"http://www.asics.com/\" title=\"Japanese running shoes and sports equipment manufacturer\" rel=\"nofollow\">ASICS</a> Europe, I blog at <a href=\"http://www.petitbourgeois.com/\" rel=\"nofollow\" title=\"Wonderful blogging\" target=\"_blank\">Petit Bourgeois: commentary about web building</a>. You can reach me at <a href=\"mailto:evolt.contact [at] direct.phase4.net&subject=\" rel=\"nofollow\">evolt.contact&nbsp;[at]&nbsp;direct.phase4.net</a>. Recent launches: <a href=\"http://www.asics.co.uk/\" rel=\"nofollow\" title=\"The ASICS UK corporate site\">ASICS UK</a> and <a href=\"http://www.onitsukatiger.com/en-uk\" rel=\"nofollow\" title=\"Japanese sports fashion brand\">Onitsuka Tiger</a>."
user_since: 21 Nov 2001
avatar: /images/pictures/picture-17705.jpg
article_count: 5
excerpt: "Microsoft Internet Explorer 6 running on Windows has a CSS display bug related to floating and spacer divs, leading to the disappearance of text around those. A very simple fix is available!"
---
<p>Microsoft Internet Explorer 6 running on a Windows system has a very annoying display bug when rendering an HTML page that uses Cascading Style Sheets to define <code>div</code>s as floating and adding a spacer <code>div</code> at the bottom with the setting <code>clear: both</code> attribute. If you've been using Marc Newhouse's great <a href="http://www.alistapart.com/stories/practicalcss/" title="Article on A List Apart">Practical CSS</a> column, this may have affected you already...</p></p><h2>The problem</h2></p><p>Consider the following style sheet:</p></p><pre></p>.spacer {</p>  clear: both;</p>}</p><p>.container {</p>  border: 1px #999 dashed;</p>}</p><p>.item {</p>  float: left;</p>  background-color: #ccc;</p>  padding: 5px;</p>  margin: 5px;</p>}</p><p>.main {</p>}</p><p>.main2 {</p>  background-color: #eee;</p>}</p></pre></p><p>And the following HTML file:</p></p><pre></p>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</p>&lt;html&gt;</p>&lt;head&gt;</p>&lt;title&gt;title&lt;/title&gt;</p>&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/&gt;</p>&lt;link rel="stylesheet" href="style.css" type="text/css"/&gt;</p>&lt;/head&gt;</p><p>&lt;body&gt;</p>&lt;div class="main"&gt;</p>  &lt;h1&gt;Title of the page&lt;/h1&gt;</p>  &lt;div class="container"&gt;</p>    &lt;div class="spacer"&gt;&nbsp;&lt;/div&gt;</p>    &lt;div class="item"&gt;One&lt;/div&gt;</p>    &lt;div class="item"&gt;Two&lt;br/&gt;bis&lt;/div&gt;</p>    &lt;div class="item"&gt;Three&lt;/div&gt;</p>    &lt;div class="spacer"&gt;&nbsp;&lt;/div&gt;</p>  &lt;/div&gt;</p>&lt;/div&gt;</p>&lt;/body&gt;</p>&lt;/html&gt;</p></pre></p><p>... which validates as <a href="http://validator.w3.org/check?uri=http://www.evolt.org/evolt/files/17705/example.html" title="See XHTML validation results from the W3C">XHTML</a> </p>  and <a href="http://jigsaw.w3.org/css-validator/validator?uri=http://www.evolt.org/evolt/files/17705/example.html">CSS</a>.</p></p><p><a href="files/17705/example.html" title="The HTML file as described above">View it</a> in any CSS-compliant browser, you'll see the same results (<a href="images/17705/example.gif" title="Screenshot of the first example, 8k gif image">see screenshot</a>).</p></p><p>Now consider another HTML file, identical to the first one, with the exception that the first <code>div</code> is set to the class <code>.main2</code>. The only difference is that its <code>background-color</code> attribute is set. When I <a href="files/17705/example2.html" title="The other HTML file with the main div having a background color">look at it</a> with IE6/Win2k, I don't see "Title of the page", it just isn't visible. Space is reserved for it, but the words aren't there. If you don't have IE6/win, see <a href="images/17705/example2.gif" title="Screenshot of the broken example, 8k gif image">this screenshot</a>.</p></p><p>OK, we've seen the reason. Now let's see some weird behavior: scrolling. When you scroll down then back up your affected page, the display is properly redrawn! Try it for yourself on the <a href="files/17705/example2.html" title="The HTML file as described above">second example</a>, or see <a href="images/17705/example2_scrolled.gif" title="Screenshot of the second example after a scroll, 8k gif image">this screenshot</a>. (Note: the actual files differ from the code above, as I've added some <code>&lt;br&gt;</code>s to allow you to scroll easily. It does not otherwise affect the demonstration.)</p></p><h2>The solution</h2></p><p>Brian G. Vallelunga</a> has provided me with the fix: explicitly set the <code>position</code> attribute of paragraphs to <code>relative</code>. Practically, add the following  rule to your style sheet:</p></p><pre>h1, h2, h3, h4, h5, h6, p {</p>  position: relative;</p>} </pre></p><p><a href="files/17705/example4.html" title="This file will display similarly in IE and other browsers">See it in action</a>, the way it should be (note the different CSS file). It still  validates as <a href="http://validator.w3.org/check?uri=http://www.evolt.org/evolt/files/17705/example4.html">XHTML</a>  and <a href="http://jigsaw.w3.org/css-validator/validator?uri=http://www.evolt.org/evolt/files/17705/example4.html">CSS</a>,  but I'm not sure how respectful it is of the spirit of the thing: feel free  to contribute comment if you have some insight in this matter!!</p></p><p>But yes, it's that simple :-)</p>