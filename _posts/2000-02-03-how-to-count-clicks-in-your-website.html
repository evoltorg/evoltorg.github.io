---
layout: post
permalink: how_to_count_clicks_in_your_website
ratings: 1
avgrate: 4.0000
category: Code
user: pedrito
real_name: "peter van dijck"
user_since: 22 Oct 1999
avatar: ""
article_count: 23
excerpt: "An absolute beginners tutorial for total niftyness in PHP!</p> Hi. What if you could count the amount of times visitors clicked on certain links on your site? You could track how often they click on tha"
---
An absolute beginners tutorial for total niftyness in PHP!</p><P> Hi. What if you could count the amount of times visitors clicked on certain links on your site? You could track how often they click on that link to greenpeace, or how often they click on the links at the top of the page compared with those on the bottom of the page. You could even count how often they click on that animated gif you had set up as a link, or how many people you're sending to other sites.<P> Well, I'm here to tell you: it's easy! This is an Absolute Beginners&#8482; tutorial. <P> <b>What you'll need for this tutorial:</b><ul> <li>PHP <li>mySQL <li>a good kick in the butt (we all need that now and then) </ul><P> <b>What we'll make:</b><P> We'll make a click.php3 page, through which all clicks will go. It will log where the click came from and put that in a database. So your links will look like<br> <code>&lt;a href="/click.php3?url=evolt.org&id=3"&gt;</code><br> instead of<br> <code>&lt;a href="http://evolt.org"&gt;</code><br> where id will tell the click.php3 page where the link came from. This way, you can have a bunch of links all have the same id, and we keep it simple. Simple, as you know, makes us Happy.<P> <b>Tricky bit</b>: no more relative links like this: ../../page.html (We're keeping it simple)<P> Ok, let's get started. There's a nifty function in PHP (look it up) that's called header. It sends a header. It can be used to send the browser to another page, like this:<br><code>&lt;?header("Location: http://evolt.org"); exit;?&gt; </code><br> Try it out, upload it and go to the page. You'll be send straight to evolt.<P> <b>Tricky bit</b>: be careful not to put any spaces before the header function. This will force output and it won't work.<P> Cool hey? Now try this:<br><code> &lt;?header("Location: http://$url"); exit;?&gt; </code><br>Can you guess what this does? Upload it, and then go to it like this: click.php3?url=evolt.org You'll be sent straight to evolt.org.  Niftyness!!!<P>  Now you can see the possibilities here, right? We're gonna need a database to track all this counting going on. Good thing you've got mySQL installed!<P> Now, the following bit will be easier if you've done some databasing before. But if not, don't worry, you can do it! To make all this really easy, you can use a database interface like facemysql, available for free. Or you can do it all from the command line.<P> We'll set up a table in our database that looks like this:<br>name: clickcount <br>fields(=columns): id / clicks<br>Yes, only 2 fields! (remember the Simple thing?)<P> To set up the database: we'll call the table clickcount:<P> <code> id INT AUTO_INCREMENT NOT NULL PRIMARY_KEY, clicks INT </code><P> That's all. Now you need to make a bunch of rows and set the clicks all to 0(id=1,clicks=0; id=2,clicks=0; id=3 ... and so on). You can do that easily with facemySQL.<P><b>Have the database set up?</b><P>Good! That was the hard part. Here's the complete program, have a look at it:<br></p><p><pre> &lt?</p>//connect to dbase</p> $db=mysql_connect(&quot;hostname&quot;,&quot;user&quot;,&quot;pass&quot;); // username and password</p> mysql_select_db(&quot;pedro&quot;,$db); // pedro is name of database</p> // clickcount is the table, with 2 columns: id and clicks</p> $sql=&quot;UPDATE clickcount SET clicks=clicks+1 WHERE (id = '$id')&quot;;</p> $result=mysql_query($sql,$db);</p> header(&quot;Location: http://$url&quot;);  /* Redirect browser to web site */</p> exit; // just to be nice</p> ?&gt; </p></pre></p><p><P><b>Short explanation:</b><P>First, we update the database. And then, we send the user to the page he's going to for continued happiness in surfing. <P>And that's that for today. Cool hey?