---
layout: post
permalink: node/55035
ratings: 8
avgrate: 4.1250
category: Code
user: stormy
real_name: "Justin Whitford"
user_since: 04 Sep 2001
avatar: "/images/pictures/picture-15473.jpg"
article_count: 2
excerpt: "This article describes a technique that takes input from a form text field and uses it to bring matching options to the top in a dropdown list"
---
<p></p><em>This article describes a technique that takes input from a form text field and uses it to bring matching options to the top in a dropdown list</em></p></p></p><p></p><p></p>Have you ever hit a dropdown box that was just too long?</p>There were so many items that finding the one you wanted was a hassle.</p></p></p><p><p></p>You hit the first letter of the option you were looking for, only to find that there are at least 50 options starting with that letter</p> - or worse, the list wasn't sorted alphabetically and you had to type the letter 20 times to get to your option.</p></p></p><p><p></p>Maybe the option you wanted was phrased differently than you expected. It didn't even start with the letter you were typing!</p></p></p><p><p></p>Sound familliar? Well, there are a couple of solutions.</p>One way around this problem is to stage your dropdown boxes;</p>what you choose in box 1 determines your options in box 2, etc.</p></p></p><p><p></p>Joe's article,</p><a href="http://www.evolt.org/article/Creating_Dynamic_Select_Boxes/17/1324/index.html" target="_blank">Creating Dynamic Select Boxes</a></p>, describes how this can be done using ColdFusion, JavaScript and WDDX. <em>(if there is sufficient interest, I'll throw together an article that presents a Javascript-only method)</em></p></p></p><p><p></p>This is often a great way to reduce cumbersome lists into managable chunks.</p>However this technique is based on the assumption that your visitors understand the way you've categorised the options.</p></p></p><p><p></p>Take for example a simple dropdown list of countries. In the past, I've found my beloved Australia under categories such as &quot;Asia&quot;, &quot;Pacific&quot;, &quot;South Pacific&quot;, and, &quot;Oceania&quot;. Searching for options this way can be a bit hit and miss.</p></p></p><p><p></p>Another solution to the &quot;long list&quot; problem is to allow your visitor to make their option magically rise to the top of the list...</p></p></p><p><p></p><script language="JavaScript" type="text/javascript"></p><!--</p>  function filtery(pattern, list){</p>    if (!list.bak){</p>      list.bak = new Array();</p>      for (n=0;n<list.length;n++){</p>        list.bak[list.bak.length] = new Array(list[n].value, list[n].text);</p>      }</p>    }</p>    match = new Array();</p>    nomatch = new Array();</p>    for (n=0;n<list.bak.length;n++){</p>      if(list.bak[n][1].toLowerCase().indexOf(pattern.toLowerCase())!=-1){</p>        match[match.length] = new Array(list.bak[n][0], list.bak[n][1]);</p>      }else{</p>        nomatch[nomatch.length] = new Array(list.bak[n][0], list.bak[n][1]);</p>      }</p>    }</p>    for (n=0;n<match.length;n++){</p>      list[n].value = match[n][0];</p>      list[n].text = match[n][1];</p>    }</p>    for (n=0;n<nomatch.length;n++){</p>      list[n+match.length].value = nomatch[n][0];</p>      list[n+match.length].text = nomatch[n][1];</p>    }</p>    list.selectedIndex=0;</p>  }</p>// --></p></script></p><p>    Search: <input type="text" size="4" name="yourTextField" onkeyup="filtery(this.value, this.form.yourSelect)" onchange="filtery(this.value, this.form.yourSelect)"></p>    <select name="yourSelect"></p>      <option></option></p>      <option value="2">AFGHANISTAN</option><option value="3">ALBANIA</option><option value="4">ALGERIA</option><option value="5">AMERICAN SAMOA</option><option value="6">ANDORRA</option><option value="7">ANGOLA</option><option value="8">ANGUILLA</option><option value="9">ANTARCTICA</option><option value="10">ANTIGUA AND BARBUDA</option><option value="11">ARGENTINA</option><option value="12">ARMENIA</option><option value="13">ARUBA</option><option value="14">AUSTRALIA</option><option value="15">AUSTRIA</option><option value="16">AZERBAIJAN</option><option value="17">BAHAMAS</option><option value="18">BAHRAIN</option><option value="19">BANGLADESH</option><option value="20">BARBADOS</option><option value="21">BELARUS</option><option value="22">BELGIUM</option><option value="23">BELIZE</option><option value="24">BENIN</option><option value="25">BERMUDA</option><option value="26">BHUTAN</option><option value="27">BOLIVIA</option><option value="28">BOSNIA AND HERZEGOVINA</option><option value="29">BOTSWANA</option><option value="30">BOUVET ISLAND</option><option value="31">BRAZIL</option><option value="32">BRITISH INDIAN OCEAN TERRITORY</option><option value="33">BRUNEI DARUSSALAM</option><option value="34">BULGARIA</option><option value="35">BURKINA FASO</option><option value="36">BURUNDI</option><option value="37">CAMBODIA</option><option value="38">CAMEROON</option><option value="39">CANADA</option><option value="40">CAPE VERDE</option><option value="41">CAYMAN ISLANDS</option><option value="42">CENTRAL AFRICAN REPUBLIC</option><option value="43">CHAD</option><option value="44">CHILE</option><option value="45">CHINA</option><option value="46">CHRISTMAS ISLAND</option><option value="47">COCOS (KEELING) ISLANDS</option><option value="48">COLOMBIA</option><option value="49">COMOROS</option><option value="50">CONGO</option><option value="51">CONGO, THE DEMOCRATIC REPUBLIC OF THE</option><option value="52">COOK ISLANDS</option><option value="53">COSTA RICA</option><option value="54">COTE D'IVOIRE</option><option value="55">CROATIA</option><option value="56">CUBA</option><option value="57">CYPRUS</option><option value="58">CZECH REPUBLIC</option><option value="59">DENMARK</option><option value="60">DJIBOUTI</option><option value="61">DOMINICA</option><option value="62">DOMINICAN REPUBLIC</option><option value="63">EAST TIMOR</option><option value="64">ECUADOR</option><option value="65">EGYPT</option><option value="66">EL SALVADOR</option><option value="67">EQUATORIAL GUINEA</option><option value="68">ERITREA</option><option value="69">ESTONIA</option><option value="70">ETHIOPIA</option><option value="71">FALKLAND ISLANDS (MALVINAS)</option><option value="72">FAROE ISLANDS</option><option value="73">FIJI</option><option value="74">FINLAND</option><option value="75">FRANCE</option><option value="76">FRENCH GUIANA</option><option value="77">FRENCH POLYNESIA</option><option value="78">FRENCH SOUTHERN TERRITORIES</option><option value="79">GABON</option><option value="80">GAMBIA</option><option value="81">GEORGIA</option><option value="82">GERMANY</option><option value="83">GHANA</option><option value="84">GIBRALTAR</option><option value="85">GREECE</option><option value="86">GREENLAND</option><option value="87">GRENADA</option><option value="88">GUADELOUPE</option><option value="89">GUAM</option><option value="90">GUATEMALA</option><option value="91">GUINEA</option><option value="92">GUINEA-BISSAU</option><option value="93">GUYANA</option><option value="94">HAITI</option><option value="95">HEARD ISLAND AND MCDONALD ISLANDS</option><option value="96">HOLY SEE (VATICAN CITY STATE)</option><option value="97">HONDURAS</option><option value="98">HONG KONG</option><option value="99">HUNGARY</option><option value="100">ICELAND</option><option value="101">INDIA</option><option value="102">INDONESIA</option><option value="103">"IRAN, ISLAMIC REPUBLIC OF"</option><option value="104">IRAQ</option><option value="105">IRELAND</option><option value="106">ISRAEL</option><option value="107">ITALY</option><option value="108">JAMAICA</option><option value="109">JAPAN</option><option value="110">JORDAN</option><option value="111">KAZAKSTAN</option><option value="112">KENYA</option><option value="113">KIRIBATI</option><option value="114">KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF</option><option value="115">KOREA, REPUBLIC OF</option><option value="116">KUWAIT</option><option value="117">KYRGYZSTAN</option><option value="118">LAO PEOPLE'S DEMOCRATIC REPUBLIC</option><option value="119">LATVIA</option><option value="120">LEBANON</option><option value="121">LESOTHO</option><option value="122">LIBERIA</option><option value="123">LIBYAN ARAB JAMAHIRIYA</option><option value="124">LIECHTENSTEIN</option><option value="125">LITHUANIA</option><option value="126">LUXEMBOURG</option><option value="127">MACAU</option><option value="128">MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF</option><option value="129">MADAGASCAR</option><option value="130">MALAWI</option><option value="131">MALAYSIA</option><option value="132">MALDIVES</option><option value="133">MALI</option><option value="134">MALTA</option><option value="135">MARSHALL ISLANDS</option><option value="136">MARTINIQUE</option><option value="137">MAURITANIA</option><option value="138">MAURITIUS</option><option value="139">MAYOTTE</option><option value="140">MEXICO</option><option value="141">MICRONESIA, FEDERATED STATES OF</option><option value="142">MOLDOVA, REPUBLIC OF</option><option value="143">MONACO</option><option value="144">MONGOLIA</option><option value="145">MONTSERRAT</option><option value="146">MOROCCO</option><option value="147">MOZAMBIQUE</option><option value="148">MYANMAR</option><option value="149">NAMIBIA</option><option value="150">NAURU</option><option value="151">NEPAL</option><option value="152">NETHERLANDS</option><option value="153">NETHERLANDS ANTILLES</option><option value="154">NEW CALEDONIA</option><option value="155">NEW ZEALAND</option><option value="156">NICARAGUA</option><option value="157">NIGER</option><option value="158">NIGERIA</option><option value="159">NIUE</option><option value="160">NORFOLK ISLAND</option><option value="161">NORTHERN MARIANA ISLANDS</option><option value="162">NORWAY</option><option value="163">OMAN</option><option value="164">PAKISTAN</option><option value="165">PALAU</option><option value="166">PALESTINIAN TERRITORY, OCCUPIED</option><option value="167">PANAMA</option><option value="168">PAPUA NEW GUINEA</option><option value="169">PARAGUAY</option><option value="170">PERU</option><option value="171">PHILIPPINES</option><option value="172">PITCAIRN</option><option value="173">POLAND</option><option value="174">PORTUGAL</option><option value="175">PUERTO RICO</option><option value="176">QATAR</option><option value="177">REUNION</option><option value="178">ROMANIA</option><option value="179">RUSSIAN FEDERATION</option><option value="180">RWANDA</option><option value="181">SAINT HELENA</option><option value="182">SAINT KITTS AND NEVIS</option><option value="183">SAINT LUCIA</option><option value="184">SAINT PIERRE AND MIQUELON</option><option value="185">SAINT VINCENT AND THE GRENADINES</option><option value="186">SAMOA</option><option value="187">SAN MARINO</option><option value="188">SAO TOME AND PRINCIPE</option><option value="189">SAUDI ARABIA</option><option value="190">SENEGAL</option><option value="191">SEYCHELLES</option><option value="192">SIERRA LEONE</option><option value="193">SINGAPORE</option><option value="194">SLOVAKIA</option><option value="195">SLOVENIA</option><option value="196">SOLOMON ISLANDS</option><option value="197">SOMALIA</option><option value="198">SOUTH AFRICA</option><option value="199">SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS</option><option value="200">SPAIN</option><option value="201">SRI LANKA</option><option value="202">SUDAN</option><option value="203">SURINAME</option><option value="204">SVALBARD AND JAN MAYEN</option><option value="205">SWAZILAND</option><option value="206">SWEDEN</option><option value="207">SWITZERLAND</option><option value="208">SYRIAN ARAB REPUBLIC</option><option value="209">TAIWAN</option><option value="210">TAJIKISTAN</option><option value="211">TANZANIA, UNITED REPUBLIC OF</option><option value="212">THAILAND</option><option value="213">TOGO</option><option value="214">TOKELAU</option><option value="215">TONGA</option><option value="216">TRINIDAD AND TOBAGO</option><option value="217">TUNISIA</option><option value="218">TURKEY</option><option value="219">TURKMENISTAN</option><option value="220">TURKS AND CAICOS ISLANDS</option><option value="221">TUVALU</option><option value="222">UGANDA</option><option value="223">UKRAINE</option><option value="224">UNITED ARAB EMIRATES</option><option value="225">UNITED KINGDOM</option><option value="226">UNITED STATES</option><option value="227">UNITED STATES MINOR OUTLYING ISLANDS</option><option value="228">URUGUAY</option><option value="229">UZBEKISTAN</option><option value="230">VANUATU</option><option value="231">VENEZUELA</option><option value="232">VIET NAM</option><option value="233">VIRGIN ISLANDS, BRITISH</option><option value="234">VIRGIN ISLANDS, U.S.</option><option value="235">WALLIS AND FUTUNA</option><option value="236">WESTERN SAHARA</option><option value="237">YEMEN</option><option value="238">YUGOSLAVIA</option><option value="239">ZAMBIA</option><option value="240">ZIMBABWE</option></p>	 </select></p><p></p></p><p><h1>The Code</h1></p><p></p>For those who are in a hurry (or who are already sick of reading), here is the code with ample comments:</p><pre></p>&lt;html&gt;</p>&lt;head&gt;</p>	&lt;title&gt;Dropdown Filter&lt;/title&gt;</p>&lt;/head&gt;</p><p>&lt;body&gt;</p>&lt;script language=&quot;JavaScript&quot; type=&quot;text/javascript&quot;&gt;</p>&lt;!--</p>/*</p>  - Give Credit Where Its Due -</p>  Please acknowledge this article and its author, at</p>  least in code comments, when using this code.</p><p>  Author: Justin Whitford</p>  Source: www.evolt.org</p><p>  Thank you.</p>*/</p><p>/*</p>  filtery(pattern, list)</p>  pattern: a string of zero or more characters by which to filter the list</p>  list: reference to a form object of type, select</p><p>  Example:</p>  &lt;form name=&quot;yourForm&quot;&gt;</p>    &lt;input type=&quot;text&quot; name=&quot;yourTextField&quot; onchange=&quot;filtery(this.value,this.form.yourSelect)&quot;&gt;</p>    &lt;select name=&quot;yourSelect&quot;&gt;</p>      &lt;option&gt;&lt;/option&gt;</p>      &lt;option value=&quot;Australia&quot;&gt;Australia&lt;/option&gt;</p>       .......</p>*/</p>function filtery(pattern, list){</p>  /*</p>  if the dropdown list passed in hasn't</p>  already been backed up, we'll do that now</p>  */</p>  if (!list.bak){</p>    /*</p>    We're going to attach an array to the select object</p>    where we'll keep a backup of the original dropdown list</p>    */</p>    list.bak = new Array();</p>    for (n=0;n&lt;list.length;n++){</p>      list.bak[list.bak.length] = new Array(list[n].value, list[n].text);</p>    }</p>  }</p><p>  /*</p>  We're going to iterate through the backed up dropdown</p>  list. If an item matches, it is added to the list of</p>  matches. If not, then it is added to the list of non matches.</p>  */</p>  match = new Array();</p>  nomatch = new Array();</p>  for (n=0;n&lt;list.bak.length;n++){</p>    if(list.bak[n][1].toLowerCase().indexOf(pattern.toLowerCase())!=-1){</p>      match[match.length] = new Array(list.bak[n][0], list.bak[n][1]);</p>    }else{</p>      nomatch[nomatch.length] = new Array(list.bak[n][0], list.bak[n][1]);</p>    }</p>  }</p><p>  /*</p>  Now we completely rewrite the dropdown list.</p>  First we write in the matches, then we write</p>  in the non matches</p>  */</p>  for (n=0;n&lt;match.length;n++){</p>    list[n].value = match[n][0];</p>    list[n].text = match[n][1];</p>  }</p>  for (n=0;n&lt;nomatch.length;n++){</p>    list[n+match.length].value = nomatch[n][0];</p>    list[n+match.length].text = nomatch[n][1];</p>  }</p><p>  /*</p>  Finally, we make the 1st item selected - this</p>  makes sure that the matching options are</p>  immediately apparent</p>  */</p>  list.selectedIndex=0;</p>}</p>// --&gt;</p>&lt;/script&gt;</p><p>&lt;form name=&quot;yourForm&quot;&gt;</p>  Search &lt;input type=&quot;text&quot; name=&quot;yourTextField&quot; onkeyup=&quot;filtery(this.value,this.form.yourSelect)&quot; onchange=&quot;filtery(this.value,this.form.yourSelect)&quot;&gt;</p>  &lt;select name=&quot;yourSelect&quot;&gt;</p>    &lt;option&gt;&lt;/option&gt;</p>    &lt;option value=&quot;Australia&quot;&gt;Australia&lt;/option&gt;</p>    &lt;option value=&quot;China&quot;&gt;China&lt;/option&gt;</p>    &lt;option value=&quot;England&quot;&gt;England&lt;/option&gt;</p>    &lt;option value=&quot;New Zealand&quot;&gt;New Zealand&lt;/option&gt;</p>  &lt;/select&gt;</p>&lt;/form&gt;</p><p></p>&lt;/body&gt;</p>&lt;/html&gt;</p><p></pre></p><p></p><h1>Discussion</h1></p><p></p><strong>How it Works</strong><br></p>If the visitor does several searches, the dropdown list could get rather ugly from the constant shuffling. To combat this, we make</p> a copy of the dropdown list and use that as the master copy. We don't want to do this <em>every time</em> the list is filtered - just the</p> first time.</p></p></p><p><p></p>The first thing the function does is check whether a master copy exists. If one does not, then it attaches and populates a master copy array to the form's select object</p></p></p><p><p></p>The function then creates two arrays: one for matches and one for non-matches. Now, as it iterates through the master copy, it appends items to either of the two arrays.</p></p></p><p><p></p>Once each item in the dropdown has been assessed, the matches and non-matches arrays are written back to the select object.</p></p></p><p><p></p>Finally, the function forces the first item in the list to be selected - this makes sure that the matching options are immediately apparent to the visitor</p></p></p><p><p></p><strong>Allowing Advanced Search</strong><br></p>If you're not fussed about supporting version three browsers, you can enhance the function by having it match by regular expression.</p><p></p><p><p></p>Simply add this near the top of the function:<br></p><code>pattern = new RegExp(pattern,&quot;i&quot;);</code></p></p></p><p><p></p>... and replace...<br></p><code>    if(list.bak[n][1].toLowerCase().indexOf(pattern.toLowerCase())!=-1){</code><br></p>... with...<br></p><code>    if(pattern.test(list.bak[n][1])){</code><br></p></p></p><p><p></p>Your visitors will now be able to type:</p><ul></p>  <li>&quot;^au&quot; to get all items starting with au.</li></p>  <li>&quot;ia$&quot; to get all items ending with ia.</li></p>  <li>&quot;9\d\d&quot; to get all items containing numbers between 900 and 999.</li></p>  <li>etc, etc.</li></p></ul></p></p></p><p><p></p><em>For more information on regular expressions, see the <a href="http://developer.netscape.com/docs/manuals/js/client/jsguide/index.html" target="_blank">developer.netscape site</a>. There are also several articles on evolt regarding regular expressions.</em></p></p></p><p><p></p><strong>Cross Browser Compatability</strong><br></p>The following table lists the browsers and platforms on which I have tested this code.</p></p></p><p></p><p><table cellspacing="0" class="data"></p>  <thead></p>  <tr><th colspan="4">Browser Compatability Table</th></tr></p>  <tr><th>Browser / Ver</th><th>Win NT</th><th>Win 98</th><th>Linux (SuSE 8)</th></tr></p>  </thead></p>  <tbody></p>  <tr><td>Internet Explorer 5.5</td>    <td align="center">Y</td><td align="center">-</td><td align="center">-</td></tr></p>  <tr><td>Internet Explorer 6.0</td>    <td align="center">-</td><td align="center">Y</td><td align="center">-</td></tr></p>  <tr><td>Netscape 3.x</td>             <td align="center">Y</td><td align="center">-</td><td align="center">-</td></tr></p>  <tr><td>Netscape 4.7x</td>            <td align="center">Y</td><td align="center">Y</td><td align="center">-</td></tr></p>  <tr><td><strong>Netscape 6.x</strong></td>    <td align="center"><strong>*</strong></td><td align="center">-</td><td align="center"><strong>*</strong></td></tr></p>  <tr><td><strong>Mozilla 0.9.8</strong></td>   <td align="center">-</td><td align="center">-</td><td align="center"><strong>*</strong></td></tr></p>  <tr><td>Mozilla 1.2.1</td>            <td align="center">-</td><td align="center">Y</td><td align="center">-</td></tr></p>  <tr><td>Phoenix 0.5</td>              <td align="center">-</td><td align="center">Y</td><td align="center">-</td></tr></p>  <tr><td>Opera 6.01</td>               <td align="center">-</td><td align="center">-</td><td align="center">Y</td></tr></p>  </tbody></p>  <tfoot></p>  <tr><td colspan="4"></p>    Y : Tested and OK<br></p>    N : Tested and not OK<br></p>    - : Not tested<br></p>    <strong>*</strong>There seems to be a bug in Mozilla 0.9.8 and therefor, not surprisingly, Netscape 6.x. Making changes to the dropdown list in these browsers results in an inordinate amout of CPU usage. It works, but the browser may hang for a noticable amount of time, depending on the size of the list and the CPU speed of the PC. Mozilla 1.2.1 is fine, so I assume that Netscape 7 is also fine.</p>  </td></tr></p>  </tfoot></p></table>