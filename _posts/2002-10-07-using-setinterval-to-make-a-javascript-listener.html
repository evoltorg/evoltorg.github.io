---
layout: post
permalink: node/36035
ratings: 10
avgrate: 3.5000
category: Code
user: pixelmech
real_name: "Tom Dell'Aringa"
user_since: 20 May 2002
avatar: "/images/pictures/picture-27735.jpg"
article_count: 1
excerpt: "If you have ever been frustrated by the need to be able to periodically check a condition - and then act upon, then you need a listener! And no, setTimeout is NOT the answer."
---
<p>Oftentimes when you are building something, you need some kind of function to &quot;listen&quot; for either an event or a condition. You need this to happen continously so you can act upon it when it does happen.</p></p><p><p>Quite often programmers attempt to use <code>setTimeout()</code> in these cases, which isn't what you want. What you need is the red-headed stepchild (apologies to redheads) of <code>setTimeout()</code>, <code>setInterval()</code>.</p></p><p>Often if you mention <code>setInterval()</code> to somebody, they reply one of two ways:</p><p><ol></p><li>You mean <code>setTimeout()</code>? or</li></p><li>Huh?</li></p></ol></p><p><p>I'm not sure why this is - maybe too many &quot;cut and paste&quot; scripts out there with <code>setTimeout()</code> in them. Anyway, there is a vast gulf of difference between the two, and the gulf is very simple to understand.</p></p><p><ul></p><li><code>setTimeout()</code> allows you to DELAY the execution of an expression or evaluate a function.</li></p><li><code>setInterval()</code> allows you to EVALUATE an expression or a function at set INTERVALS (thus the name - neat eh?).</li></p></ul></p><p><p>So, who cares about <code>setTimeout()</code>, we've all heard enough about that. Let's have a bash at an example.</p></p><p><h2>The Need</h2></p><p><p>Your mission, should you accept it: you have two text input boxes. When text is entered into <strong>both</strong> fields, you want to display a hidden <code>div</code>. You can't do this on the submission of the form, because the hidden <code>div</code> contains more input that has to be sent along with it. (Play along, it's just an example!)</p></p><p><p>What you need to know is when both fields have entries. (We won't worry about error checking, etc.) This is where our buddy <code>setInterval()</code> comes in.</p></p><p><h2>Our Page Code:</h2></p><p><pre></p>&lt;html&gt;</p>&lt;body&gt;</p>&lt;form id=&quot;form&quot;&gt;</p>&lt;input type=&quot;text&quot; id=&quot;text1&quot;&gt;</p>&lt;input type=&quot;text&quot; id=&quot;text2&quot;&gt;</p>&lt;div id=&quot;hidden&quot; style=&quot;display: none;&quot;&gt;&lt;input type=&quot;text&quot; id=&quot;text3&quot;&gt;&lt;/div&gt;</p>&lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt;</p>&lt;/form&gt;</p>&lt;/body&gt;</p>&lt;/html&gt;</p></pre></p><p><h2>First, Our Function</h2></p><p><p>First, we need a function to do what we want to happen when our condition is met. What it needs to do is display our hidden block:</p></p><p><pre></p>function showHiddenDiv()</p>{</p>	var textBox1 = document.getElementById(&quot;text1&quot;).value;</p>	var textBox2 = document.getElementById(&quot;text2&quot;).value;</p>	var ourDiv = document.getElementById(&quot;hidden&quot;).style;</p>	</p>	if(textBox1 != &quot;&quot; &amp;&amp; textBox2 != &quot;&quot;)</p>	{</p>		ourDiv.display = &quot;block&quot;;</p>return true;</p>	}</p>	return false;</p>}</p></pre></p><p><p>We set up some local variables to point to our two text boxes and their values (what's in them) and our hidden div's style. Then we have our condition here - if both text boxes are not equal to empty (they must both be full) we change the display style to block, and it becomes part of the page flow.</p></p><p><p>If one of the text boxes is still empty, the 'else' condition fires and we return 'false.' You don't <em>have</em> to do this, but I understand its good technique to return some value from your functions, and apparently the strict warnings in some new browsers (if you have the feature turned on) will send you a warning if you don't.</p></p><p><h2>Second, the Interval</h2></p><p><p>Now, we need to set up our interval to periodically fire off our function to do the checking or &quot;listening.&quot; The structure for the <code>setInterval()</code> method is:</p></p><p><code>var interval_name = setInterval([expression_or_function], [time_period]);</code></p><p><p>And if you use a function, it must be quoted and include the brackets. Now, you don't want to go nuts and check the thing every 10 milliseconds - consider that a Bad Thing(tm) and a performance hit. However, once per second would be fine, and once that second entry is made your hidden div should be showing.</p></p><p><h2>Our Interval Method:</h2></p><p><p><code>var ourInterval = setInterval(&quot;showHiddenDiv()&quot;, 1000);</code></p></p><p><p>That's it - that's all. Once the page is loaded, <code>showHiddenDiv()</code> will run every second until it's first condition is met, and the hidden div is shown. Great! But then what? How do you stop it? The beauty is, since you set your interval to a variable, that variable is now the id for your interval. All you need is to add the <code>clearInterval()</code> method to your function, with the variable name as its parameter. So your final function looks like this:</p></p><p><pre></p>function showHiddenDiv()</p>{</p>	var textBox1 = document.getElementById(&quot;text1&quot;).value;</p>	var textBox2 = document.getElementById(&quot;text2&quot;).value;</p>	var ourDiv = document.getElementById(&quot;hidden&quot;).style;</p>	</p>	if(textBox1 != &quot;&quot; &amp;&amp; textBox2 != &quot;&quot;)</p>	{</p>		ourDiv.display = &quot;block&quot;;</p>		clearInterval(ourInterval);</p>	}</p>	else</p>	{</p>		return false;</p>	}</p>}</p></pre></p><p><h2>Other Issues</h2></p><p><p>Of course in this case, you might have to deal with issues such as, what if the user erased one input and so forth. But that's your job. If the user reloads the page, you're golden, because your script reloads too and your interval restarts.</p></p><p><p>So tap into the power of <code>setInterval()</code> and "listen&quot; to your heart's content!</p>