---
layout: post
permalink: Defeating_the_Third_Voice_Plug_in
ratings: 1
avgrate: 4.0000
category: Code
user: Jeff Howden
real_name: "Jeff Howden"
user_biog: "<p><a href=\"http://jeffhowden.com/\" target=\"_blank\" rel=\"nofollow\">Jeff Howden</a> (.jeff) is a web developer working for <a href=\"http://vosandhowden.com/\" target=\"_blank\" title=\"opens in a new window\" rel=\"nofollow\">Vos &amp; Howden, LLC</a> in Portland, Oregon where he\'s partnered with long-time colleague, Anthony Vos. His skills include ColdFusion, JavaScript, CSS, XML, relational databases, and much, much more. His biggest professional accomplishments include, but are not limited to:</p>

<ul>
  <li>building a ColdFusion-based e-commerce solution for <a href=\"http://mtbachelor.com/\" target=\"_blank\" title=\"Visit Mt. Bachelor\'s website (opens in a new window)\" rel=\"nofollow\">Mt. Bachelor</a> that transacted over $1.62 million dollars in September 2001 with 0 (yes, that\'s zero) ColdFusion errors and then an almost completely rebuilt version transacted $2.86 million dollars in September 2002.</li>
  <li>being asked to be a Technical Editor for the ColdFusion MX book, <a href=\"http://www.amazon.com/exec/obidos/ASIN/0735713049/evoltorg02-20/\" rel=\"nofollow\" target=\"_blank\" title=\"link opens in a new window\">Inside ColdFusion MX</a> from New Rider\'s Publishing company.</li>
  <li>being asked by <a href=\"http://brainbench.com/\" rel=\"nofollow\" target=\"_blank\" title=\"link opens in a new window\">BrainBench</a> to perform quality control on their JavaScript 1.5 certification test after receiving the highest beta test score out of 200 testees.</li>
  <li>managing the server that hosts evolt.org and withstanding a slashdotting that brought over 1,000,000 hits to the site, over 10 gigs of data transfer, and an average in excess of 2300 unique visitor sessions per hour, all within a 24-hour period and the server never hiccuping once.</li>
</ul>"
user_since: 14 Dec 1998
avatar: "/images/pictures/picture-15.jpg"
article_count: 21
excerpt: " I\'ve been playing around trying to figure out how to beat this plug-in.  In my playing around, I\'ve come up with a script that will render it completely useless on any page the following JavaScript"
---
<p></p>I've been playing around trying to figure out how to beat this plug-in.  In my playing around, I've come up with a script that will render it completely useless on any page the following JavaScript is posted.</p></p></p><p></p>How Third Voice works is to append comments to specific text at a specific URL.  However, if that URL changes, the comment is no longer attached to anything relevant.  So, the trick is to make sure the URL is never the same.</p></p></p><p></p>This can be done by appending a random string to the end of the URL using the location.search object.  If the URL already has the random string appended to it, change the random string and re-append.  The trick is to get the script to not force the browser into an infinite loop.  The easiest way to do that is to use the getTime() function which returns the number of milliseconds since January 1, 1970.  Since this number is always changing, we can easily be guaranteed that the string to attach to the end of the URL is unique.  If the page is loaded with a search string already attached, we simply check to see if it is within 100,000 milliseconds from the current time string created when the page is loaded.  If it is more than 100,000 milliseconds the page is reloaded with the new time string appended.</p></p></p><p></p>Here's the script.  I've tested it on both IE4 and IE5 and it seems to work pretty well.  Have massaged it so it won't cause any errors and won't throw the browser into a loop.  Be sure to place the following script in the head section of your document of every page you want protected and you're now Thirdvoice-proof.</p></p></p><p></p><pre></p>&lt;script language=&quot;JavaScript&quot; type=&quot;text/javascript&quot;&gt;</p>&lt;!--</p>  var agt = navigator.userAgent.toLowerCase();</p>  var ie4u = ((agt.indexOf('msie') != -1) && (parseInt(navigator.appVersion) &gt;= 4));</p>  if(ie4u)</p>  {</p>    ts = new Date();</p>    ts = ts.getTime();</p>    lh = location.href;</p>    if(location.search)</p>    {</p>      ls = location.search;</p>      if(parseInt(ts) - ls.substring(1,ls.length) &gt;= '100000')</p>      {</p>        location.href = lh.substring(0,lh.indexOf('?')) + '?' + ts;</p>      }</p>    }</p>    else</p>    {</p>      location.href = lh + '?' + ts;</p>    }</p>  }</p>// --&gt;</p>&lt;/script&gt;</p></pre></p><p></p>That's all there is to it.  So, for those of you who don't care to let Third Voice ruin your creations, have at it.