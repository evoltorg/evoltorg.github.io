---
layout: post
permalink: PHP-Localization-with-TMX-standard
ratings: 4
avgrate: 4.2500
categories: [Code]
user: nicolaasuni
real_name: "Nicola Asuni"
user_biog: "<b>Nicola Asuni</b> is the founder and president of <a href=\"http://www.tecnick.com\" rel=\"nofollow\" title=\"Tecnick.com S.r.l. Web site\">Tecnick.com S.r.l.</a>, a leading provider of <a href=\"http://www.tecnick.com/public/code/cp_awards.php\" rel=\"nofollow\" title=\"Tecnick.com Awards\">award-winning</a> <a href=\"http://www.tecnick.com/public/code/cp_dpage.php?aiocp_dp=services_and_products\" rel=\"nofollow\" title=\"Tecnick.com Products\">Web Software</a>.<br />
He has been a freelance programmer since 1993 and he actively contributed to several web-related Open-Source Projects.<br />
He is the founder of <a href=\"http://www.technick.net\" rel=\"nofollow\" title=\"Sito Technick.net\">Technick.net site</a> website, since 1998 the largest connector and cable pinout archive on the web.<br />
He is also member and co-founder of <a href=\"http://www.jugsardegna.org\" rel=\"nofollow\" target=\"_blank\" title=\"JUG Sardegna Onlus\">Java User Group Sardegna Onlus</a>, and a member of <a href=\"http://www.gulch.crs4.it/\" rel=\"nofollow\" target=\"_blank\" title=\"GULCh - Gruppo Utenti Linux Cagliari\">GULCh - Gruppo Utenti Linux Cagliari</a>.<br>
<br>
For a complete <i>Curriculum Vitae</i> please browse: <a href=\"http://nicolaasuni.tecnick.com\" rel=\"nofollow\" target=\"_blank\">http://nicolaasuni.tecnick.com</a>"
user_since: 15 Jul 2003
avatar: /images/pictures/picture-61426.gif
article_count: 3
excerpt: "One of the main concerns of internationalization consists of separating the main source code from the texts, the labels, the messages and all the other objects related to the specific language in use. This article briefly explains the TMX standard and presents a simple TMX PHP bridge."
---
<ul></p>	<li><a href="/node/60511/#intro">Foreword</a></li></p>	<li><a href="/node/60511/#tmx">TMX - Translation Memory eXchange</a></p>		<ul></p>			<li><a href="/node/60511/#tm">TM - Translation Memory</a></li></p>			<li><a href="/node/60511/#lisa">LISA - Localization Industry Standards Association</a></li></p>		</ul></p>	</li></p>	<li><a href="/node/60511/#PHP">TMX PHP Bridge</a></p>		<ul></p>			<li><a href="/node/60511/#class">TMXResourceBundle.php Class</a></li></p>			<li><a href="/node/60511/#test">Testing Class (tmxtest.php)</a></li></p>		</ul></p>	</li></p>	<li><a href="/node/60511/#reference">References</a></p>	</li></p></ul><a name="intro"></a></p><p></p><h2>Foreword</h2></p><p></p>	One of the main concerns of internationalization consists of separating the main source code from the texts, the labels, the messages and all the other objects related to the specific language in use. This facilitates the translation process as such as all the resources related to the local language context are well identified and separated.</p></p></p><p></p>	In a global market the costs to translate and update the texts (including labels, messages, menu elements and so on) can easily become quite high. This is the context where the <a href="/node/60511/#tmx" title="Translation Memory eXchange">TMX</a> standard comes to help by applying to the translation and management process of these texts the concepts of reuse, increase of consistency, and the shortening of the production cycle. All this with the added bonus of cutting the development costs. </p></p></p><h2><a name="tmx"></a>TMX - Translation Memory eXchange</h2></p><p></p><a title="TMX - Translation Memory eXchange" href="http://www.lisa.org/tmx/" target="_blank">http://www.lisa.org/tmx/</a></p></p></p><p></p>	<acronym title="Translation Memory eXchange">TMX</acronym> is an open standard that uses XML for the archiving and mutual exchange of the <a href="/node/60511/#tm" title="Translation Memory">Translation Memories (TM)</a>. These memories are created by using specific translation and localization software called CAT software (Computer Aided Translation). TMX is the result of a project developed by one of the Special Interest Groups of <a href="/node/60511/#lisa" title="Localization Industry Standards Association">LISA</a>, known as OSCAR (Open Standards for Container/Content Allowing Re-use).</p></p></p><p></p>	The goal of TMX is to provide a neutral system to exchange data between different translation systems, while minimizing or eliminating the loss of critical data. The TMX format is supported by the majority of the translation software in the market today.</p></p></p><p></p>	The specifics of the TMX standard are available for free in the website <a title="TMX - Translation Memory eXchange" href="http://www.lisa.org/tmx/" target="_blank">http://www.lisa.org/tmx/</a>, together with several related links, documents, articles and software tools. </p></p></p><h3>TMX file example</h3></p><p><a href="http://www.tecnick.com/pagefiles/article_tmx/src/sample_tmx.xml" target="_blank" title="esempio di file TMX">sample_tmx.xml</a></p></p></p><pre></p>&lt;?xml version="1.0" ?&gt;</p>&lt;tmx version="1.4"&gt;</p>	&lt;header</p>		creationtool="XYZTool"</p>		creationtoolversion="1.01-023"</p>		datatype="PlainText"</p>		segtype="sentence"</p>		adminlang="en-us"</p>		srclang="EN"</p>		o-tmf="ABCTransMem"&gt;</p>	&lt;/header&gt;</p>	&lt;body&gt;</p>		&lt;tu tuid="hello" datatype="plaintext"&gt;</p>			&lt;tuv xml:lang="en"&gt;</p>				&lt;seg&gt;hello&lt;/seg&gt;</p>			&lt;/tuv&gt;</p>			&lt;tuv xml:lang="it"&gt;</p>				&lt;seg&gt;ciao&lt;/seg&gt;</p>			&lt;/tuv&gt;</p>		&lt;/tu&gt;</p>		&lt;tu tuid="world" datatype="plaintext"&gt;</p>			&lt;tuv xml:lang="en"&gt;</p>				&lt;seg&gt;world&lt;/seg&gt;</p>			&lt;/tuv&gt;</p>			&lt;tuv xml:lang="it"&gt;</p>				&lt;seg&gt;mondo&lt;/seg&gt;</p>			&lt;/tuv&gt;</p>		&lt;/tu&gt;</p>	&lt;/body&gt;</p>&lt;/tmx&gt;</p></pre></p><p><p>where:</p></p><p><dl></p>	<dt><strong>tu</strong></dt><dd><em>translation unit</em>, unit father of every element to be translated. It can contain a unique identifier (<strong>tuid</strong>).</dd></p>	<dt><strong>tuv</strong></dt><dd><em>translation unit variant</em>, unit that contains the language code of the translation (<strong>xml:lang</strong>).</dd></p>	<dt><strong>seg</strong></dt><dd><em>segment</em>, it contains the translated text.</dd></p></dl></p><p><h3><a name="tm"></a>TM - Translation Memory</h3></p><p></p><a title="TM - Translation Memory" href="http://www.opentag.com/tm.htm" target="_blank">http://www.opentag.com/tm.htm</a></p></p></p><p></p>	The Translation Memories (TM), also known as <i>Translation Database</i>, consist of a database in which the various sentences written in a reference language are linked to the associated translations in one or more languages.</p>A reference sentence together with its translations is called <i>translation memory unit</i> (record of the database).</p>The applications that use TM's are helpful tools for language translations, intended to improve the quality and the efficiency of the human translation process and not to substitute it. Whenever a new sentence is entered from the TM application, the application will search for it among the reference sentences in the database and will calculate a corresponding specific value according to the match (matching value). When the matching value is 100%, meaning exact match, the corresponding translation found in the database will be assumed to be correct and it will be directly utilized to build the translated text. When the matching value is smaller than 100% but bigger than a certain threshold (fuzzy match), the corresponding translation found in the database will be proposed to a human translator, so as to be judged and possibly corrected. For the sentences whose score falls under the threshold there will not be any proposed translation, and they will have to be entirely translated by hand. The new sentences for which a translation has been entered will be stored in the database and used for future searches.</p></p></p><p></p>	Several software houses offer complex commercial products that work similarly to these concepts. </p><a name="lisa"></a></p></p></p><h3>LISA - Localization Industry Standards Association</h3></p><a title="Localization Industry Standards Association" href="http://www.lisa.org/" target="_blank">http://www.lisa.org</a></p></p></p><p></p>	Founded in 1990, LISA is the premier no-profit worldwide organization for GILT (Globalization, Internationalization, Localization and Translation). LISA includes different subjects as individuals, businesses, associations and organizations involved in languages, technologies for languages, and standards for languages.</p></p></p><p></p>	Over 400 leading IT manufacturers and services providers, along with industry professionals representing corporations with an international business focus, have helped establish LISA's best practice guidelines and language-technology standards for enterprise globalization.</p></p></p><p></p>	LISA serves as a nexus between the many organizations engaged in helping businesses to become global enterprises. This includes customers, governments, technical and industry-specific standards organizations, research and consulting firms, language technology developers and service providers.</p></p></p><p></p>	LISA offers services in the form of standards initiatives, Special Interest Groups, conferences and training programs to provide  GILT support to businesses.</p></p></p><p></p>	LISA partners and affiliate groups include the International Organization for Standardization (ISO Liaison Category A Members of TC 37 and TC 46), The World Bank, OASIS, IDEAlliance, AIIM, The Advisory Council (TAC), Fort-Ross, &amp;euro;TTEC, the Japan Technical Communicators Association, the Society of Automotive Engineers (SAE), the European Union, the Canadian Translation Bureau, TermNet, the American Translators Association (ATA), IWIPS, F&eacute;d&eacute;ration Internationale des Traducteurs (FIT), Termium, JETRO, the Institute of Translating and Interpreting (ITI), The Unicode Consortium, OpenI18N, and other professional and trade organizations.</p></p></p><p></p>	LISA members and co-founders include some of the largest and best-known companies in the world, including Adobe, Avaya, Cisco Systems, CLS Communication, EMC, Hewlett Packard, IBM, Innodata Isogen, Fuji Xerox, Microsoft, Oracle, Nokia, Logitech, SAP, Siebel Systems, Standard Chartered Bank, FileNet, LionBridge Technologies, Lucent, Sun Microsystems, WH&amp;P, PeopleSoft, Philips Medical Systems, Rockwell Automation, The RWS Group, Xerox Corporation and Canon Research, among others.</p></p></p><p></p>	<a name="PHP"></a></p><p><h2>TMX PHP Bridge</h2></p><p>With the <a title="PHP Arrays Implementation" href="http://www.php.net/manual/en/ref.array.php" target="_blank">arrays</a>, PHP provides a useful solution for localization. Indeed, it's possible to extract the textual elements from the original source code and isolating them as array elements. An array in PHP is actually an ordered map. A map is a type that maps values to keys. This type is optimized in several ways, so you can use it as a real array, or a list (vector), hashtable (which is an implementation of a map), dictionary, collection, stack, queue and probably more. This solutions offer several advantages to the programmer but can become very complicated for the translator, especially in terms of reusability of the translation.</p></p></p><p></p>	A better option consists of the archiving of the textual resources in the exchange format <a href="/node/60511/#tmx" title="Translation Memory eXchange">TMX</a> (XML file). This enables the translators to export and import the translations to and from their preferred translation tools (there are several compatible with TMX) in a way completely independent from the programming language utilized.</p></p></p><p></p>	The best solution to implement the TMX standard in PHP applications consist of creating a bridge class so that it can directly read data from XML files complying with the TMX standard and fill a PHP array (<strong>PHP&nbsp;array&nbsp;==&gt;&nbsp;TMX file&nbsp;&lt;==&nbsp;translation&nbsp;program</strong>). This allows us to take advantage of all the aspects of the PHP arrays and to simplify the porting process toward external TMX applications.</p></p></p><p></p>	The disadvantages of this technique are mainly related to the time and the memory necessary to load the entire TMX file.</p></p></p><p></p>	With the intention to simplify our explanation, we will consider just those TMX elements necessary to translate a simple text (see <a href="http://www.tecnick.com/pagefiles/article_tmx/src/sample_tmx.xml" target="_blank" title="esempio di file TMX">sample_tmx.xml</a>):</p></p></p><p><dl></p> 	<dt><strong>tu</strong></dt></p>		<dd><em>translation unit</em>, unit father of every element to be translated. It can contain a unique identifier (<strong>tuid</strong>).</dd></p>	<dt><strong>tuv</strong></dt></p>		<dd><em>translation unit variant</em>, unit that contains the language code of the translation (<strong>xml:lang</strong>).</dd></p>	<dt><strong>seg</strong></dt></p>		<dd><em>segment</em>, it contains the translated text.</dd></p></dl></p><p><p>for example:</p></p><p><pre></p>	&lt;tu tuid="hello" datatype="plaintext"&gt;</p>		&lt;tuv xml:lang="en"&gt;</p>			&lt;seg&gt;hello&lt;/seg&gt;</p>		&lt;/tuv&gt;</p>		&lt;tuv xml:lang="it"&gt;</p>			&lt;seg&gt;ciao&lt;/seg&gt;</p>		&lt;/tuv&gt;</p>	&lt;/tu&gt;</p></pre></p>	</p> <a name="class"></a></p><p><h3>TMXResourceBundle.php Class</h3></p><p>With the constructor we specify the name and path of the file in TMX format that contains the translations and the ISO code of the reference language.</p></p></p><p></p>	Inside the class constructor we define our TMX parser using the PHP <a title="link to PHP manual" href="http://www.php.net/manual/en/ref.xml.php" target="_blank">XML Parser Functions</a> which are enabled by default, using the bundled expat library. These functions lets you create non-validating XML parsers and then define handlers for different XML events. Each XML parser also has a few parameters you can adjust.</p></p></p><p></p>	The methods <code>startElementHandler</code> and <code>endElementHandler</code> do the following: the first one sets the values of some state variables when it meets the opening of a TMX element, the second one resets the values when the closing elements occur. The state variables keep the information related to the processed TMX element.</p></p></p><p></p>	The <code>segContentHandler</code> processes character data appearing between elements in an XML document. If while processing the content of a <code>seg</code> node we find out that the value of the <code>xml:lang</code> attribute of the parent <code>tuv</code> node is the same as the <code>$language</code> parameter specified in the constructor, then the <code>segContentHandler</code> method associates the selected string to an element of the array <code>resource</code> that will be getting the value of the attribute <code>tuid</code> of the parent node <code>tu</code> as index.</p></p></p><p></p>	At the end of the parsing process, the array <code>resource</code> will be containing all the translations in the desired language, indexed by the respective identifiers (<code>tuid</code>).</p></p></p><p></p><h4>Source Code</h4></p><p><p>(<a href="http://tmxphpbridge.sourceforge.net">download the full project from Sourceforge</a>).</p></p>	</p><pre></p></p></pre></p><p></p><p></p><h3> <a name="test"></a>Testing Class (tmxtest.php)</h3></p><p></p>This class shows how to instantiate the class <code>TMXResourceBundle</code> with the example file <a href="http://www.tecnick.com/pagefiles/article_tmx/src/sample_tmx.xml" target="_blank" title="TMX example"><strong>sample_tmx.xml</strong></a>. In this example the language code (it = Italian) is explicitly specified, but it can also be obtained from a locale's information. </p></p></p><p><h4>Source Code</h4></p><p><pre></p></p></pre></p><p><hr /></p><h2><a name="reference"></a></p>References</h2></p><p><ul></p>	<li>Asuni N, "Java Localization with TMX standard" [online] 2004-10-14,  <a href="http://evolt.org/Java-Localization-with-TMX-standard">http://evolt.org/Java-Localization-with-TMX-standard</a>.</li></p>	<li>Asuni N, "TMXResourceBundle - TMX PHP Bridge" [online] 2005-01-08, <a href="http://tmxphpbridge.sourceforge.net">http://tmxphpbridge.sourceforge.net</a>.</li></p>	<li>Asuni N, "TMXResourceBundle - TMX Java Bridge" [online] 2005-01-08, <a href="http://tmxjavabridge.sourceforge.net">http://tmxjavabridge.sourceforge.net</a>.</li></p>	<li>Itagaki M, "Use XML as a Java Localization Solution" [online] 2000-11-10, <a href="http://www.ftponline.com/javapro/archives/mi0011/default.asp">http://www.ftponline.com/javapro/archives/mi0011/default.asp</a>.</li></p>	<li>O'Conner J, "Java Internationalization: Localization with ResourceBundles" [online] 1998-10-01, <a href="http://java.sun.com/developer/technicalArticles/Intl/ResourceBundles/">http://java.sun.com/developer/technicalArticles/Intl/ResourceBundles/</a>.</li></p>	<li>OSCAR - LISA, "TMX - Translation Memory eXchange" [online] 2004-10-01, <a href="http://www.lisa.org/standards/tmx">http://www.lisa.org/standards/tmx</a>.</li></p>	<li>OSCAR - LISA, "TMX 1.4b Specification" [online] 2005-03-26, <a href="http://www.lisa.org/standards/tmx/tmx.html">http://www.lisa.org/standards/tmx/tmx.html</a>.</li></p>	<li>W3C, "Extensible Markup Language (XML)" [online] 2005-08-02, <a href="http://www.w3.org/XML/">http://www.w3.org/XML/</a>.</li></p></ul></p>