---
layout: post
permalink: node/20788
ratings: 6
avgrate: 2.8333
user: Martin Tsachev
real_name: "Martin Tsachev"
user_since: 27 Jun 2001
avatar: "/images/pictures/picture-12535.jpg"
article_count: 6
excerpt: "Let the visitors of your site decide your site's colors, your sidebar's placement, and various other configurables with the help of PHP sessions.</p>Just create several style sheets and let your users decide which to use."
---
<h2>Introduction</h2></p><p>Let the visitors of your site decide your site's colors, your sidebar's placement, and various other configurables with the help of PHP sessions.</p>Just create several style sheets and let your users decide which to use.</p></p></p><h2>Configuration</h2></p><p>Because the script relies on the built-in session support in PHP a good thing to start off with (if you have access to the server) is to compile PHP with <code>--enable-trans-sid</code>, which will forward the</p>session identifier to the next script even if cookies are not available (which is the default transfer of session identifiers).</p>You will also have to make sure you've got <code>session.use_trans_sid = 1</code> in your php.ini or a</p>.htaccess file. This is the default setting, so if you haven't changed it, you should be okay.</p></p></p><h2>Let's do it</h2></p><p>First off create a simple stylesheet, named <code>common.css</code>, which will be used always, no matter which styling the user chooses. This stylesheet should set up style items which will not be configurable and it should exclude items like colors, because we want the user to be able to choose those. Then create a few stylesheets with various settings of the items you want to be configurable (like font-family, color, etc.).</p></p></p><p><!-- axed by mwarden</p><p>You are not bound to using this separation but I think colors are  what most people will</p>like or dislike in your site's design, of course you can extend it to fonts but I think most people will be</p>glad to see a sans-serif font always.</p></p></p>axed by mwarden--></p><p><h3>Sample style sheets</h3></p><p>I saved this one as <code>gray.css</code> in a directory called <code>style</code>.</p></p></p><pre></p>body {</p>        background : #ccc;</p>        color : #000;</p>}</p><p>a:link, a:visited {</p>        color : #444;</p>        background:transparent;</p>}</p><p>a:hover, a:active { /* Keep below :link and :visited */</p>        color : #666;</p>        background : transparent;</p>}</p><p>.banner {</p>        background : #aaa;</p>}</p></pre></p><p>And the following is <code>white.css</code>:</p><!-- axed by mwarden</p>, it's not 100% white as I use #eee and not #fff but it is</p>relatively whiter than the previous one.</p>--></p></p></p><pre></p>body {</p>        background : #eee;</p>        color : #000;</p>}</p><p>a:link, a:visited {</p>        color : #009;</p>        background:transparent;</p>}</p><p>a:hover, a:active { /* Keep below :link and :visited */</p>        background : #fff;</p>        color : #009;</p>}</p><p>h1, h2, h3 {</p>        color : #900;</p>}</p><p>.banner {</p>        background : #aaa;</p>}</p></pre></p><p>You may explicitely set the color of <code>h1, h2, h3</code> to <code>inherit</code> in</p><code>gray.css</code> if you want but that may present some incompatibilities.</p></p></p><p><!-- axed by mwarden</p><p>The <code>common.css</code> is not given to save some space and anyway it</p>probably won't fit your needs.</p></p></p>axed by mwarden --></p><p><h3>The PHP code</h3></p><p><strong>Note:</strong> I use PHP 4.1's collection notation. If you want to make this backward-compatible</p>just change all <code>$_*</code> variables to <code>$HTTP_*_VARS</code> in the following code.</p></p></p><pre></p>session_start();</p>if ( isset($_GET['style']) ) {</p>	session_register('style');</p>	$_SESSION['style'] = $_GET['style'];</p>}</p>if (! isset($_SESSION['style'])) {</p>	$style = 'gray';</p>} else {</p>	$style = $_SESSION['style'];</p>}</p><p>if ( isset($_GET['navbar']) ) {</p>	session_register('navbar');</p>	$_SESSION['navbar'] = ($GET['navbar'] == 'left') ? 'left' : 'right';</p>}</p>if (! isset($_SESSION['navbar']) ) {</p>	$navbar = 'right';</p>} else {</p>	$navbar = $_SESSION['navbar'];</p>}</p></pre></p><p>This code sends HTTP headers so it has to appear <strong>before</strong> any output</p>no matter from PHP or HTML. It has to be also before the document type declaration.</p>Exception is possible only when you use output buffering,</p></p></p><p>Start a session first -- which will fill in any saved variables from the previous page</p>and check if we've got a GET variable named <code>style</code>, if so register it</p>as a session variable and set it to the value of what's been passed. If the session is not registered the just</p>set a default value else get it from the session. The same is made with the <code>navbar</code> just that</p>we have only two possible values here and I used the short if-then-else form.</p></p></p><pre></p>&lt;link href="style/common.css" type="text/css" rel="stylesheet" /&gt;</p>&lt;link href="style/&lt;?php echo $style?&gt;.css" type="text/css" rel="stylesheet" /&gt;</p></pre></p><p>Above is the HTML code used to link to the style sheets. It has to be put in the <code>head</code> of</p>your HTML documents that will change colors.</p></p></p><pre></p>&lt;table border="0" summary="contents wrapper" class="wrapper"&gt;</p>&lt;tr&gt;</p><p>&lt;?php</p>function navbar() {</p>?&gt;</p>&lt;td class="banner"&gt;</p>&lt;p&gt;Select your color scheme</p>&lt;/p&gt;</p>&lt;table border="0" summary="style sheet choosing controls"&gt;</p>&lt;tr&gt;</p>&lt;td style="background : #cccccc"&gt;</p>	&lt;a href="&lt;?php echo $_SERVER['PHP_SELF']?&gt;?style=gray"</p>		title="Change the stylesheet to have a gray background"&gt;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/a&gt;&lt;/td&gt;</p>&lt;td style="background : #eeeeee"&gt;</p>	&lt;a href="&lt;?php echo $_SERVER['PHP_SELF']?&gt;?style=white"</p>		title="Change the stylesheet to have a white background"&gt;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/a&gt;&lt;/td&gt;</p>&lt;td style="background : #696969"&gt;</p>	&lt;a href="&lt;?php echo $_SERVER['PHP_SELF']?&gt;?style=charcoal"</p>		title="Change the stylesheet to have a charcoal-like background"&gt;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/a&gt;&lt;/td&gt;</p>&lt;/tr&gt;</p>&lt;/table&gt;</p>&lt;a href="somepage"&gt;Link1&lt;/a&gt;</p>&lt;a href="somepage1"&gt;Link2&lt;/a&gt;</p>&lt;/td&gt;</p><p>&lt;?php</p>}	//	end navbar()</p><p>if ( $navbar == 'left' )</p>	navbar();</p>?&gt;</p><p>&lt;td class="content"&gt;</p>Some stuff</p>&lt;/td&gt;</p><p>if ( $navbar == 'right' )</p>	navbar();</p>?&gt;</p><p>&lt;/tr&gt;</p>&lt;/table&gt;</p></pre></p><p>Above is the page wrapper. First a table is created and one row within it. The <code>navbar</code></p>function just prints some style sheet controls -- passing back a <code>style="stylesheet"</code></p>query string so that the page changes colors and other links. Basically the links to change the color will be</p>the same color as the background for the desired style sheet, and since this is set through a</p><code>style</code> attribute non-CSS browsers won't diplay it (probably causing confusion).</p></p></p><p>When all is defined check first if the navbar should be on the left. If so print it; else just continue with the</p>contents. Finally, a check if the navbar is on the right.</p></p></p><p>You can switch between left and right navbar just by passing back a</p><code>navbar=left</code> or <code>navbar=right</code> query.</p></p></p><h2>Want more</h2></p><p>An improvement could be to use cookies to make changes permament. I didn't use it as a default</p>since cookies are not required to be available, allowing more browsers to use the feature since any browser can handle query strings (which is what</p>you get with PHP sessions if cookies are unavailable).</p></p></p><p>Another thing to consider if you've got the time is to let visitors write their</p>own style sheet. But remember that cookies are limited by size.</p></p>