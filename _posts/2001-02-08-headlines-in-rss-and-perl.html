---
layout: post
permalink: node/5535
ratings: 6
avgrate: 4.1667
category: Code
user: morbus
real_name: "Morbus Iff"
user_since: 01 Oct 2000
avatar: ""
article_count: 2
excerpt: "Eyeballs are wonderfully important commodities to a website. Once they're at your site, you can treat them with the reverence reserved for royalty. One way of getting eyeballs to your site is by allowing your headlines to be placed on other sites or portals. The easiest, and most popular, way to do "
---
<p>Eyeballs are wonderfully important commodities to a website. Once</p>they're at your site, you can treat them with the reverence reserved for</p>royalty (what an awesome amount of alliteration, eh?). One way of</p>getting eyeballs to your site is by allowing your headlines to be placed</p>on other sites or portals. The easiest, and most popular, way to do this</p>is through RSS, a syndication format originally implemented by Netscape,</p>and then collectively improved upon by Dave Winer and Netscape.</p></p><p><p>With Perl and some easily downloadable modules from CPAN, you can</p>quickly implement your own headlines in RSS.</p></p><p><h2>What You'll Need</h2></p><ul><li>Perl 5 or above.</li></p><li>XML::RSS (available from <a href="http://www.cpan.org/" target="_new">cpan.org</a>)</li></p><li>The ability to run CGI scripts.</li></ul></p><p><h2>Creating Your Own RSS File</h2></p><p><p>Below, we'll go through the simple code needed to create your</p>own headlines in RSS. I'm going to assume that you already have an</p>html document which contains your headlines for viewing through</p>a browser. Using the fun text manipulation available in perl, we'll</p>parse through that html file, and place the headlines into a RSS </p>data structure. Finally, we'll save the file.</p></p><p><pre></p>#!/usr/bin/perl -wT</p><p># Here, we're calling two modules or additions to Perl. The first one we</p># installed on the server specifically for this occasion, but 'use</p># strict' is a helpful little addition if you want to write good code.</p># It catches a lot of the human idiocy that plagues horrible programs.</p>use XML::RSS;</p>use strict;</p><p># create some variables near the top of the script so we don't</p># have to search through the script later to change them.</p>my $headlines_file = &quot;/path/to/headlines.html&quot;;</p>my $rss_output = &quot;/path/to/headlines.rss&quot;;</p><p># we create a new rss object.</p>my $rss = new XML::RSS (version =&gt; '0.9');</p><p># these are just little descriptive elements of the RSS channel we're </p># about to make. we add them to the $rss object we made above.</p>$rss-&gt;channel(title =&gt; &quot;Your Site Name&quot;,</p>              link =&gt; &quot;http://www.yoursitename.com/&quot;,</p>              description =&gt; &quot;Headlines from Your Site Name!&quot;,</p>             );</p><p># we open the file with our headlines in it.</p>open(FILE, &quot;&lt;$headlines_file&quot;) or die &quot;Couldn't open $headlines_file: $!&quot;;</p><p># a traditional while loop. for each line of our $headlines_file</p># we start looking for markers within the code that tell us a</p># headline is coming. in this example, we're assuming that headlines</p># follow html like &lt;h2&gt;&lt;a href=&quot;link&quot;&gt;headline&lt;/a&gt;&lt;/h2&gt;.</p>while (&lt;FILE&gt;) {</p><p>   # look in the current line to see if our headline is in there.</p>   if ($_ =~ /&lt;h2&gt;&lt;a href=\&quot;.*\&quot;&gt;.*&lt;\/a&gt;&lt;\/h2&gt;/) {</p><p>      # if it is, then we grab the link and headline.</p>      my ($link, $headline) = /&lt;h2&gt;&lt;a href=\&quot;(.*)\&quot;&gt;(.*)&lt;\/a&gt;&lt;\/h2&gt;/i;</p><p>      # if both $link and $headline were created, then we</p>      # add them to the $rss object using the add_item feature</p>      # of XML::RSS.</p>      if ($link and $headline) {</p>         $rss-&gt;add_item(title=&gt;$headline, link=&gt;$link );</p>      }</p><p>      # move on to our next line.</p>      next;</p>   }</p>}</p><p># if we're this far, we've finished our file.</p>close(FILE);</p><p># finally, save the rss file.</p>$rss-&gt;save($rss_output);</p><p># and quit.</p>exit;</p></pre></p><p><h2>The Output</h2></p><p><p>Running this script on this document (using some dummy links to </p>fake some pages) created the following RSS file:</p></p><p><pre></p>&lt;?xml version=&quot;1.0&quot;?&gt;</p><p>&lt;rdf:RDF</p>xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</p>xmlns=&quot;http://my.netscape.com/rdf/simple/0.9/&quot;&gt;</p><p>&lt;channel&gt;</p>&lt;title&gt;Your Site Name&lt;/title&gt;</p>&lt;link&gt;http://www.yoursitename.com/&lt;/link&gt;</p>&lt;description&gt;Headlines from Your Site Name!&lt;/description&gt;</p>&lt;/channel&gt;</p><p>&lt;item&gt;</p>&lt;title&gt;What You'll Need&lt;/title&gt;</p>&lt;link&gt;what_you'll_need.html&lt;/link&gt;</p>&lt;/item&gt;</p><p>&lt;item&gt;</p>&lt;title&gt;Creating Your Own RSS File&lt;/title&gt;</p>&lt;link&gt;creating_your_own_rss.html&lt;/link&gt;</p>&lt;/item&gt;</p><p>&lt;item&gt;</p>&lt;title&gt;The Output&lt;/title&gt;</p>&lt;link&gt;the_output.html&lt;/link&gt;</p>&lt;/item&gt;</p><p>&lt;item&gt;</p>&lt;title&gt;Conclusion&lt;/title&gt;</p>&lt;link&gt;conclusion.html&lt;/link&gt;</p>&lt;/item&gt;</p><p>&lt;/rdf:RDF&gt;</p></pre></p><p><h2>Conclusion</h2></p><p><p>That's all there is to it, really. After customizing the headline / link</p>searching code above to your own needs, it's a simple matter of running this</p>script whenever your headlines are updated (some people like setting up an</p>hourly <a href="http://www.evolt.org/article/Cron_a_regular_workhorse/18/125/index.html" target="_new">cron</a>).</p>The above explanation is really a more verbose version of what's already</p>contained within the <a href="http://search.cpan.org/doc/EISEN/XML-RSS-0.95/RSS.pm" target="_new">XML::RSS documentation</a>.</p>If you're looking to output a different version of RSS or read in other</p>people's headlines, I heartily suggest examination of the documentation