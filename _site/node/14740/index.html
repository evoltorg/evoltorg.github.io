<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Database Access With Php</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">evolt.org</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Database Access With Php</h2>
<p class="meta">10 Aug 2001</p>

<div class="post">
<p>\nOne of the best things about PHP is its built in functions for database access. In this post, I will provide some examples on how to access a MySQL database using PHP. My free PHP host allows MySQL databases, so this came in very handy while trying my hand at PHP (I was a seasoned ASP programmer...ah...those good old days). I won't comment general code syntax, but will highlight database specific portions. For PHP help, try one of the many PHP sites on the 'net. The big mamma is of course <a href="http://www.php.net" title="PHP Home Page">http://www.php.net.</a> Before I let you in on the code, let me explain what this code does. It was designed for a gateway for a link library. The table in my database is called links, and I query it for a short description and links to the site. This way, I can create a link repository and categorize the sites. The table has the following fields : siteID, siteDescription, siteTitle, siteLink, siteLogo, all VARCHAR32 types. Now, without further delay on to the code!\n</p>\n<p>\n<pre>\n/* --- [ PHP Database Connection Code         ]---\n   --- [ Copyright (C) Mohammad Burhan Khalid ]---\n   --- [ Data Dictionary ] ---\n   \n   $_host = path your your MySQL server\n   $_user = your user name (duh)\n   $_pwd = your password (duh)\n   $_db = the database name you want to connect to\n   $handle = returns a "handle" to your database.\n           we will use this to check the status of the\n           connection</p><p>   $strDestination = the "siteID" for the site that we want to lookup. I passed it as a parameter to the gateway page. \n           Something like test.php?destination=ms</p><p>*/\n   </p><p>$_host="database.mysite.com";\n$_user="admin";\n$_pwd="";\n$_db="siteDB";\n$handle = mysql_connect($_host,$_user,$_pwd);</p><p>if ($handle) { $errorCode=""; }\nelse { $errorCode="Can't Open Database ".$_db." ]";}</p><p>mysql_select_db($_db);\n$strDestination=$HTTP_GET_VARS["destination"];\n$strQuery = "SELECT * FROM links where siteID LIKE '".$strDestination."'";\n$intQID = mysql_db_query($_db, $strQuery);\n$QueryResult = mysql_fetch_assoc($intQID);\n   $siteTitle = $QueryResult["siteTitle"];\n   $siteDescription = $QueryResult["siteDescription"];\n   $siteLogo = $QueryResult["siteLogo"];\n   $siteLink = $QueryResult["siteLink"];\nmysql_close($handle);\n</pre>\n</p>\n<p>\nNow on to the explanation!<br>\n<code>mysql_select_db($_db);</code><br>\nThis line selects the database that you want to work with in MySQL. Takes a parameter of type string (but since all parameters in PHP are variant till runtime, all you need is a set of quotes around your variable. Ours was $_db).\n</p>\n<p>\n<code>$intQID = mysql_db_query($_db, $strQuery);</code><br>\nThis little snippet does all the magic. It excutes the query and returns a handle (type int) to your query.\n</p>\n<p>\n<code>$QueryResult = mysql_fetch_assoc($intQID);</code><br>\nI used this function to return the results of the query as an associative array. Used the "handle" returned by the <code> mysql_fetch_assoc()</code> function.\n</p>\n<p>\n<code>$siteTitle = $QueryResult["siteTitle"];</code><br>\nThis is a way to get the results from the table name. You can use numeric identifiers also, ie <code>$QueryResult[0];</code>. Nothing too fancy here, just getting elements from an array.\n</p>\n<p>\n<code>mysql_close($handle);</code><br>\nAfter we are done, its always nice to close our connection. We use the same "handle" that was returned when we opened the connection.\n</p>\n<p>\nThis is a <em>very</em> simplified way to connect to a MySQL database. Leave me your comments, and I might write a more advanced (say, looping through the fields, search for records, paginate, etc.) tutorials.\n</p>\n<p>\nLeave me feedback, or email me with your comments.\n</p>
</div>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
