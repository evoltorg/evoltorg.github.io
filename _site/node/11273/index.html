<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Easy Content Rearrangement With Javascript</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">evolt.org</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Easy Content Rearrangement With Javascript</h2>
<p class="meta">28 Jun 2001</p>

<div class="post">
<p>With <a href="http://evolt.org/article/Your_clients_need_a_Content_Management_System/20/5127/index.html" title="Your clients need a Content Management System">Content Management Systems</a> currently such a hot topic, here's an easy addition to a custom-built solution which enables any administrator to re-order content using only a browser. One serious strength is that knowledge of HTML is not required by the administrator in question. If you can click some arrow buttons, and whack "update", you can manage this once it's in place.</p></p><p><p>This is an idea for anyone to use in any way. You may like to implement this to allow your clients to reorder their own links, or to allow ANY visitor to your site to modify the order of a listing, or submit their top 10 books, etc. If you use this code to do something interesting, or have already done something similar in the past, be sure to submit a comment at the bottom of the article.</p></p><p><p>(Stay tuned for a working example of this...)</p></p><p><p>Let's imagine a set of links:</p></p><p><ul>\n<li>Home</li>\n<li>About Us</li>\n<li>Services</li>\n<li>Products</li>\n<li>Testimonials</li>\n<li>Contact</li>\n</ul></p><p><p>Add a client who wants things reordered. Say, throwing "Services" below "Products", or "Testimonials" above "Services". If this is included in your site shell via a display template, then such a simple change would require editing and uploading of the revised template. Personally, I think this is somewhat of an unnecessary pain. This is a task, however, that can be easily undertaken by the client themselves.</p></p><p><p>In a simple content module of a database-driven web site, your database table CONTENT might have the columns contentid, contenttitle, contentlinkname, contentbody, contentdate, etc. You'd probably pull the data with SQL like this:</p></p><p><blockquote>\nselect contentid, contentname\nfrom content;\n</blockquote></p><p><p>And if you were using ColdFusion, for example, your output code would look something like this:</p></p><p><blockquote>\n&lt;cfoutput query="queryname"&gt;<br />\n&lt;a href="#attributes.scriptname#/#contentid#/"<br /> title="#contentname#"&gt;#contentname#&lt;/a&gt;&lt;br&gt;<br />\n&lt;/cfoutput&gt;\n</blockquote></p><p><p>and your output itself might resemble this:</p></p><p><blockquote>&lt;a href="index.cfm/4/ title="Home"&gt;Home&lt;/a&gt;<br />\n&lt;a href=" index.cfm/3/ title="About Us"&gt;About Us&lt;/a&gt;<br />\n&lt;a href=" index.cfm/5/ title="Services"&gt;Services&lt;/a&gt;<br />\n&lt;a href=" index.cfm/2/ title="Products"&gt;Products&lt;/a&gt;</blockquote></p><p>\n<p>Adding a numeric column contentseq to your CONTENT table gives you the chance to enable rearrangement from the browser. The contentid column remains as your primary key, and the contentseq is changed with each rearrangement to order your content (1 being the first, perhaps 6 being your last). Your SQL select would have two small changes - adding contentseq to the select part, and adding an order by statement:</p></p><p><blockquote>\nselect contentid, contentname, contentseq<br />\nfrom content<br />\norder by contentseq;\n</blockquote></p><p><p>Then you'd need some templates - a section to grab the current content and its ordering from the database, and display it in a select box manipulated by JavaScript, and another section to update the database with the revised values. Download this <a href="http://www.triplezero.com.au/isaac/evolt/rearrange/rearrange.zip" title="zipped code" target="_blank">zip file</a> which includes the files and code you'll need to get started.</p></p><p><p>The select box section can be found in rearrange.cfm (the JavaScript is by <a href="http://evolt.org/user/r937/20/index.html" target="_blank" title="visit the evolt.org member page of r937">r937</a> - you can thank him by reading some of <a href="http://evolt.org/user/r937/20/index.html" target="_blank" title="visit the evolt.org member page of r937">his articles</a>). You can see a <a href="http://www.triplezero.com.au/isaac/evolt/rearrange/display.cfm" title="Simple demonstration (doesn't read from or write to a database)" target="_blank">simple demonstration</a> of this JavaScript online (doesn't read from or write to a database).</p></p><p><pre>\n&lt;script&gt;\nfunction move(foo,way) { j=-1; menuLen=foo.length; \nif (way=='up') { lim=0; m=-1 } else { lim=menuLen-1; m=1 };\nfor (i=0;i&lt;menuLen;i++) if (foo.options[i].selected) { j=i; i=menuLen; }\nif (j==-1) alert('You have nothing selected.'); else if (j==lim) alert('You can\'t go '+way+' any further.') \nelse { k=j+m; tempt=foo.options[k].text; tempv=foo.options[k].value; \nfoo.options[k].text=foo.options[j].text\nfoo.options[k].value=foo.options[j].value\nfoo.options[j].text=tempt;   foo.options[j].value=tempv; \nfoo.options[j].selected=false; \nfoo.options[k].selected=true; } }\nfunction showMenu(foo) { temp=''; menuLen=foo.length; comma=''\nfor (i=0;i&lt;menuLen;i++) { j=i+1; temp += comma + foo.options[i].value; comma=',' }\ndocument.theForm.theResults.value=temp\n}\n&lt;/script&gt;</p><p>&lt;cfoutput&gt;&lt;form name=theForm \n action=&quot;change.cfm&quot; method=&quot;post&quot;\n onSubmit=&quot;showMenu(document.theForm.theMenu)&quot;&gt;&lt;/cfoutput&gt;</p><p>&lt;p&gt;&lt;a href=&quot;javascript:move(document.theForm.theMenu,'up')&quot;&gt;up&lt;/a&gt;&lt;/p&gt;</p><p>&lt;cfoutput&gt;&lt;input type=hidden name=theCount value=&quot;#getcontent.recordcount#&quot;&gt;&lt;/cfoutput&gt;\n&lt;input type=hidden name=theResults value=&quot;&quot;&gt;</p><p>&lt;p&gt;&lt;cfoutput&gt;&lt;select name=&quot;theMenu&quot; size=&quot;#getcontent.recordcount#&quot;&gt;&lt;/cfoutput&gt;\n&lt;cfoutput query=getcontent&gt;\n&lt;option value=&quot;#contentid#&quot;&gt;#contentseq# - #contentname#&lt;/option&gt;\n&lt;/cfoutput&gt;&lt;/select&gt;&lt;/p&gt;</p><p>&lt;p&gt;&lt;a href=&quot;javascript:move(document.theForm.theMenu,'down')&quot;&gt;down&lt;/a&gt;&lt;/p&gt;</p><p>&lt;p&gt;&lt;input type=submit name=submit value=&quot;rearrange&quot;&gt;&lt;/p&gt;\n&lt;/form&gt;\n</pre></p><p><p>And the code to update the database is in change.cfm:</p></p><p><pre>\n&lt;cfloop index=&quot;loopitem&quot; from=&quot;1&quot; to=&quot;#form.thecount#&quot; step=&quot;1&quot;&gt;\n&lt;cfquery name=changesequence datasource=&quot;#db#&quot;&gt;\nupdate content\nset contentseq = #loopitem#\nwhere contentid = #listgetat(theresults, loopitem)#\n&lt;/cfquery&gt;\n&lt;/cfloop&gt;\n</pre></p><p><p>Once a system similar to this is in place, a client could make the aforementioned changes themselves. It'd just be a matter of logging in with appropriate privileges, perhaps choosing "Rearrange Content", use the arrow buttons to relocate content, and then click "rearrange".</p></p><p><p>An alternative use for this concept could be within a portfolio. Login and rearrange your projects to place the better ones at the top where they are more likely to be seen.</p></p><p><p>If you've got any other ideas, revised code, etc, I encourage you to add your thoughts to this article via a comment.</p></p><p>\n<p><a href="mailto:isaac@triplezero.com.au" title="Email the author">isaac</a><br />\n<a href=http://www.triplezero.com.au/ target="_blank" title="Triple Zero Digital">www.triplezero.com.au</a></p>
</div>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
