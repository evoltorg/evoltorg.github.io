<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Dynamic Option Items In Dropdown Lists Using Javascript</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">evolt.org</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Dynamic Option Items In Dropdown Lists Using Javascript</h2>
<p class="meta">12 Mar 2007</p>

<div class="post">
<br><br><h2>Introduction:</h2><br><br></p><p>This article is about dynamic drop down lists where the list items will come from the database. This is a case where the all the drop down lists have the same option items (from database), and the user need to select different values for different drop down lists. For example suppose in a form there are three Preference fields (1st preference, 2nd preference, 3rd preference), in this case all the preference items are same. So it would be nice if the value selected for the 1st preference will not be shown in the drop down list of 2nd and 3rd preference and the same will happen while selecting the 2nd and 3rd preference.<br>\nBased on the value of the first drop down list box the option values of the second drop down list box can be changed dynamically. This is a widely used functionality in forms to narrow down the second html list based on the first list selection.\nIn one of my project I came through the same situation as described above, where there are three dropdown lists (Preferences), all having the same option values(from Database). The requirement is that the option item selected for 1st preference is not to be shown in other two dropdown lists (Preferences) and the same will happen while selecting the 2nd and 3rd preference. This implies that the user can't select the same preference (Option item) twice. I have used JavaScript to do the same.</p><p><br><br><h2>Technical Aspects: </h2><br><br></p><p>To develop this functionality I have used JavaScript to use it in client side. We can achieve the same by using some server side scripting language like PHP also. If we will create dynamic list box using server side script then the data on selection of the first drop down list has to travel back to server and return. Some time this is not a good choice if the user is in slow internet connection. <br>\nNow the functionality requires that an option item need to be removed from a drop down list and also the same option item need to be added further based on the value of the other dropdown lists. This requires that we should have a variable that contains all the option items. As all option values in dropdown lists will come from database, we need to have a special hidden object in HTML that will store all the option items. For that I have used another dropdown list which will have the same option text and option values for option items as other dropdown lists, but this will not be shown in the output as its display property has been set to none. So now it will be a hidden object in html.\n \n<br><br><h2>Add/Delete option items from dropdown list in JavaScript<h2><br><br></p><p>First we need to learn how to add an option item to a drop down list using JavaScript, and here is the code:</p><p><pre>\nvar optn = document.createElement (&quot;OPTION&quot;);\noptn.text = &quot;anyText&quot;;\noptn.value = optionValue;\nlistName.options [index] = optn;\n</pre></p><p>Now we need to know how to remove all the option items from a value list using JavaScript, and here is the function to remove all the option items:\n<pre>\nfunction removeAllOptions (selectbox)\n{\n    var count;\n    for (count = 0 ; count &lt; selectbox.options.length ; count++){\n    selectbox.remove (count);\n    }\n}\n</pre></p><p><br><br><h2>Case-1(For two dropdown lists)</h2><br><br></p><p>Check the code below:\n<pre>\n................\n................\n&#60;select name="allOptions" style="display:none"&#62;				</p><p>&#60;option    value=""&#62;select...&#60;/option&#62;\n<?php\nforeach ($optionData as $key => $value){\necho"<option value=".$value.">".$value."</option>";\n}\n?>	\n&#60;/select&#62;\n&#60;select name="preference1" <code>onChange</code>=<code>"dynamicOption(preference1 , preference2 , allOptions)"</code> &#62;\n&#60;option value=""&#62;select...&#60;/option&#62;\n<?php\nforeach ($optionData as $key => $value){\necho"<option value=".$value.">".$value."</option>";\n}\n?>\n&#60;/select&#62;\n&#60;select name="preference2" <code>onChange</code>=<code>"dynamicOption(preference2 , preference1 , allOptions)"</code> &#62;\n&#60;option value=""&#62;select...&#60;/option&#62;\n<?php\nforeach ($optionData as $key => $value){\necho"<option value=".$value.">".$value."</option>";\n}\n?>\n&#60;/select&#62;\n................\n................\n</pre>\nThe above code will display two dropdown lists, also there is another dropdown list(allOptions) which is defined to have the same values for option items as other two dropdown lists(preference1 & preference2), but it will be hidden as its style property is set as style=&quot;display:none&quot;. \nThe JavaScript function &quot;dynamicOption()&quot; is called for the two dropdown lists(preference1 & preference2) in the onChange event. The function is defined as below:</p><p><pre>\n&lt;SCRIPT language=&quot;JavaScript&quot;&gt;\nfunction dynamicOption(Pref1 , Pref2 , AllOptions) {\n            var count;\n            var val = Pref2.value;\n            removeAllOptions(Pref2);\n            for(count = 0 ; count &lt; AllOptions.options.length; count++){\n            var optn = document.createElement(&quot;OPTION&quot;);\n            optn.text = AllOptions[count].text;\n            optn.value = AllOptions[count].value;\n            Pref2.options[count] = optn;\n            }\n            if(Pref1.value != &quot;&quot;){\n                for(count = AllOptions.options.length-1 ; count&gt;= 0; count--){\n                if(AllOptions[count].value == Pref1.value)\n                    Pref2.remove(count)\n                }\n            }\n            for(count = 0 ; count &lt; Pref2.options.length; count++){\n                if(Pref2[count].value == val){\n                    Pref2.options[count].selected = true;\n                        break;\n                }\n            }\n}</p><p>&lt;/SCRIPT&gt;</p><p></pre>\nThe above script is for two preference lists where the value selected for one list is not to be there in the option values of the other list. \nSo when ever the value in any dropdown list changes the above script is called, and the script is doing the following steps:<br>\n1. The script first stores the value of the 2nd list in a variable.<br>\n2. Then removes all the option items from the 2nd list by using removeAllOptions which is defined above, and adds the options from the hidden object (allOptions) except the option item which is selected for the 1st list.<br>\n3. The value of the 2nd list is set to its old value.<br></p><p><br><br><h2>Case-2(For three dropdown lists): </h2><br><br></p><p>Now suppose there are three dropdown lists where we want to add the above functionality.<br>\nSo we will have the codes as below:\n<pre>\n................\n................\n&#60;select name="allOptions" style="display:none"&#62;				</p><p>&#60;option    value=""&#62;select...&#60;/option&#62;\n<?php\nforeach ($optionData as $key => $value){\necho"<option value=".$value.">".$value."</option>";\n}\n?>	\n&#60;/select&#62;\n&#60;select name="preference1" <code>onChange</code>=<code>"dynamicOption(preference1 , preference2 , preference3 , allOptions)"</code> &#62;\n&#60;option value=""&#62;select...&#60;/option&#62;\n<?php\nforeach ($optionData as $key => $value){\necho"<option value=".$value.">".$value."</option>";\n}\n?>\n&#60;/select&#62;\n&#60;select name="preference2" <code>onChange</code>=<code>"dynamicOption(preference2 , preference3 , preference1 , allOptions)"</code> &#62;\n&#60;option value=""&#62;select...&#60;/option&#62;\n<?php\nforeach ($optionData as $key => $value){\necho"<option value=".$value.">".$value."</option>";\n}\n?>\n&#60;/select&#62;\n&#60;select name="preference3" <code>onChange</code>=<code>"dynamicOption(preference3 , preference1 , preference2 , allOptions)"</code> &#62;\n&#60;option value=""&#62;select...&#60;/option&#62;\n<?php\nforeach ($optionData as $key => $value){\necho"<option value=".$value.">".$value."</option>";\n}\n?>\n&#60;/select&#62;\n................\n................\n</pre></p><p>Above code has three dropdown lists having same option items, also there is another dropdown list(allOptions) which is defined to have the same values for option items as others, but it will be hidden as its style property is set as style=&#34;display:none&#34;.<br></p><p>	<p>The JavaScript function &#34;dynamicOption()&#34; is called for the three dropdown lists (preference1, preference2 & preference3) in the onChange event. The function is defined as below:</p></p><p><pre>\nfunction dynamicOption(pref1 , pref2 , pref3 , AllOptions) {\n        var index1 = 0;\n        var index2 = 0;\n        var count;\n        var val1 = pref1.value;\n        var val2 = pref2.value;\n        var val3 = pref3.value;\n        removeAllOptions(pref2);\n        removeAllOptions(pref3);\n        for(count = 0 ; count &lt; AllOptions.options.length; count++){\n            var optn = document.createElement(&quot;OPTION&quot;);\n            optn.text = AllOptions[count].text;\n            optn.value = AllOptions[count].value;\n            pref2.options[count] = optn;\n        }</p><p>        for(count = 0 ; count &lt; AllOptions.options.length; count++){\n            var optn1 = document.createElement(&quot;OPTION&quot;);\n            optn1.text = AllOptions[count].text;\n            optn1.value = AllOptions[count].value;\n            pref3.options[count] = optn1;\n        }</p><p> //remove from pref2</p><p>        if(val1 != &quot;&quot;){\n            for(index1 = 0 ; index1 &lt; AllOptions.options.length; index1++){\n                if(AllOptions[index1].value == val1){\n                    pref2.remove(index1);\n                    break;\n                }\n            }\n        }\n            if(val3 != &quot;&quot;){\n                for(index2 = 0 ; index2 &lt; AllOptions.options.length; index2++){\n                    if(AllOptions[index2].value == val3){\n                        if(index1 &lt; index2 && index1 &gt; 0)\n                            pref2.remove(index2-1);\n                        else\n                            pref2.remove(index2);\n                    }\n                }\n            }</p><p>    </p><p>//for pref3</p><p>            if(val2 != &quot;&quot;){\n                for(index1 = 0 ; index1 &lt; AllOptions.options.length; index1++){\n                    if(AllOptions[index1].value == val2){\n                        pref3.remove(index1);\n                        break;\n                    }\n                }\n            }</p><p>            if(val1 != &quot;&quot;){\n                for(index2 = 0 ; index2 &lt; AllOptions.options.length; index2++){\n                    if(AllOptions[index2].value == val1){\n                        if(index1 &lt; index2 && index1 &gt; 0)\n                            pref3.remove(index2-1);\n                        else\n                            pref3.remove(index2);\n                    }\n                }\n            }\n            for(index1 = 0 ; index1 &lt; pref2.options.length; index1++){\n                if(pref2[index1].value == val2){\n                    pref2.options[index1].selected = true;\n                    break;\n                }\n            }\n            for(index2 = 0 ; index2 &lt; pref3.options.length; index2++){\n                if(pref3[index2].value == val3){\n                    pref3.options[index2].selected = true;\n                    break;\n                }\n            }\n}\n</pre>\nThe above script is for three preference lists where the value selected for one list is not to be there in the option values of the other two lists. When ever the value in any dropdown list changes the above script is called, and the script is doing the following steps:<br>\n1. The script first stores the value selected for all three lists in variables.<br>\n2. Then removes all the option items from the 2nd & 3rd list, and adds the options from the hidden object (allOptions) except the option item which is selected for the 1st list.<br> \n3. In this case we need to remove the option item which is selected in the 3rd list from the 2nd list and the option item which is selected in the 2nd list from the 3rd list, which is done in the above script.<br> \n4. The value for the 2nd list and 3rd list is set to their old values.<br> </p><p><br><br><h2>Conclusion</h2><br><br>\nThough above functionality can be achieved in many ways, but I find this one as the most efficient way to achieve the same. But to make this script work the JavaScript must be enabled at client side. Also this code is supported by almost all browsers (Mac & Windows).</p><p><br><br>Regards<br>\nJyotirmaya Dehury<br>\nMindfire Solutions(<a href="www.mindfiresolutions.com">www.mindfiresolutions.com</a>)\n
</div>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
