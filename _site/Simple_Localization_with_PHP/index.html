<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Simple Localization With Php</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">evolt.org</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Simple Localization With Php</h2>
<p class="meta">06 Jan 2003</p>

<div class="post">
<ul>\n	<li><a href="/Simple_Localization_with_PHP#top">Simple Localization with PHP</a></li>\n	<li><a href="/Simple_Localization_with_PHP#setstringlisting">Listing setstring</a></li>\n	<li><a href="/Simple_Localization_with_PHP#howitworks">How it Works</a></li>\n	<li><a href="/Simple_Localization_with_PHP#extendingsetstring">Extending setstring</a></li>\n	<li><a href="/Simple_Localization_with_PHP#versionshistory">Versions History</a></li>\n	<li><a href="/Simple_Localization_with_PHP#requirements">Requirements</a></li>\n	<li><a href="/Simple_Localization_with_PHP#download">Download</a></li>\n</ul></p><p><p>\nOn PHP DevCenter, <a href="/Simple_Localization_with_PHP#note1" title="Note 1">Adam Trachtenberg</a> and <a href="/Simple_Localization_with_PHP#note2" title="Note 2">Joao Prado Maia</a> have described interesting ways to localize web sites with PHP. In this article I've offered another alternative, which should be easy for non-programmers to use.  We will take advantage of the user function <code>setstring</code> function:\n</p></p><p><code>\nsetstring ( $lang, $string, [$lang, $string])\n</code></p><p><p>\nHere's a working example of a login page in French and English, which could easily be turned into a template:\n</p></p><p><h2><a name="loginpage">Example 1: The Login Page</a></h2></p><p><a href="http://scriptdigital.com/divers/evolt_example1.html" name="http://scriptdigital.com/divers/evolt_example1.html" target="_blank" title="Opens in a new window">Example 1</a></p><p><h3><a name="htmlsource">The HTML Source of the Login Page</a></h3></p><p><pre>\n&lt;? include_once ("./setstring.inc") ?&gt;</p><p>&lt;?= "&lt;a href='" . $PHP_SELF . "?lang=fr'&gt;Fran&ccedil;ais&lt;/a&gt;" ?&gt;  \n&lt;?= "&lt;a href='" . $PHP_SELF . "?lang=en'&gt;English&lt;/a&gt;" ?&gt;  \n&lt;?= "&lt;a href='" . $PHP_SELF . "?logoff=1'&gt;Logoff&lt;/a&gt;" ?&gt;</p><p>&lt;form method="post" action="&lt;?=$PHP_SELF?&gt;"&gt;\n    &lt;p&gt;\n        &lt;b&gt;&lt;?=setstring ( 'fr', 'Enregistrement requis', 'en', 'Login required')?&gt;&lt;/b&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;?=setstring ('fr', 'Nom de login:', 'en', 'Login')?&gt;&lt;br&gt;&lt;input type="text" name="uid" size="8"&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;?=setstring ( 'fr', 'Mot de passe:', 'en', 'Password')?&gt;&lt;br&gt;&lt;input type="password" name="pwd" size="8"&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;input type="submit" name="processlogin" value=" &lt;?= setstring ( 'fr', 'Confirmer', 'en', 'Submit') ?&gt; "&gt;\n    &lt;/p&gt;\n&lt;/form&gt;\n</pre></p><p><p>\nAs you can see, this simple function can be useful when you don't want a <a href="http://scriptdigital.com/divers/images/multilingues.jpg" target="_blank" title="Opens in a new window">web interface</a> for non-programmers to manage different language versions (which the two articles cited above imply). This is ideal in situations where you don't need to display a large amount of content, as is the case of the login page example. (Well, this is not completely accurate as we will see later.)\n</p></p><p><p>\nThe setstring function is easy to manage.  It uses session variables to maintain the language preference of the user, and possibly a cookie to maintain state after the session finishes.  Let's look at the code now, and I'll explain it in detail below.\n</p></p><p><h3><a name="setstringlisting">The setstring Listing</a></h3></p><p><pre>\n####################################\n# setstring.inc - Version 1.0 - December 19 2002\n# Copyright: Emmanuel M. Decarie - emm@scriptdigital.com - http://scriptdigital.com\n# BSD License\n# READ ME: http://www.scriptdigital.com/divers/phplocalization.html\n# $Date: 2002/12/19 20:44:01 $ - $RCSfile: setstring.inc,v $ - $Revision: 1.2 $\n####################################</p><p>\n# start the session\nsession_start ();</p><p># Set the default language.\n$defaultlanguage = "fr";</p><p>\n# Set to 1 if you want to use a cookie.\n$use_cookie = 1;</p><p># Cookie expiration.\n$expire_cookie = 3600 * 24 * 2; /* 2 days */\n  </p><p>\n# Set $getlang to the requested key for the language if a GET arg 'lang' exists.\n$getlang = $_GET['lang'];\n \n# Set a cookie to the GET arg 'lang' if it exists.\n# Set the SESSION key 'lang' to the 'lang' value of the cookie if it exits.\nif ( $use_cookie == 1 ) {</p><p> 	if ( isset ($getlang) ) {\n 		setcookie ('lang', $getlang, expire_cookie);\n 	}\n  	\n 	if ( isset ($_COOKIE['lang']) ) {\n 		$_SESSION['lang'] = $_COOKIE['lang'];</p><p>  	}\n }\n  \n# Destroy session and cookie.\nif ( isset ($_GET['logoff']) ) {\n 	session_destroy ();</p><p> 	if ( $use_cookie == 1 ) { setcookie ('lang',$getlang, -3600); }\n 	header ("Location: http://" . $_SERVER['HTTP_HOST'] . "/" . $PHP_SELF);\n }</p><p> # The main routine.</p><p> function setstring () {\n 	global $defaultlanguage;\n 	global $getlang;\n 	$lang = $_SESSION['lang'];\n 	$args = func_get_args ();\n	</p><p> 	# A newcomer.	\n 	if ( !isset ($lang) ) {\n 		session_register ('lang');\n 		$lang = $defaultlanguage;\n 	}\n 	</p><p> 	# give $_GET['lang'] the choice to set $lang \n 	if (  isset ($getlang) ) { \n 		$lang = $getlang;\n 		$_SESSION['lang'] = $lang;\n		\n 	}</p><p> 	\n 	# Now $lang have been set either by $languagedefautl, $getlang, or $_SESSION['lang'].\n 	# Loop in the language array and return $string if $lang is found.\n 	if ( count ($args) ) {\n 		if ( in_array ($lang, $args) ) {\n 			for ($i = 0; $i < count ($args); $i++) {</p><p> 				if ( $args[$i] == $lang ) {\n 					return $args[$i + 1];\n 				}\n 			}\n 		}\n 	}</p><p> 	return "";\n }</p><p></pre></p><p><h3><a name="howitworks">How it Works</a> </h3></p><p><p>\nBefore looking at the script itself, <strong>it is important to note</strong> that you'll need to put your include statement (the <code>include ("./setstring.inc")</code> call) before any HTML output.  This is because setstring can use cookies; see <a href="http://www.php.net/setcookie" target="_blank" title="Opens in a new window">setcookie</a> in the PHP manual for details.\n</p></p><p><p>\nAt the beginning of the script (lines: 12 - 19) we set the configurations for <code>$defaultlanguage</code>, <code>$use_cookie</code> and <code>$expirecookie</code>. The value of the <code>$defaultlanguage</code> is for newcomers that don't have a cookie or that didn't set the language by clicking on a link. The value of the default language can be anything, as the names of the languages. You can use something like this if you like:\n</p></p><p><p>\n<code>$defaultlanguage = "schtroumph"</code>\n</p></p><p><p>\n<code>&lt;?= setstring ('schtroumph', 'Quelle schtroumphe est-il ?', 'klingon', "'arlogh Qoylu'pu'?") ?&gt;</code>\n</p></p><p><p>\nDon't forget to escape your quotes inside the string returned by the function. This will not work: <code>('klingon', ''arlogh Qoylu'pu'?')</code> but this will: <code>'klingon', ('\'arlogh Qoylu\'pu\'?')</code>. You can also change single quote to double quotes as in the example above.\n</p></p><p><p>\nAlso, don't forget to use HTML entities to escape non-ASCII text. If you use languages like Arabic, Chinese or Hebrew, and depending if you use UTF-8 for text encoding or another variety of encoding that is not based on Unicode (like, for example, GB-2312 for Simplified Chinese), you can use directly this encoding with the setstring function. But you have to set the http-equiv in the <code>&lt;meta&gt;</code> tag like this:\n</p></p><p><pre>\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;\n</pre>\n<p>\nor \n</p>\n<pre>\n&lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312"&gt;\n</pre></p><p><p>\nYou set <code>$use_cookie</code> to 1 if you want your users to keep their language setting after the session finishes, and set <code>$expirecookie</code> to the number of seconds you want the cookie to last. In the example, <code>$expirecookie</code> is set to expire in 2 days.\n</p></p><p><p>\nThe language which the function returns is determined by order of priority:\n</p>\n<ol>\n	<li>The value of the <code>lang</code> argument in the <code>GET</code> request (lines: 23, 58)</li>\n		\n			<p>\n			You set the 'lang' value in the GET request by a link like this so that the page will point to itself: <br>\n			<code>&lt;?= "&lt;a href='" . $PHP_SELF . "?lang=fr'&gt;Fran&amp;ccedil;ais&lt;/a&gt;" ?&gt;</code>\n			</p>\n			<p>\n			And will look like this after PHP has processed it:<br>\n			<code>&lt;a href='/divers/phplocalization.html?lang=fr'&gt;Fran&amp;ccedil;ais&lt;/a&gt;</a></code>\n			</p>\n			<p>\n			If the <code>'lang'</code> value in the <code>GET</code> request is set and if <code>$use_cookie == 1</code>, we set a cookie for the <code>'lang'</code> value. <br>\n			</p>\n	</p><p>	<li>The value of the <code>lang</code> keyword for a cookie set previously by setstring (line: 32)</li>\n		\n			<p>\n			This was set in (1) if the user has clicked on a link with <code>'?lang=$lang'</code>.\n			</p></p><p>		</p><p> \n	<li>The global value <code>$defaultlanguage</code> (lines: 13, 55)</li>\n		\n			<p>\n			If nothing happened at (1) or (2), use the <code>$defaultlanguage</code> value to set the language.\n			</p>\n		\n</ol></p><p>When the <code>$lang</code> keyword is found, setstring loop in the array that was pass to it (lines: 65 -75) and returns the value of the element (which is the $string parameter) after the element that matches the value of <code>$lang</code>. Here's a snippet of code that illustrate the above.\n</p></p><p><pre>\n$lang = 'en';\nsetstring ('fr', 'Allo', 'en', 'Hello');</p><p>for ($i = 0; $i < count ($args); $i++) {\n    if ( $args[$i] == $lang ) {                 # $lang == 'en'\n        return $args[$i + 1];                   # return 'Hello'\n    }\n</pre></p><p><h3><a name="extendingsetstring">Extending setstring</a> </h3></p><p><p>\nIf you have repetitive text, you could use setstring with constants, and here's how to do it for the login example above.  First, create a file for each language and define the same constants.\n</p></p><p><h4>french.inc</h4>\n<pre>\n&lt;?\n####################################\n# french.inc\n# $Date$ - $RCSfile$ - $Revision$\n####################################</p><p>define ('LOGIN_REQUIRED', "Enregistrement requis");\ndefine ('LOGIN', "Nom de login");\ndefine ('PASSWORD', "Mot de passe");\n?&gt;</p><p></pre></p><p><h4>english.inc</h4>\n<pre>\n&lt;?\n####################################\n# english.inc\n# $Date$ - $RCSfile$ - $Revision$\n####################################</p><p>define ('LOGIN_REQUIRED', "Login Required");\ndefine ('LOGIN', "Login");\ndefine ('PASSWORD', "Password");\n?&gt;</p><p></pre></p><p><p>\nThen, you just have to use setstring once to build different languages versions. Here, we use setstring to pass the right language file to include.\n</p></p><p><h2><a name="loginpage2">Example 2: The Login Page</a></h2></p><p><pre>\n&lt;? include_once ("./setstring.inc") ?&gt;</p><p>&lt;? include ( setstring ( 'fr', './french.inc', 'en', './english.inc') )?&gt;</p><p>&lt;?= "&lt;a href='" . $PHP_SELF . "?lang=fr'&gt;Fran&amp;ccedil;ais&lt;/a&gt;" ?&gt;  \n&lt;?= "&lt;a href='" . $PHP_SELF . "?lang=en'&gt;English&lt;/a&gt;" ?&gt;  \n&lt;?= "&lt;a href='" . $PHP_SELF . "?logoff=1'&gt;Logoff&lt;/a&gt;" ?&gt;</p><p>&lt;form method="post" action="&lt;?=$PHP_SELF?&gt;"&gt;\n	&lt;p&gt;\n		&lt;b&gt;&lt;?=LOGIN_REQUIRED?&gt;&lt;/b&gt;\n	&lt;/p&gt;\n	&lt;p&gt;\n		&lt;?=LOGIN?&gt;&lt;br&gt;&lt;input type="text" name="uid" size="8"&gt;\n	&lt;/p&gt;\n	&lt;p&gt;\n		&lt;?=PASSWORD?&gt;&lt;br&gt;&lt;input type="password" name="pwd" size="8"&gt;\n	&lt;/p&gt;\n	&lt;p&gt;\n		&lt;input type="submit" name="processlogin" value=" &lt;?= SUBMIT ?&gt; "&gt;\n	&lt;/p&gt;\n&lt;/form&gt;</p><p></pre></p><p><p>\nIf you have a lot of text you can use an <code>include</code> function with <code>setstring</code>. You create a file for each language as above, and then use the <code>include</code> function:\n</p></p><p><h2><a name="loginpage3">Example 3: include and setstring</a></h2></p><p><pre>\n&lt;? include_once ("./setstring.inc") ?&gt;</p><p>&lt;?= "&lt;a href='" . $PHP_SELF . "?lang=fr'&gt;Fran&amp;ccedil;ais&lt;/a&gt;" ?&gt;  \n&lt;?= "&lt;a href='" . $PHP_SELF . "?lang=en'&gt;English&lt;/a&gt;" ?&gt;  \n&lt;?= "&lt;a href='" . $PHP_SELF . "?logoff=1'&gt;Logoff&lt;/a&gt;" ?&gt;</p><p>&lt;? include ( setstring ( 'fr', './filefrench.inc', 'en', './fileenglish.inc') )?&gt;\n</pre></p><p>\n<h2><a name="versionshistory">Version History</a> </h2></p><p><p>\nVersion 1.0 \n	<blockquote>\n	First release: December 19 2002.<br>\n	Open Source (BSD license).<br>\n	A big thanks to <a href="http://nyphp.org" title="http://nyphp.org">Hans Zaunere</a>, <a href="http://www.mcu.org.uk/" title="http://www.mcu.org.uk/">Jim Byrne</a>, Jaz-Michael King, and <a href="http://www.bouzou.com" title="http://www.bouzou.com">Deke Smith</a> for reviewing this text.<br>\n	</blockquote>\n</p></p><p><h2><a name="requirements">Requirements</a> </h2></p><p><p>\nPHP greater than 4.1.x<br>\n</p></p><p><h2><a name="download">Download</a> </h2></p><p><p>\n<a href="http://scriptdigital.com/divers/gems/setstring.txt" target="_blank" title="Opens in a new window">Save this page</a> to your disk as &quot;<code>setstring.inc</code>&quot;.\n</p></p><p><h2>Notes</em></h2></p><p><p>\n<ul>\n<li>\n<a href="http://www.onlamp.com/pub/a/php/2002/11/28/php_i18n.html?page=1" target="_blank" title="Opens in a new window">Internationalization and Localization with PHP</a><a name="note1">&nbsp;</a><br>\nby Adam Trachtenberg\n</li></p><p><li>\n<a href="http://www.onlamp.com/pub/a/php/2002/06/13/php.html" target="_blank" title="Opens in a new window">Gettext</a><a name="note2">&nbsp;</a><br>\nby Joao Prado Maia<br>\nhttp://www.onlamp.com/pub/a/php/2002/06/13/php.html</a>\n</li>\n</ul>
</div>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
