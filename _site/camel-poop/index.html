<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Camel Poop Object Oriented Programming In Perl</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">evolt.org</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Camel Poop Object Oriented Programming In Perl</h2>
<p class="meta">22 Apr 2003</p>

<div class="post">
<p>Most people are not aware of the\n                            fact that Perl has support for\n                            object-oriented programming. If\n                            you've used another object-oriented\n                            programming language such as Java or\n                            C++ or been exposed to\n                            object-orientation then object\n                            oriented programming in Perl is\n                            nothing like that. To do real useful\n                            object-oriented programming in Perl\n                            you only need to use a few simple\n                            rules as put forth by Larry Wall in\n                            Object Oriented Perl.\n                          </p>\n                          <p>\n                            Object oriented programmers are\n                            familiar with the concept of object\n                            and classes but I will review that\n                            here quickly. An object is a thing\n                            that provides access to or\n                            modification of data. A class is\n                            description of the attributes of a\n                            particular kind of object and the\n                            manner in which those objects can be\n                            accessed and modified. A method is a\n                            means by which an object's data is\n                            accessed or modified. An object is an\n                            instance of a class.\n                          </p>\n                          <p>\n                            An example would be a\n                            Person class in an HR\n                            system. The Person\n                            class describes the attributes of an\n                            Person such as name,\n                            address, title, social security\n                            number, id etc. A particular class\n                            instance or object would encapsulate\n                            data about a particular\n                            Person e.g. name,\n                            title, social security number,\n                            address, etc. Some methods to access\n                            that object's data would be name,\n                            address etc.\n                          </p></p><p>                            <h2>Package\n                            delivery</h2>\n                            <p> To create a class in Perl we first\n                            build a package. A package is a\n                            self-contained unit of user-defined\n                            variables and subroutines, which can\n                            be re-used over and over again. They\n                            provide a separate namespace within a\n                            Perl program that keeps subroutines\n                            and variables from conflicting with\n                            those in other packages.\n                          </p>\n                          <p>\n                            To declare a class named\n                            Person in Perl we do:\n                          </p>\n<pre>\npackage Person;\n</pre>\n                          <p>\n                            That's it. The scope of the <code>package</code>\n                            definition extends to the end of the\n                            file, or until another <code>package</code>\n                            keyword is encountered. Not very\n                            useful yet but on to the next\n                            section.\n                          </p></p><p>                            <h2>There's a method to\n                            this madness</h2>\n                          <p>\n                             A method is a means by which an\n                            object's data is accessed or\n                            modified. In Perl a method is just a\n                            subroutine defined within a\n                            particular package. So to define a\n                            method to print our\n                            Person object we do:\n                          </p>\n<pre>\nsub print {\n    my ($self) = @_;</p><p>    #print Person info\n    printf("Name:%s %s</p><p>", $self-&gt;firstName, $self-&gt;lastName );\n}\n</pre>\n                          <p>\n                            The subroutine print is now\n                            associated with the package\n                            Person. To call the\n                            method print on an\n                            Person object we use\n                            the Perl &quot;arrow&quot; notation. If the\n                            variable <code>$khurt</code> contains an\n                            Person object we would\n                            call print on that object by writing:\n                          </p>\n                          <pre>$khurt-&gt;print();</pre> \n                          <p>\n                            When the object method is invoked a\n                            reference to the object is passed in\n                            along with any other arguments. This\n                            is important since the method now has\n                            access to the object on which it to\n                            operate.\n                          </p>\n                          <p>\n                            How do we create the invoking object?\n                          </p>\n                            <h2>Bless me\n                            father</h2>\n                          <p>\n                             To create an instance of a class (an\n                            object) we need an object\n                            constructor. This constructor is a\n                            method defined within the package.\n                            Most programmers choose to name this\n                            object constructor method <code>new</code> but in\n                            Perl one can use any name.\n                          </p>\n                          <p>\n                            One can use any kind of Perl variable\n                            as an object in Perl. Most Perl\n                            programmers choose either references\n                            to arrays or hashes.\n                          </p>\n                          <p>\n                            Let's create our constructor for our\n                            Person class using a\n                            Perl hash reference;\n                          </p>\n<pre>\n#constructor\nsub new {\n    my $self = {\n        _firstName =&gt; undef,\n        _lastName  =&gt; undef,\n        _ssn       =&gt; undef,\n        _address   =&gt; undef\n    };\n    bless $self, 'Person';\n    return $self;\n}\n</pre>\n                          <p>\n                            What have we done? We created a\n                            subroutine called <code>new</code>\n                            associated with the package\n                            Person. The entries of\n                            the hash reference <code>$self</code>\n                            become the attributes of our object.\n                            We then use the <code>bless</code> function\n                            on the hash reference. The\n                            <code>bless</code> function take two\n                            arguments; a reference to the\n                            variable to be marked and a string\n                            containing the name of the class.\n                            This indicates that the variable now\n                            belongs to the class\n                            Person.\n                          </p>\n                          <p>\n                            To create an instance of our\n                            Person object:\n                          </p>\n<pre>\nmy $khurt = new Person();\n</pre>\n                          <p>\n                            We have not defined accessor methods\n                            or done any error checking on the\n                            input values or keys or the anonymous\n                            hash reference but we have the start\n                            of a Perl Person OO\n                            framework. To make our constructor\n                            more flexible and to make our class\n                            inheritable (more on that later) we\n                            can define it to use the\n                            <code>$class</code> variable to bless\n                            the hash reference.\n                          </p>\n<pre>\n#constructor\nsub new {\n    my ($class) = @_;\n    my $self = {\n        _firstName =&gt; undef,\n        _lastName  =&gt; undef,\n        _ssn       =&gt; undef,\n        _address   =&gt; undef\n    };\n    bless $self, $class;\n    return $self;\n}\n</pre>\n                          <p>\n                            Other object-oriented languages have\n                            the concept of security of the data\n                            to prevent a programmer from changing\n                            an objects data directly and so\n                            provide accessor methods to modify\n                            object data. Perl does not have\n                            private variables but we can still\n                            use the concept of accessor methods\n                            and ask programmers to not mess with\n                            our object innards.\n                          </p>\n                          <p>\n                            For our Person class we\n                            should provides accessor methods for\n                            our object attributes; <code>name</code>, \n							<code>address</code>,\n                            <code>title</code>, <code>ssn</code>.\n                          </p>\n<pre>\n#class Person\npackage Person;\nuse strict;\nuse Address;    #Person class will contain an Address</p><p>#constructor\nsub new {\n    my ($class) = @_;\n    my $self = {\n        _firstName =&gt; undef,\n        _lastName  =&gt; undef,\n        _ssn       =&gt; undef,\n        _address   =&gt; undef\n    };\n    bless $self, $class;\n    return $self;\n}</p><p>#accessor method for Person first name\nsub firstName {\n    my ( $self, $firstName ) = @_;\n    $self-&gt;{_firstName} = $firstName if defined($firstName);\n    return $self-&gt;{_firstName};\n}</p><p>#accessor method for Person last name\nsub lastName {\n    my ( $self, $lastName ) = @_;\n    $self-&gt;{_lastName} = $lastName if defined($lastName);\n    return $self-&gt;{_lastName};\n}</p><p>#accessor method for Person address\nsub address {\n    my ( $self, $address ) = @_;\n    $self-&gt;{_address} = $address if defined($address);\n    return $self-&gt;{_address};\n}</p><p>#accessor method for Person social security number\nsub ssn {\n    my ( $self, $ssn ) = @_;\n    $self-&gt;{_ssn} = $ssn if defined($ssn);\n    return $self-&gt;{_ssn};\n}</p><p>sub print {\n    my ($self) = @_;</p><p>    #print Person info\n    printf("Name:%s %s</p><p>", $self-&gt;firstName, $self-&gt;lastName );\n}</p><p>1;</p><p></pre>\n                          <h2>Making\n                          babies</h2>\n                           \n                          <p>\n                            Object-oriented programming sometimes\n                            involves inheritance. Inheritance\n                            simply means allowing one class\n                            called the <i>Child</i> to inherit\n                            methods and attributes from another,\n                            called the <i>Parent</i> one so you\n                            don't have to write the same code\n                            again and again. For example, we can\n                            have a class Employee which inherits\n                            from Person. This is an referred to\n                            as an &quot;isa&quot; relationship because an\n                            Employee is a Person. Perl has a\n                            special variable, <code>@ISA</code>, to help with\n                            this. <code>@ISA</code> which governs (method)\n                            inheritance. So to create a new\n                            Employee class that will inherit\n                            methods and attributes from our\n                            Person class we simply code:\n                          </p>\n<pre>\n# class Employee\npackage Employee;\nuse Person;\nuse strict;\nour @ISA = qw(Person);    # inherits from Person\n</pre>\n                          <p>\n                            What we have done is load the Person\n                            class and declare that Employee class\n                            inherits methods from it. We have\n                            declared no methods for Employee but\n                            an Employee object will behave just\n                            like a Person object. We should be\n                            able to write code:\n                          </p>\n<pre>\n#create Employee class instance\nmy $khurt =  new Employee();\n \n#set object attributes\n$khurt-&gt;firstName('Khurt');\n$khurt-&gt;lastName('Williams');\n</pre>\n                          without any other changes. \n                          <p>\n                            Now let's add some methods.\n                          </p>\n<pre>\n# class Employee\npackage Employee;\nuse Person;\nuse strict;\nour @ISA = qw(Person);    # inherits from Person</p><p>#constructor\nsub new {\n    my ($class) = @_;</p><p>    #call the constructor of the parent class, Person.\n    my $self = $class-&gt;SUPER::new();\n    $self-&gt;{_id}   = undef;\n    $self-&gt;{_title} = undef;\n    bless $self, $class;\n    return $self;\n}</p><p>#accessor method for  id\nsub id {\n    my ( $self, $id ) = @_;\n    $self-&gt;{_id} = $id if defined($id);\n    return ( $self-&gt;{_id} );\n}</p><p>#accessor method for  title\nsub title {\n    my ( $self, $title ) = @_;\n    $self-&gt;{_title} = $title if defined($title);\n    return ( $self-&gt;{_title} );\n}</p><p>sub print {\n    my ($self) = @_;</p><p>    # we will call the print method of the parent class\n    $self-&gt;SUPER::print;\n    $self-&gt;address-&gt;print;\n}</p><p>1;\n</pre>\n                          <p>\n                            Looking at the code you will notice\n                            that we have a <code>new</code>\n                            method and a <code>print</code>\n                            method. Both a Child class and its\n                            Parent class have the same method\n                            defined. We have overridden the\n                            Parent class' methods with the ones\n                            from the Child. When those methods\n                            are called on an Employee object we\n                            will get the Employee class' version\n                            of the method. This concept of using\n                            the methods of and existing object\n                            and modifying them is known as\n                            polymorphism.\n                          </p>\n                            <h2>Putting it\n                            together</h2></p><p>                          <p>\n                             So now we have a complete set of\n                            classes we can write a small program\n                            to test them.\n                          </p>\n<pre>\nuse strict;\nuse warnings;\nuse diagnostics;\nuse Employee;</p><p>#create Employee class instance\nmy $khurt =  eval { new Employee(); }  or die ($@);\n \n#set object attributes\n$khurt-&gt;firstName('Khurt');\n$khurt-&gt;lastName('Williams');\n$khurt-&gt;id(1001);\n$khurt-&gt;title('Executive Director');</p><p>$khurt-&gt;address( new Address() );</p><p>$khurt-&gt;address-&gt;street('10 Anywhere Lane');\n$khurt-&gt;address-&gt;city('Anytown');\n$khurt-&gt;address-&gt;state('NJ');\n$khurt-&gt;address-&gt;zip('12345');</p><p>#diplay Employee info\n$khurt-&gt;print();\n</pre>\n                          <p>\n                            Let's execute our code and see the\n                            output\n                          </p>\n<pre>\n$ ./test.pl\nName:Khurt Williams</p><p>Address: 10 Anywhere Lane\nAnytown, NJ 12345\n</pre>\n                          <p>\n                            It works! We covered the basics of\n                            object oriented programing in Perl.\n                            I hope this article was\n                            informative and useful.\n</p>
</div>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
